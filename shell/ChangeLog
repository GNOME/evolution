2004-04-23  JP Rosevear <jpr@ximian.com>

	* e-shell-window.c (e_shell_window_show_settings): if there is a
	current view, use the component alias to select a sensible default
	config control

2004-04-22  Trent Lloyd  <lathiat@bur.st>

	* e-sidebar.c (do_layout_text_buttons): take into account the position
	of the sidebar which isnt on the very left in right to left languages,
	otherwise the buttons are drawn in the wrong place.

2004-04-21  Not Zed  <NotZed@Ximian.com>

	* e-user-creatable-items-handler.c (execute_verb): if we're
	running a local create, invoke that directly via the callback.
	(e_user_creatable_items_handler_new): add a callback for creating
	local items.

2004-04-19  Jeffrey Stedfast  <fejj@ximian.com>

	* e-user-creatable-items-handler.c (ensure_menu_items): Same.

	* e-shell-startup-wizard.c (make_timezone_page): Same.

	* e-shell-settings-dialog.c (load_pages): Same.

	* e-shell-importer.c (e_shell_importer_start_import): Same.

	* e-component-registry.c (query_components): Don't use absolute
	pixel sizes, use the E_ICON_SIZE enums instead.

2004-04-19  Michael Terry  <mike@mterry.name>

	* GNOME_Evolution_Test.server.in.in: Change component icons to use the
	icon theme names for icons
	* Makefile.am: Remove e-icon-factory.[ch]
	* e-component-registry.c: Use the icon theme for component icons
	* e-icon-factory.[ch]: Removed these files
	* e-shell-importer.c:
	* e-shell-settings-dialog.c:
	* e-shell-startup-wizard.c:
	* e-shell-window-commands.c:
	* e-user-creatable-items-handler.c:
	* evolution-shell-component-utils.[ch]:
	* main.c:
	* glade/evolution-startup-wizard.glade:
	* importer/import.glade: Use the icon theme via EIconFactory for all
	of the icons in the shell, and the window icons

2004-04-14  JP Rosevear <jpr@ximian.com>

	* e-shell-importer.c (get_iid_for_filetype): differentiate between
	user cancellation and no importer
	(next_file_page): don't throw up a dialog if the user cancelled
	the selection process

2004-04-14  JP Rosevear <jpr@ximian.com>

	* e-shell-importer.c (start_import): don't unref the dialog,
	destroy it properly

2004-04-13  Not Zed  <NotZed@Ximian.com>

	* e-user-creatable-items-handler.c (create_verb): add a component
	name argument, so we don't use 'this_component', and everything
	comes from tasks!  Fix callers to pass the component alias.
	(struct _EUserCreatableItemsHandlerPrivate): change
	default_menu_item to be fallback_menu_item for the mail message
	new fallback.  Make default_menu_item be the default for the view
	(which some code seems to think it should be).  Fixes #56866.
	(ensure_menu_items): setup the fallback_menu_item here.
	(get_default_action_for_view): use the fallback as the fallback,
	not default.
	(setup_toolbar_button): set the default menu item here for the
	current view.

2004-04-09  Jeffrey Stedfast  <fejj@ximian.com>

	* e-shell.c (e_shell_attempt_upgrade): Don't activate the
	components here.
	(e_shell_construct): Activate them all here instead (before we
	attempt to upgrade). Fixes a bug where the shell would start up in
	online mode but never notify the components to go online.

	* main.c (idle_cb): s/Cannot access/Cannot register/

2004-04-09  Chris Toshok  <toshok@ximian.com>

	* e-shell.c (e_shell_attempt_upgrade): make sure the component is
	activated before calling upgradeFromVersion.

2004-04-09  Chris Toshok  <toshok@ximian.com>

	* e-shell.c (e_shell_attempt_upgrade): use BASE_VERSION to supply
	the major/minor version, and use UPGRADE_REVISION for the
	revision.
	(attempt_upgrade): store the key based on BASE_VERSION and
	UPGRADE_REVISION.

2004-04-09  Dan Winship  <danw@ximian.com>

	* e-user-creatable-items-handler.c: Change this a lot. Now each
	component will maintain its own EUserCreatableItemsHandler and
	merge the button and menus in and out of the UI as its controls
	are activated and deactivated. (This lets the connector component
	display the correct default for the New button). Also, update to
	the Product Design Team's new organization (separating object
	types from folder types)

	* e-shell.c: Remove all creatable_items_handler references
	(impl_dispose): unref the component registry (unrelated bug)
	
	* e-shell-window.c (e_shell_window_new): Remove
	creatable_items_handler reference

	* Makefile.am: Move e-user-creatable-items-handler from evolution
	to libeshell, and make libeshell depend on libemiscwidgets (for
	the combo button)

	* Evolution-Component.idl: add another field to CreatableItemType
	so we can distinguish object types from folder types.

2004-04-07  Jeffrey Stedfast  <fejj@ximian.com>

	* Evolution-ConfigControl.idl: Removed the "apply" method.

	* e-corba-config-page.c: We can probably remove this entire file,
	it seems pretty useless. But until I know for sure, I guess I
	won't bother.
	(impl_apply): Removed, no longer a valid interface.
	(listener_event_callback): Huh? calls a non-existant function if
	the event name was "changed". Uhm, yea...ok. Removed.
	(setup_listener): Removed. Did nothing but to setup the above
	listener.

	* evolution-config-control.c: No longer needs to keep 'changed'
	state.
	(evolution_config_control_changed): Removed.
	(impl_apply): Removed. No lonegr a valid interface.

2004-03-31  Rodney Dawes  <dobey@ximian.com>

	* e-shell-importer.c (choose_importer_from_list):
	(start_import):
	(prepare_intelligent_page): Remove dialog separators
	* e-shell-offline-handler.c (pop_up_confirmation_dialog): Change the
	border with of the dialog's vbox and action area to be HIG-compliant
	* e-shell-settings-dialog.c (init): Remove the dialog separator
	* e-shell-startup-wizard.c (prepare_importer_page): Remove the dialog
	separator to be more HIG-compliant
	(key_press_event_callback): Fix compile warnings and cast to the
	correct widget types for calling various gtk api
	Remove the dialog separator to be more HIG-compliant
	* main.c (show_development_warning): Make the devel warning dialog
	that pops up for unstable versions be HIG-compliant
	* glade/e-active-connection-dialog.glade: Make the active connection
	dialog for going off-line be HIG-compliant
	* importer/intelligent.c (create_gui): Remove the dialog separator
	and set the dialog's vbox and action area border widths to be more
	compliant with the HIG

2004-03-26  Rodney Dawes  <dobey@ximian.com>

	* e-shell-settings-dialog.c (impl_realize): We don't need this really
	(class_init): We don't need to have our own realize impl for setting
	the default window size of the dialog, especially since we are setting
	the size before we actually get realized, anyway
	(init): Set the dialog size here, and don't set the border width of the
	dialog

2004-03-18  Not Zed  <NotZed@Ximian.com>

	* e-shell-about-box.c: added (c) symbol and 2004 and changed to
	Novell to the copyright notice in the about box.

2004-03-12  Not Zed  <NotZed@Ximian.com>

	* e-shell.c (detect_version): when we check the evolution dir
	exists, check the evolution dir exists, not the config.xmldb file.
	Move filename building/usage into the else condition so it can't
	happen again.  Fixes #53277.

2004-03-10  Bill Zhu  <bill.zhu@sun.com>
	
	* e-shell-startup-wizzard.c (key_press_event_callback): Used the stock
	icon in confirm dialog.

	Fixes #55063
	
2004-03-06  Pratik V. Parikh <pratikvp@despammed.com>

	* e-shell-window-commands.c (command_quick_reference): Check that 
	app is not NULL before trying to open the quickref document.

	Fixes #55106

2004-02-15  Rodney Dawes  <dobey@ximian.com>

	* evolution-nognome.in: Use @BASE_VERSION@ for the binary

	Fixes #54796

2004-02-18  Not Zed  <NotZed@Ximian.com>

	* e-shell-offline-handler.c (prepare_for_offline): remove id, and
	use info->id for create_progress_listener.  Fixes #53649.

2004-02-10  JP Rosevear <jpr@ximian.com>

	* Remove dead files

2004-02-06  JP Rosevear <jpr@ximian.com>

	* importer/intelligent.c (get_intelligent_importers): use base
	version for intelligent importers

	* e-shell-importer.c (get_intelligent_importers): ditto
	
	Fixes #54004	
	
2004-02-06  Rodney Dawes  <dobey@ximian.com>

	* e-shell-window-commands.c (command_quick_reference): Really make
	this work with gnome-vfs 2.2, instead of using gnome-vfs 2.4 api,
	fixes #53566 more completely so snapshots can build again (doh)

2004-02-06  JP Rosevear <jpr@ximian.com>

	* importer/import.glade: remove step numbers

2004-02-05  Rodney Dawes  <dobey@ximian.com>

	* e-shell-window-commands.c (command_quick_reference): Use gnome-vfs
	directly, instead of relying on gnome_url_show (), to launch the
	application for the quick reference, since we can run on gnome 2.2
	mostly, and gnome_url_show () only handles the uri method there

	Fixes #53566

2004-02-04  JP Rosevear <jpr@ximian.com>

	* e-shell-importer.c (start_import): pass in a parent for the
	dialogs, use e_notice
	(import_druid_finish): we carry the filename around with us now
	(next_file_page): check the file here and store the name; put up
	gui dialogs
	(e_shell_importer_start_import): set the druid as a transient for
	the shell

2004-02-04  JP Rosevear <jpr@ximian.com>

	* importer/import.glade: add extra page

	* importer/evolution-importer.h: update protos

	* importer/evolution-importer.c: hold the createControl function
	(impl_GNOME_Evolution_Importer_createControl): implement
	(impl_GNOME_Evolution_Importer_loadFile): remove dead args

	* importer/evolution-importer-client.h: update/add protos

	* importer/evolution-importer-client.c
	(evolution_importer_client_create_control): wrapper
	(evolution_importer_client_load_file): we don't take physical_uri
	and folder_type as args any more

	* importer/GNOME_Evolution_Importer.idl: add createControl method
	and remove extraneous loadFile args

	* e-shell-window-commands.c (command_import): uncomment

	* e-shell-importer.h: update proto

	* e-shell-importer.c: remove DEPRECATED hack and tidy includes
	(get_iid_for_filetype): use query define
	(start_import): we don't take a file name and client directly now
	(create_plugin_menu): user query define
	(importer_dest_page_new): create vbox
	(import_druid_finish): we no longer do folder selection here
	(next_file_page): create the client here
	(prepare_dest_page): show the importer control
	(next_dest_page): skip to the finish
	(back_finish_page): back to the destination page
	(e_shell_importer_start_import): set up the destination page

	* Makefile.am: build import files again

2004-02-04  JP Rosevear <jpr@ximian.com>

	* e-shell-view-menu[hc]: remove dead files

2004-02-04  JP Rosevear <jpr@ximian.com>

	* e-shell.c (e_shell_quit): make this C89 compliant

2004-02-04  Not Zed  <NotZed@Ximian.com>

	** See bug #53683.

	* Evolution-Component.idl: added EvolutionComponent::quit() call.

	* main.c (quit_box_new): removed, dont show quit box anymore at
	the end, we've already shutdown by now with the new shutdown
	sequence.
	
	* e-shell-window-commands.c (command_quit): call e_shell_quit to
	quit.

	* e-shell.c (e_shell_prepare_for_quit): renamed es_run_quit, now
	internal, and a gtktimeout function, so return code inverted.
	(e_shell_quit): new public entry, find out if we can shutdown, if
	so, then trigger a shutdown.
	(e_shell_request_close_window): just call e_shell_quit to exit
	when we've run out of windows.
	(e_shell_quit): desensitise all of the app windows before running
	shutdown.  looks a bit weird, but not doing so looks worse.

2004-02-03  Dan Winship  <danw@ximian.com>

	* e-activity-handler.c: 
	* e-activity-handler.h: 
	* e-task-bar.c: 
	* e-task-bar.h: 
	* e-task-widget.c: 
	* e-task-widget.h: Moved to misc/widgets since they depend on
	libemiscwidgets now, and aren't actually used by the shell itself.

	* Makefile.am (eshell_HEADERS, libeshell_la_SOURCES): Update

2004-02-02  Chris Toshok  <toshok@ximian.com>

	* e-component-registry.c (component_info_new): don't generate a
	g_warning if button_icon == NULL.
	(component_info_free): unref the button_icon if it's != NULL.

2004-01-29  JP Rosevear <jpr@ximian.com>

	* main.c: turn development stuff back on

2004-01-28  JP Rosevear <jpr@ximian.com>

	* main.c (kill_dataserver): g_message this
	(destroy_config): remove the various pieces to create a cleanish
	state for re-migrating from 1.4.x
	(main): add --force-migrate option when in development mode

2004-01-28  Rodney Dawes  <dobey@ximian.com>

	* e-task-bar.c (init): First argument to gtk_hbox_new () is a boolean,
	not an int, don't show the hbox for activities by default
	(e_task_bar_prepend_task): Show the hbox for activities when we add
	tasks to the taskbar
	(e_task_bar_remove_task): If we have no tasks left to display, don't
	show the empty hbox

2004-01-27  Rodney Dawes  <dobey@ximian.com>

	* e-task-bar.c (init): Expand the label, this fixes the problem
	that people were having in the shell window with the preview pane
	and the weird warning from ECLippedLabel for urls

	Fixes #52937 for good

2004-01-26  David Trowbridge <trowbrds@cs.colorado.edu>
 
 	* Makefile.am: add definition for EVOLUTION_HELPDIR
 
 	* e-shell-window-commands.c: add handling for new "Quick
	Reference" menu
	
2004-01-26  Not Zed  <NotZed@Ximian.com>

	* e-shell.c (attempt_upgrade, detect_version, e_shell_construct):
	attempt the upgrade before trying to startup the wizard.

	* main.c (detect_version, attempt_upgrade): move to e-shell.c
	(idle_cb): remove call to attempt_upgrade.

2004-01-26  Rodney Dawes  <dobey@ximian.com>

	* e-shell-window.c (setup_widgets): Add panded widget to
	EShellWindowPrivate and handle state saving of position (#52049)
	* e-task-bar.c (init): Switch to EClippedLabel instead of GtkLabel
	for the status bar text (#52937)

	Fixes #52049 and #52937

2004-01-26  JP Rosevear <jpr@ximian.com>

	* e-shell.c (e_shell_construct): there is no splash screen any
	more

2004-01-26  JP Rosevear <jpr@ximian.com>

	* main.c: drop now useless gtkhtml/gconf check

2004-01-23  Rodney Dawes  <dobey@ximian.com>

	* main.c (idle_cb): Move uri_list loop into a separate function
	so we don't duplicate code in both instances where we are creating
	a new shell or using a current one, and don't open a new shell window
	if we are passing in a uri and a shell is already up

	Fixes #53216

2004-01-15  JP Rosevear <jpr@ximian.com>

	* e-config-upgrade.c: remove calendar and task keys for upgrade,
	its done in the calendar now

2004-01-15  Rodrigo Moya <rodrigo@ximian.com>

	* e-shell-view-menu.c: added ForgetPasswords menu item.
	(command_forget_passwords): callback for the new menu item.

	* e-shell-window-commands.c: (command_forget_passwords): ditto.

2004-01-15  JP Rosevear <jpr@ximian.com>

	* main.c (kill_dataserver): kill the correct binary, tidy includes

2004-01-15  JP Rosevear <jpr@ximian.com>

	* main.c (detect_version): move version detection here

	* e-config-upgrade.c: remove it from here; clean out all the
	mailer and bonobo conf conversion stuff, its been moved to the
	mailer and e-util

	* e-config-upgrade.h: remove proto

2004-01-15  Not Zed  <NotZed@Ximian.com>

	* e-config-upgrade.c (e_upgrade_detect_version): fix the check for
	~/evolution being a directory.

2004-01-13  JP Rosevear <jpr@ximian.com>

	* main.c (attempt_upgrade): detect the version more completely
	with the new util routine
	(main): don't upgrade the config db here

	* e-shell.h: update proto

	* e-shell.c (e_shell_attempt_upgrade): take the current version as
	numerical params

	* e-config-upgrade.h: update prototypes

	* e-config-upgrade.c (e_config_upgrade): remove version detection
	and saving code
	(e_upgrade_detect_version): routine to do the version detection

	* e-config-upgrade.c: drop my-evolution upgrade code

2004-01-12  JP Rosevear <jpr@ximian.com>

	* Makefile.am: use our libs

2004-01-12  JP Rosevear <jpr@ximian.com>

	* evolution-test-component.[hc]: Complete rewrite to match current
	component api

	* Makefile.am: conditionally build the test component
	
2004-01-11  JP Rosevear <jpr@ximian.com>

	* e-sidebar.c (button_new): track hbox and label widget
	(button_free): unref them
	(do_layout_text_buttons): layout buttons with text
	(do_layout_icon_buttons): layout icon only buttons
	(do_layout): layout based on mode
	(impl_size_request): distinguish between horizontal and vertical
	padding
	(init): set a default mode
	(e_sidebar_add_button): align the button text to the left, only
	add the text if we are in the text mode
	(e_sidebar_get_mode): accessor
	(e_sidebar_set_mode): accessor

	* e-sidebar.h: add prototype and mode enum

2004-01-11  JP Rosevear <jpr@ximian.com>

	* GNOME_Evolution_Test.server.in.in: proper server file for test
	components

	* Makefile.am: allow the test component to be built and installed

	* evolution-test-component.[hc]: new test component to match
	current api

2004-01-08  JP Rosevear <jpr@ximian.com>

	* e-shell.c (e_shell_attempt_upgrade): make sure we actually
	upgrade between revisions

2004-01-08  JP Rosevear <jpr@ximian.com>

	* e-shell-startup-wizard.c (get_intelligent_importers): add a ')'
	to create a valid query

2004-01-08  Not Zed  <NotZed@Ximian.com>

	* e-shell-startup-wizard.c (get_intelligent_importers): check that
	we found any importers before deferencing the pointer.

2004-01-05  ERDI Gergo  <cactus@cactus.rulez.org>

	* e-task-bar.c (init): Create a separate label to the left of the
	progress messages...
	(e_task_bar_message): ...and allow components to set it...

	* e-activity-handler.c (e_activity_handler_message): ...through
	this new ActivityHandler method

2003-12-30  JP Rosevear <jpr@ximian.com>

	* e-setup.[hc]: these just handle creating the ~/evolution dir and
	so are no longer needed

	* main.c (main): don't setup the old ~/evolution dir
	
	* Makefile.am: don't build dead files

	* e-shell.c (e_shell_go_online): get the id from the component
	info

2003-12-22  Ross Burton  <ross@burtonini.com>

	* e-shell.c: mark the settings dialog as transient for the main window.

2003-12-14  JP Rosevear <jpr@ximian.com>

	* e-user-creatable-items-handler.c (get_components_from_registry):
	only add the component to the list if we actually create it

	Fixes #51707
	
2003-12-11  Not Zed  <NotZed@Ximian.com>

	* e-sidebar.c (do_layout): remove padding around the folder list.
	(impl_size_request): don't add padding around folder list.

2003-12-09  Ettore Perazzoli  <ettore@ximian.com>

	[#51710]

	* GNOME_Evolution_Shell.server.in.in: Remove
	GNOME_Evolution_Shell_Config_FolderSettings_Control.

2003-12-06  JP Rosevear <jpr@ximian.com>

	* e-shell-importer.c: remove useless gal include

	* Makefile.am: Remove hard coded disable deprecated flags

2003-12-04  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell.c (e_shell_prepare_for_quit): Implement.

	* Evolution-Component.idl (Component::requestQuit): Make sync
	[i.e. just return a boolean instead of using a BonoboListener].

2003-12-03  Ettore Perazzoli  <ettore@ximian.com>

	[Fix for #51619.]

	* e-shell.c (impl_Shell_createNewWindow): If component_id is the
	empty string, pass NULL for it to e_shell_create_window() so we
	get the default.

	* main.c (idle_cb): Pass an empty string for component_id to
	createNewWindow() if the default_component_id is NULL.

2003-12-03  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am: Move e-task-bar and e-task-widget into libeshell.
	[Fix pointed out by Bernard Leach <leachbj@bouncycastle.org>.]

2003-12-03  Ettore Perazzoli  <ettore@ximian.com>

	* Evolution-Session.idl: Remove.
	* Evolution-Activity.idl: Remove.
	* Evolution-ShellComponent.idl: Remove.
	* Evolution-ShellComponentDnd.idl: Remove.
	* Evolution-ShellView.idl: Remove.
	* Evolution-Shortcuts.idl: Remove.
	* Evolution-Storage.idl: Remove.
	* Evolution-StorageSetView.idl: Remove.

	* evolution-shell-view.c: Remove.
	* evolution-shell-view.h: Remove.

	* evolution-session.c: Remove.
	* evolution-session.h: Remove.

2003-12-03  Ettore Perazzoli  <ettore@ximian.com>

	* e-activity-handler.c: Do not #include
	"e-shell-corba-icon-utils.h".

2003-12-03  Ettore Perazzoli  <ettore@ximian.com>

	* e-folder-list.c: Remove.
	* e-folder-list.h: Remove.

	* e-folder-tree.c: Remove.
	* e-folder-tree.h: Remove.

	* e-folder.c: Remove.
	* e-folder.h: Remove.

	* evolution-shell-component.c: Remove.
	* evolution-shell-component.h: Remove.

	* evolution-shell-client.c: Remove.
	* evolution-shell-client.h: Remove.

	* evolution-folder-selector-button.c: Remove.
	* evolution-folder-selector-button.h: Remove.

	* evolution-activity-client.c: Remove.
	* evolution-activity-client.h: Remove.

	* evolution-storage.c: Remove.
	* evolution-storage.h: Remove.

2003-12-02  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c (e_shell_window_save_defaults): Implement.
	(e_shell_window_new): Set the width/height from the GConf keys.

2003-12-02  Rodney Dawes  <dobey@ximian.com>

	* Makefile.am: Version the schemas
	* apps_evolution_shell.schemas: Removed
	* apps_evolution_shell.schemas.in.in: Added

2003-12-01  Ettore Perazzoli  <ettore@ximian.com>

	* e-activity-handler.c (e_activity_handler_operation_finished):
	Argh, renamed from e_activity_client_operation_finished().
	(e_activity_handler_operation_started): Don't unref the pixbuf.

	* e-shell-window.c (setup_widgets): Hide the menu hint label.

	* e-activity-handler.c (init): Init to next_activity_id to 1 so
	callers can rely on it being nonzero.

2003-12-01  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell.c (struct _EShellPrivate): Remove member
	activity_handler.
	(setup_activity_interface): Remove.
	(e_shell_init): Don't call.
	(create_window): Don't attach the task bar to the activity
	handler.

	* e-shell-window.c (struct _ComponentView): New member
	statusbar_widget.
	(struct _EShellWindowPrivate): Remove member task_bar.
	(init_view): Get the status bar control from createControls and
	put it in the ComponentView struct.
	(setup_task_bar): New.
	(setup_statusbar_notebook): New.
	(switch_view): Switch the statusbar notebook too.
	(impl_dispose): Add missing GTK_OBJECT() cast.
	(e_shell_window_peek_task_bar): Remove.

	* Evolution-Component.idl (Component::createControls): New out arg
	"statusbar_control"; this way components can provide their own
	status bar.

	* e-activity-handler.c, e-activity-handler.h: Turn into a plain
	GObject; translate all the CORBA methods into plain C methods.

	* Makefile.am: Move e-activity-handler to libeshell instead of it
	being in the shell.

2003-12-01  Rodney Dawes  <dobey@ximian.com>

	* GNOME_Evolution_Shell.server.in.in:
	* e-component-registry.c:
	* e-shell-config.c:
	* e-shell-shared-folder-picker-dialog.c:
	* e-shell-startup-wizard.c:
	* e-shell.h:
	* e-user-creatable-items-handler.c:
	* evolution-activity-client.c:
	* evolution-storage.c: Use BASE_VERSION for repo_ids and OAFIIDs

2003-11-30  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell.c (struct _EShellPrivate): New member offline_handler.
	(offline_procedure_started_cb): New.
	(offline_procedure_finished_cb): New.
	(e_shell_go_offline): Implement (putting back the code that we had
	#if 0'ed out).
	(e_shell_go_online): Likewise.

	* e-shell-offline-handler.c, e-shell-offline-handler.h: Put back
	in, massage for the changes in the Offline interface.

	* e-shell-offline-sync.c, e-shell-offline-sync.h: Remove from CVS.

	* Evolution-Offline.idl (SyncFolderProgressListener): Remove.
	(Offline::SyncFolder): Remove.

2003-11-23  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: remove gtk deprecated flag

2003-11-20  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell.c (impl_Shell_handleURI): Reimplemented using
	EComponentRegistry.

	* main.c (idle_cb): Create a new window even if we have a URI
	list.

	* e-component-registry.c
	(e_component_registry_peek_info_for_uri_schema): New.

2003-11-19  Ettore Perazzoli  <ettore@ximian.com>

	* e-component-registry.c (component_info_free): Free
	->uri_schemas.
	(set_schemas): New function to get the list of URI schemas given a
	component's ServerInfo.
	(query_components): Call it.

	* e-component-registry.h (struct _EComponentInfo): Add
	"uri_schemas" member.

	* Evolution-Component.idl (Component.handleURI): New method.

2003-11-19  Ettore Perazzoli  <ettore@ximian.com>

	* evolution-activity-client.c
	(evolution_activity_client_construct): Get a raw
	GNOME_Evolution_Shell as an arg instead of an
	EvolutionShellClient.
	(get_shell_activity_iface): New helper function.
	(evolution_activity_client_construct): Use it.

2003-11-19  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c (impl_dispose): Destroy the tooltips instead of
	unreffing them.

	* e-shell.c (struct _EShellPrivate): New member activity_handler.
	(setup_activity_interface): New.
	(impl_dispose): Add a comment about why we must not unref
	activity_handler here.
	(create_window): Attach the task bar to the new window.

	* e-shell-window.c (e_shell_window_peek_task_bar): New.

	* e-activity-handler.c: Add back.
	* e-activity-handler.h: Add back.

2003-11-19  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c (struct _EShellWindowPrivate): New members
	status_bar, offline_toggle, offline_toggle_image, menu_hint_label,
	task_bar, tooltips.
	(init): Initialize ->tooltips.
	(impl_dispose): Unref ->tooltips.
	(offline_toggle_clicked_callback): New.
	(e_shell_window_new): Connect shell_line_status_changed_callback()
	to the shell's "line_status_changed" signal.
	(shell_line_status_changed_cb): New.
	(setup_offline_toggle): New.
	(setup_menu_hint_label): New.
	(setup_task_bar): New.
	(setup_status_bar): New.
	(setup_widgets): Call setup_status_bar() and add add the status
	bar to the window.
	(update_offline_toggle_status): New.
	(update_send_receive_sensitivity): New.
	(load_icons): New.
	(class_init): Call load_icons().
	(ui_engine_remove_hint_callback): New.

2003-11-17  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window-commands.c: Add a pixmap for the toolbar
	SendReceive button.

2003-11-17  Ettore Perazzoli  <ettore@ximian.com>

	* main.c (attempt_upgrade): New helper function.
	(idle_cb): Call it if we have a local shell.  Also, remove unused
	variables.

	* e-shell.c (e_shell_attempt_upgrade): New.

	* Evolution-Component.idl (Component.upgradeFromeVersion): New.

2003-11-17  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window-commands.c (command_open_new_window): New,
	implement "OpenNewWindow" verb.

2003-11-17  Ettore Perazzoli  <ettore@ximian.com>

	* e-setup.c: Do not #include "e-local-folder.h".

	* Makefile.am: Don't build evolution-test-component for now since
	it's all out of date.

	* main.c (evolution_debug_log): Make static instead of extern.

	* e-user-creatable-items-handler.c: #include
	<bonobo/bonobo-control.h>.

	* e-shell.h: Do not include "e-uri-schema-registry.h" or
	"evolution-shell-component-client.h".
	* e-shell.c: Likewise.

	* e-shell.c (struct _EShellPrivate): Removed member
	uri_schema_registry.
	(impl_Shell_handleURI): #if 0 it out for now.
	(e_shell_peek_uri_schema_registry): Disabled for now.

	* e-uri-schema-registry.c: Don't compile for now.

	* e-corba-storage-registry.c: Remove.
	* e-corba-storage-registry.h: Remove.
	* e-corba-storage.c: Remove.
	* e-corba-storage.h: Remove.
	* e-folder-dnd-bridge.c: Remove.
	* e-folder-dnd-bridge.h: Remove.
	* e-folder-selection-dialog.c: Remove.
	* e-folder-selection-dialog.h: Remove.
	* e-folder-type-registry.c: Remove.
	* e-folder-type-registry.h: Remove.
	* e-local-folder.c: Remove.
	* e-local-folder.h: Remove.
	* e-local-storage.c: Remove.
	* e-local-storage.h: Remove.
	* e-shell-folder-selection-dialog.c: Remove.
	* e-shell-folder-selection-dialog.h: Remove.
	* e-shell-view.c: Remove.
	* e-shell-view.h: Remove.
	* e-storage-browser.c: Remove.
	* e-storage-browser.h: Remove.
	* e-storage-set-view.c: Remove.
	* e-storage-set-view.h: Remove.
	* e-storage-set.c: Remove.
	* e-storage-set.h: Remove.
	* e-storage.c: Remove.
	* e-storage.h: Remove.
	* evolution-shell-component-client.c: Remove.
	* evolution-shell-component-client.h: Remove.
	* evolution-shell-component-dnd.c: Remove.
	* evolution-shell-component-dnd.h: Remove.
	* evolution-storage-listener.c: Remove.
	* evolution-storage-listener.h: Remove.
	* evolution-storage-set-view-listener.c: Remove.
	* evolution-storage-set-view-listener.h: Remove.

2003-11-13  Ettore Perazzoli  <ettore@ximian.com>

	* main.c (DEVELOPMENT_WARNING): Define.

2003-11-13  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell.c (e_shell_send_receive): New.

	* Evolution-Component.idl (Component.sendAndReceive): New.

2003-11-13  Ettore Perazzoli  <ettore@ximian.com>

	* e-user-creatable-items-handler.c (ensure_menu_items): Reverse
	the list so we get the items in the same order they were given to
	us [since we are using g_slist_prepend() to build the list].

2003-11-13  Ettore Perazzoli  <ettore@ximian.com>

	* Evolution-Component.idl (GNOME.Evolution.Component.UnknownType):
	New exception.

2003-11-13  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c: New signal "component_changed".
	(class_init): Install.
	(switch_view): Emit.
	(e_shell_window_new): Call
	e_user_creatable_items_handler_attach_menus() to attach the
	"New..."  menus.
	(e_shell_window_peek_current_component_id): New.
	(e_shell_window_peek_shell): Add precondition.
	(e_shell_window_peek_current_component_id): Likewise.
	(e_shell_window_peek_bonobo_ui_component): Likewise.

	* e-user-creatable-items-handler.c: New.
	* e-user-creatable-items-handler.h: New.

	* e-shell-window.h: #include <bonobo/bonobo-ui-component.h>.

	* e-shell.c (struct _EShellPrivate): Add member
	user_creatable_items_handler.
	(e_shell_get_user_creatable_items_handler): Remove.
	(e_shell_peek_user_creatable_items_handler): New.

	* Evolution.idl: Don't #include Evolution-ShellComponent.idl.

	* Evolution-Component.idl (GNOME.Evolution.RequestCreateItem): New
	method.
	(GNOME.Evolution.creatableItems): New attribute.

	* e-shell-user-creatable-items-handler.c: Remove.
	* e-shell-user-creatable-items-handler.h: Remove.

2003-11-12  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c (e_shell_window_switch_to_component): Call
	e_sidebar_select_button() instead of switch_view().

	* e-sidebar.c (update_buttons): New helper function.
	(e_sidebar_select_button): New.

2003-11-11  JP Rosevear <jpr@ximian.com>

	* main.c (kill_dataserver): kill the right thing
	(kill_old_dataserver): rename and check the version correctly

2003-11-10  Ettore Perazzoli  <ettore@ximian.com>

	* main.c: Added a new "-c" command-line arg.
	(idle_cb): If the arg is specified, open the component with that
	id/alias.

	* e-shell.c (impl_Shell_createNewView): New, implementation for
	the Shell::createNewView() CORBA method.
	(e_shell_class_init): Install.
	(e_shell_create_window): Get a component_id arg.

	* e-shell-window.c (e_shell_window_new): Get a component_id arg
	and create the window with that component activated if not NULL.

	* Evolution-Shell.idl (createNewView): Remove.
	(createNewWindow): New.

2003-11-10  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c (struct _ComponentView): New member
	"component_alias".
	(component_view_new): Get a new "alias" arg, set the member in the
	struct accordingly.
	(component_view_free): Free ->component_alias.
	(setup_widgets): Pass the alias from the ComponentInfo to
	e_component_view().
	(switch_view): New utility function.
	(sidebar_button_selected_callback): Use it.
	(e_shell_window_switch_to_component): New public function.
	(e_shell_window_new): Switch to the component whose id is in the
	/apps/evolution/shell/view_defaults/component_id GConf key.

	* apps_evolution_shell.schemas: Removed view_defaults/folder_path.
	New key view_defaults/component_id.

	* e-component-registry.c (component_info_free): Free ->alias.
	(component_info_new): Get an "alias" arg and set the member
	accordingly.
	(query_components): Remove debugging messages.  Get an
	"evolution:component_alias" property from the component and set
	the alias from that.

	* e-component-registry.h (struct _EComponentInfo): New member
	"alias".

2003-11-07  JP Rosevear <jpr@ximian.com>

	* Makefile.am: don't include top level libical

2003-11-07  JP Rosevear <jpr@ximian.com>

	* Makefile.am: make sure the marshal header is in the sources too

2003-11-07  JP Rosevear <jpr@ximian.com>

	* main.c: use e-d-s idl to check interface version

	* Makefile.am: build e-d-s idl

2003-11-03  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-shared-folder-picker-dialog.c (setup_name_selector):
	Append "_2" to the SelectNames OAFIID.

2003-11-03  Ettore Perazzoli  <ettore@ximian.com>

	* GNOME_Evolution_Shell.server.in.in: Use "evolution2:config_item"
	attributes instead of "evolution:config_item" ones.

	* e-shell-settings-dialog.c (load_pages): Expect
	"evolution2:config_item" properties instead of
	"evolution:config_item" so they do not conflict with 1.4's.

2003-10-29  Dan Winship  <danw@ximian.com>

	* Evolution-Component.idl: declare an exception for createControls
	to return, so we don't have to just crash if it fails.

2003-10-28  Rodney Dawes  <dobey@ximian.com>

	* Makefile.am: Add e-shell-view.h to evolution_SOURCES

2003-10-28  Rodney Dawes  <dobey@ximian.com>

	* Makefile.am: Fix automake warning, and add
	e-shell-user-creatable-items-handler.h to evolution_SOURCES

2003-10-23  Chris Toshok  <toshok@ximian.com>

	* e-component-registry.c (query_components): handle the case where
	label == NULL, and set it to _("Unknown").

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* e-sidebar.c (e_sidebar_add_button): Add a little border to the
	buttons so it looks nicer.

	* e-component-registry.c (query_components): Set an icon from the
	"evolution:button_icon" attribute.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell.c (struct _EShellPrivate): New member
	"component_registry".
	(e_shell_construct): Don't call e_shell_unregister_all().
	(e_shell_unregister_all): Removed.
	(e_shell_init): Use g_new0(), removed a bunch of NULL/FALSE
	assignments.
	(e_shell_init): Initialize the component_registry.
	(e_shell_peek_uri_schema_registry): Rename from
	e_shell_get_uri_schema_registry.
	(e_shell_peek_component_registry): New.
	(setup_components): Remove.
	(e_shell_construct): Don't call.

	* main.c (no_windows_left_cb): Don't call e_shell_unregister_all().

	* e-shell.c (parse_default_uri): Removed.
	(parse_evolution_uri): Removed.
	(e_shell_parse_uri): Removed.

	* e-component-info.c: Remove.
	* e-component-info.h: Remove.

2003-10-22  Jeffrey Stedfast  <fejj@ximian.com>

	* e-storage-set-view.c (impl_tree_drag_data_received): Emit the
	right signal.
	(impl_tree_drag_data_get): Same.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* importer/intelligent.c (create_gui): Make the scrolled window
	have a GTK_SHADOW_IN shadow.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c (setup_widgets): Make the notebooks not have
	borders.
	(setup_widgets): Fix typo: e_get_language_list() returns a GSList,
	not a GList.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* e-storage-browser.c (struct _EStorageBrowserPrivate): New member
	"storage_set_view_scrolled".
	(e_storage_browser_new): Put the storage_set_view in a scrolled
	window.  Set priv->storage_set_view_scrolled to this scrolled
	window.
	(e_storage_browser_peek_tree_widget_scrolled): New.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* e-sidebar.c (PADDING): Increase to 6 pixels.
	(button_toggled_callback): Add a cast.
	(e_sidebar_set_selection_widget): Handle the NULL widget case
	properly.
	(impl_remove): New, implementation for GtkContainer::remove.
	(do_layout): Add padding between the selection_widget and the
	button box.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c (struct _ComponentView): New member button_id.
	(struct _EShellWindowPrivate): New member sidebar.
	(component_new_new): Get a button_id arg.
	(component_button_clicked_callback): Removed.
	(sidebar_button_selected_callback): New.
	(create_component_button): Removed.
	(setup_widget): Set up the sidebar using ESidebar and hook up its
	"button_selected" signal.  Also get the component name from a
	property on the server info.
	(e_shell_window_new): Use BASE_VERSION for the version in the app
	name instead of hardcoding "1.5".

	* e-sidebar.c: New.
	* e-sidebar.h: New.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* GNOME_Evolution_Shell.server.in.in: Append a _2 to all the IIDs.

	* e-shell.h (E_SHELL_OAFIID): Change to "GNOME_Evolution_Shell_2"
	so it does not conflict with the old IID.

2003-10-22  Jeffrey Stedfast  <fejj@ximian.com>

	* e-shell-window.c (e_shell_window_new): Change to "evolution-1.5"
	- although, ideally, this should be a config.h macro or something.

2003-10-22  Dan Winship  <danw@ximian.com>

	* main.c: Remove e_proxy_init call. (e-proxy is gone now)

2003-10-17  Jeffrey Stedfast  <fejj@ximian.com>

	* e-storage-set-view.c: Rewrote the drag & drop code.

2003-10-21  Not Zed  <NotZed@Ximian.com>

	* e-storage-browser.c (e_storage_browser_show_path): ref the view
	since removing it from the hashtable will unref it.

2003-10-09  Jeffrey Stedfast  <fejj@ximian.com>

	* Makefile.am: INCLUDE path fixes for changes made to libical
	build.

2003-09-30  Ismael Olea <ismael@olea.org>

	* e-shell-about-box.c: fixed encoding for Spanish translators.

2003-09-29  Ettore Perazzoli  <ettore@ximian.com>

	* e-folder-selection-dialog.c, e-folder-selection-dialog.h: New
	files, based on e-shell-folder-selection-dialog.[ch].  These don't
	require the shell, they just need an EStorageSet to work.

2003-09-23  Charles Zhang  <charles.zhang@sun.com>

	* e-shell-startup-wizard.c (e_shell_startup_wizard_create): connect
	to "key_press_event" signal with key_press_event_callback.
	(key_press_event): Handle `ESC` key press event. [#48145]

2003-09-22  Hans Petter Jansson  <hpj@ximian.com>

	* Makefile.am (evolution_LDADD): libical.la -> libical-evolution.la

2003-09-12  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* e-config-upgrade.c: (utf8_reencode), (upgrade_xml_1_2_rec),
	(e_config_upgrade):
	Fix migration of shortcuts.xml which was incorrectly encoded by
	libxml1. (Mdk bug #4927)

2003-09-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-storage-set-view.c (impl_right_click): If the
	right_click_row_path is not NULL (i.e. a menu is being popped up
	already), don't pop up the menu again.  [#48388]

2003-09-11  Ettore Perazzoli  <ettore@ximian.com>

	[#47875, thanks to Calvin Liu for figuring this out.]

	* e-shortcuts.c (e_shortcuts_add_default_shortcuts): Use the
	group_num arg, so it gets added to the proper group.
	(e_shortcuts_add_default_group): Pass the actual group number to
	e_shortcuts_add_default_shortcuts().

2003-09-11  Hans Petter Jansson  <hpj@ximian.com>

	* Makefile.am (evolution_LDADD): libical-evolution.la -> libical.la

2003-09-05  Yuedong Du  <yuedong.du@sun.com>

	* e-shell-importer.c: (importer_file_page_new),
	(importer_type_page_new), (show_import_wizard): Use 
	gtk_label_new_with_mnemonic() to replace gtk_label_new(). Use
	gtk_label_set_mnemonic_widget() to set up label<-> entry
	relationship. Change gtk_button_set_label() to 
	gtk_button_set_use_underline() and gtk_button_set_label(). Change 
	gtk_radio_button_new_with_label_from_widget() to 
	gtk_radio_button_new_with_mnemonic_from_widget(). fix bug #47867

2003-08-18  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c: New member current_view in struct
	EShellWindowPrivate.
	(init_view): Set it to the newly added view.  Also, switch the
	notebooks to the new page.
	(component_button_clicked_callback): Set current_view here as
	well, for existing views.
	(component_view_activate): New.
	(component_view_deactivate): New.
	(init_view): Deactivate existing view, activate new selected view.
	(component_button_clicked_callback): Likewise.
	(init_view): Set the component_iface to CORBA_OBJECT_NIL in the
	view if you cannot create the controls.

2003-08-17  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c (setup_widgets): Pass TRUE for @resize to
	gtk_paned_pack2() for the view notebook.

2003-07-29  Ettore Perazzoli  <ettore@ximian.com>

	* e-splash.c, e-splash.h: Removed from the build.

2003-07-25  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell.c (e_shell_close_all_windows): Oops.  Traverse the
	window list with a local "next" variable like we did in the
	original code.  Otherwise, we crash because the list is being
	modified at each gtk_widget_destroy().

2003-07-25  Ettore Perazzoli  <ettore@ximian.com>

	* e-storage-browser.c (class_init): Set up "page_switched" signal.
	(e_storage_browser_show_path): Emit "page_switched".

	* e-storage-browser.h: New signal "page_switched".

2003-07-25  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-window.c: Removed member ui_container from
	EShellWindowPrivate.
	(e_shell_window_peek_shell): New.
	(e_shell_window_peek_bonobo_ui_component): New.
	(e_shell_window_new): Don't set the ui_container anymore, just get
	it ourselves.  Also call e_shell_window_commands_setup().

	* e-shell-window-commands.c, e-shell-window-commands.h: New files
	implementing the commands for the shell windows.

	* e-shell.c (e_shell_close_all_windows): Renamed from
	e_shell_destroy_all_windows().

	* main.c (idle_cb): Create a new window using
	e_shell_create_window().

	* e-shell-importer.h: Define _E_SHELL_IMPORTER_H_ to prevent
	multiple inclusion, instead of __IMPORTER_H__.  Also, do not
	#include <bonobo/bonobo-ui-component.h>.

	* e-shell-importer.c (e_shell_importer_start_import): Renamed from
	show_import_wizard().  Don't get any args.

2003-07-24  Ettore Perazzoli  <ettore@ximian.com>

	* main.c: Remove the global evolution_directory variable.
	(main): Just declare, assign and free the evolution_directory
	variable here.  Also, use g_idle_add() instead of gtk_idle_add().
	(idle_cb): Don't pass the evolution directory path to
	e_shell_new() anymore, since that arg is gone.

	* e-shell.c: Remove member local_directory from EShellPrivate.
	(impl_finalize): Don't free.
	(e_shell_init): Don't NULL.
	(e_shell_construct): Removed arg local_directory.
	(e_shell_new): Likewise.
	(e_shell_construct): Don't call e_setup_check_config() here.
	(e_shell_get_local_directory): Removed.

2003-07-24  Ettore Perazzoli  <ettore@ximian.com>

	* main.c: Removed global variable "no_splash".
	(idle_cb): Updated to not pass the splash argument to
	e_shell_new().
	(main): Removed "--no-splash" option.

	* e-shell.c: Removed members storage_set, local_storage,
	summary_storage, folder_type_registry, component_registry,
	corba_storage_registry from struct EShellPrivate.
	(setup_corba_storages): Removed.
	(e_shell_construct): Don't invoke.
	(setup_local_storage): Removed.
	(e_shell_construct): Don't invoke.  Also, removed initialization
	for all the removed members.
	(e_shell_new): No priv->storage_set anymore.
	(e_shell_get_storage_set): Removed.
	(e_shell_get_local_storage): Removed.
	(e_shell_get_folder_type_registry): Removed.
	(set_owner_on_components): Removed.
	(set_interactive): Removed contents; do nothing for now.
	(pop_up_activation_error_dialog): Removed.
	(e_shell_construct): Removed arg show_splash.  Do not create a
	splash dialog at all.
	(e_shell_new): Removed arg show_splash here as well.
	(e_shell_construct): No folder type registry handling here
	anymore.
	(setup_components): Removed splash arg.
	(save_settings_for_components): Removed.
	(save_settings_for_component): Removed.
	(save_misc_settings): Removed.
	(e_shell_save_settings): Moved the code in here.
	(e_shell_component_maybe_crashed): Removed.
	(e_shell_send_receive): Removed.
	(e_shell_get_component_registry): Removed.
	(prepare_for_quit_callback): Removed.

	* evolution-storage-set-view.c: Removed from build.
	* evolution-storage-set-view.h: Removed from build.
	* evolution-storage-set-view-factory.c: Removed from build.
	* evolution-storage-set-view-factory.h: Removed from build.

	* e-component-registry.c, e-component-registry.h: Removed from
	build.

	* e-shell-folder-creation-dialog.c: Removed from build.
	* e-shell-folder-creation-dialog.h: Removed from build.

	* e-shell-folder-selection-dialog.c: Removed from build.
	* e-shell-folder-selection-dialog.h: Removed from build.

2003-07-24  Ettore Perazzoli  <ettore@ximian.com>

	* e-setup.c: Do not #include "e-shell-config.h".

	* main.c (idle_cb): Do not register the config factory.

	* e-shell.c: Removed members offline_handler, shortcuts and
	corba_shortcuts from EShellPrivate.
	(setup_shortcuts_interface): Removed.
	(storage_set_moved_folder_callback): Removed.
	(e_shell_construct): Don't connect.  Also, no need to set up the
	shortcuts either.
	(e_shell_get_shortcuts): Removed.
	(offline_procedure_started_cb): Removed.
	(offline_procedure_finished_cb): Removed.
	(e_shell_go_offline): Just assert for now.
	(e_shell_go_online): Same.

	* e-shell-config-autocompletion.c: Removed.
	* e-shell-config-autocompletion.h: Removed.

	* e-shell-config-default-folders.c: Removed.
	* e-shell-config-default-folders.h: Removed.

	* e-shell-config-folder-settings.c: Removed.
	* e-shell-config-folder-settings.h: Removed.

	* e-shell-config.c, e-shell-config.h: Removed.

	* e-corba-shortcuts.c, e-corba-shortcuts.h: Removed.

	* e-shortcuts-view-model.c, e-shortcuts-view-model.h: Removed.

	* e-shortcuts-view.c, e-shortcuts-view.h: Removed.

	* e-shortcuts.c, e-shortcuts.h: Removed.

	* e-shell-offline-handler.c, e-shell-offline-handler.h: Removed.
	
	* e-shell-offline-sync.c, e-shell-offline-sync.h: Removed.

	* e-shell-config-offline.c, e-shell-config-offline.h: Removed.

2003-07-24  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell.c: Renamed signal "new_view_created" to
	"new_window_created".  Renamed "no_views_left" to
	"no_windows_left". Renamed EShellPrivate member "views" to
	"windows".  Removed member user_creatable_items_handler.
	(notify_no_windows_left_idle_cb): Renamed from
	notify_no_views_left_idle_cb.  Emit "no_windows_left".
	(impl_Shell_createNewView): Raise an InternalError exception.
	(window_delete_event_cb): Renamed from view_delete_event_cb.
	(window_weak_notify): Renamed from view_weak_notify.
	(create_view): Removed.
	(create_window): New.  Creates a new EShellWindow.
	(e_shell_create_view): Removed.
	(e_shell_create_window): New.
	(e_shell_request_close_view): Removed.
	(e_shell_request_close_window): New.
	(e_shell_destroy_all_windows): Renamed from
	e_shell_destroy_all_views.
	(e_shell_component_maybe_crashed): Get an EShellWindow parameter,
	instead of an EShellView.
	(e_shell_go_offline): Likewise.
	(e_shell_go_online): Likewise.
	(e_shell_show_settings): Likewise.
	(get_icon_path_for_component_info): Removed.
	(setup_components): Do not do the user_creatable_items_handler
	stuff here.
	(e_shell_construct): Don't create the EUserCreatableItemsHandler
	here.
	(e_shell_get_user_creatable_items_handler): Crash when you get
	here.

	* e-shell-user-creatable-items-handler.c: Removed.
	* e-shell-user-creatable-items-handler.h: Removed.
	* e-shell-shared-folder-picker-dialog.c: Removed.
	* e-shell-shared-folder-picker-dialog.h: Removed.
	* e-shell-view.c, e-shell-view.h: Removed.
	* e-shell-view-menu.c, e-shell-view-menu.h: Removed.
	* e-shell-folder-commands.c, e-shell-folder-commands.h: Removed.
	* e-shell-importer.c, e-shell-importer.h: Removed.

	* main.c (new_window_created_callback): Renamed from
	new_view_created_callback.
	(window_map_callback): Renamed from view_map_callback.
	(idle_cb): Connect to "new_window_created" instead of
	"new_view_created".
	(no_windows_left_cb): Renamed from no_views_left_cb.
	(idle_cb): Connect to "no_windows_left" instead of
	"no_views_left".

	* e-shell-offline-handler.c: Changed the type of the
	parent_shell_view member of EShellOfflineHandlerPrivate to
	GtkWindow and renamed it to parent_window.
	(e_shell_offline_handler_put_components_offline): Just get a
	GtkWindow arg instead of an EShellView arg.

2003-07-24  Ettore Perazzoli  <ettore@ximian.com>

	* evolution-shell-client.c
	(evolution_shell_client_create_storage_set_view): Just crash when
	you get here.
	(evolution_shell_client_get_pixbuf_for_type): Likewise.
	(evolution_shell_client_set_line_status): Likewise.
	(evolution_shell_client_get_local_storage): Likewise.
	(evolution_shell_client_get_shortcuts_interface): Likewise.
	(evolution_shell_client_get_storage_registry_interface): Likewise.
	(evolution_shell_client_get_activity_interface): Likewise.
	(evolution_shell_client_user_select_folder): Likewise.
	(evolution_shell_client_new): Likewise.
	(evolution_shell_client_construct): Likewise.
	(query_shell_interface): Removed.
	(init): Do nothing.
	(class_init): Do nothing.
	(unref_pixbuf): Removed.
	(impl_dispose): Removed.
	(impl_finalize): Removed.
	(user_select_folder): Removed.
	(count_string_items): Removed.
	(create_folder_selection_listener_interface): Removed.
	(init_FolderSelectionListener_vtables): Removed.
	(impl_FolderSelectionListener_cancel): Removed.
	(impl_FolderSelectionListener_selected): Removed.
	(query_shell_interface): Removed.

	* e-shell.c (impl_Shell_getLocalStorage): Removed.
	(impl_Shell_createStorageSetView): Removed.
	(impl_Shell_getIconByType): Removed.
	(impl_Shell_getComponentByType): Removed.
	(impl_Shell_selectUserFolder): Removed.
	(e_shell_class_init): Do not install removed method impls.
	(folder_selection_dialog_cancelled_cb): Removed.
	(folder_selection_dialog_folder_selected_cb): Removed.

	* Evolution-Shell.idl (getLocalStorage): Removed
	(createStorageSetView): Removed.
	(selectUserFolder): Removed.
	(getIconByType): Removed.
	(getComponentByType): Removed.
	(FolderSelectionListener): Removed.

	* Evolution-Component.idl (requestQuit, interactive): New methods.

2003-07-24  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell.c: Removed activity_handler member from EShellPrivate.
	(setup_activity_interface): Removed.
	(e_shell_construct): Don't call.
	(create_view): Do not call e_activity_handler_attach_task_bar
	here.

	* e-activity-handler.c, e-activity-handler.h: Removed.

2003-07-24  Yuedong Du  <yuedong.du@sun.com>

	* e-shell-offline-handler.c: (dialog_response_cb): fix crash when
	user escape the dialog. see bug #46700.

2003-07-23  Ettore Perazzoli  <ettore@ximian.com>

	* e-folder.c (e_folder_new): Accept a NULL description.

	* main.c (idle_cb): Create a new EShellWindow and show it.

	* e-storage.c: New signal "async_open_folder".
	(impl_async_open_folder): Removed.
	(class_init): Declare new signal.

	* e-shell.c (setup_components): Don't actually activate any
	components.

	* e-storage-browser.c, e-storage-browser.h: New.

	* e-shell-window.c, e-shell-window.h: New.

	* e-shell-marshal.list: Add an entry for
	NONE:STRING,POINTER,POINTER.

	* Evolution.idl: Include Evolution-Component.idl.

	* Evolution-Component.idl: New interface for Evolution components.

2003-07-23  Dan Winship  <danw@ximian.com>

	* Makefile.am: Use EVO_MARSHAL_RULE

	* e-shell-importer.c (prepare_intelligent_page): Fix a warning

2003-07-22  Antonio Xu  <antonio.xu@sun.com>

	* e-shell-startup-wizard.c (e_shell_startup_wizard_create): connect
	to "delete_event" signal with startup_wizard_delete. [#46284]

2003-07-22  Antonio Xu <antonio.xu@sun.com>

	* e-shell-importer.c: (show_import_wizard): use
	g_signal_connect_after to connect "prepare" signal.
	(prepare_intelligent_page): Display some error log and disable
	forward button rather than jump to finish page.  [#46017]

2003-07-15  Antonio Xu  <antonio.xu@sun.com>
	
        * e-shell-startup-wizard.c (e_shell_startup_wizard_create): connect
        "back" signal to back_finish_func in finish page.
        (back_finish_func): handle "back" signal.
        (prepare_importer_page): Jump to finish page when running equal zero.
        [#46026]

2003-07-17  Dan Winship  <danw@ximian.com>

	* e-shell-user-creatable-items-handler.c (free_menu_items): free
	the folder_type

	* e-splash.c (e_splash_new): Unref the pixbuf.

	* evolution-shell-component.c (impl_finalize): Add some missing
	frees.
	(user_creatable_item_type_free): free the tooltip

2003-07-09  Ettore Perazzoli  <ettore@ximian.com>

	* e-shell-folder-commands.c (e_shell_command_rename_folder): Do
	not overwrite an existing folder.  Also, cleaned up the code a
	bit.  [#45982]

2003-06-25  Chris Toshok  <toshok@ximian.com>

	* e-config-upgrade.c: add general_map and a reference to it in
	gconf_remap_list.  Should fix 44477.

2003-06-19  Dan Winship  <danw@ximian.com>

	* e-folder-tree.c (e_folder_tree_add): Don't leak parent_path,
	even on error

2003-06-16  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* Makefile.am:
	Add missing skel/stubs to BUILD_SOURCES (bug #44717).

2003-06-05  Not Zed  <NotZed@Ximian.com>

	** For #42691.

	* Makefile.am (%.server.in): use implicit rule.
	(BUILT_SOURCES): added server_DATA.

2003-05-22  Not Zed  <NotZed@Ximian.com>

	* e-config-upgrade.c (CONF_MAJOR, CONF_MINOR, CONF_REVISION): Set
	to 1.4.0 for release.

2003-06-10  Larry Ewing  <lewing@ximian.com>

	* e-corba-storage-registry.c (listener_notify): don't leak nr.name.

