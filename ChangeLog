2000-01-25  Mathieu Lacage <mathieu@advogato.org>

	* .cvsignore s: cvs shutup. 

2000-01-25  Christopher James Lahey  <clahey@helixcode.com>

	* widgets/e-reflow.c, widgets/e-minicard.c: Handle shift-tab
	properly now.

	* widgets/e-minicard-label.c: Reindented some areas.

	* widgets/test-reflow.c: Use e-canvas.  Set the back pixmap to
	NULL for the canvas so that scrolling won't flash grey.

	* widgets/e-canvas.c, widgets/e-canvas.h: These subclass
	GnomeCanvas to work around a few bugs so that evolution will work
	well with old versions of gnome-libs.

	* widgets/Makefile.am: Added e-canvas.c and e-canvas.h.

	* addressbook/contact-editor/contact-editor.glade: Not much
	change.  Mostly internal reorganization by glade itself.

2000-01-25  Christopher James Lahey  <clahey@helixcode.com>

	* addressbook/printing/smallbook.ecps: Example contact printing
	style.  Not used yet.

	* addressbook/printing/e-contact-print.glade: A glade file for
	editing contact printing styles.  Not used yet.

	* addressbook/printing/test-print.c: Test file for printing.

	* addressbook/printing/e-contact-print.c,
	addressbook/printing/e-contact-print.h,
	addressbook/printing/e-contact-print-types.h,
	addressbook/printing/Makefile.am, addressbook/printing/.cvsignore:
	New files for contact printing support.

	* addressbook/Makefile.am (SUBDIRS): Add printing.

	* configure.in: Check for gnome-print.  Build the
	addressbook/printing Makefile.

2000-01-24  bertrand  <bertrand@helixcode.com>

	* camel/camel-data-wrapper.h: 
	* camel/camel-data-wrapper.c 
	(_set_input_stream): 
	(_get_input_stream): 
	(_set_output_stream): 
	(_get_output_stream): 
	The CamelDataWrapper can now be provided with input and
	output streams, so that nothing has to be kept in memory. 
	
	* camel/camel-stream.c (camel_stream_class_init): 
	added the "data_available" signal.
	

2000-01-24  Federico Mena Quintero  <federico@helixcode.com>

	* configure.in: Added the gnome-pilot and capplet checks; they
	will likely be reworked for the Evolution framework, but for now
	the calendar/ directory needs them.

	* configure.in: Added checks for gnome-vfs.

2000-01-24  bertrand  <bertrand@helixcode.com>

	* camel/camel-seekable-stream.c: 
	* camel/camel-seekable-stream.h: 
	new files. 
	
	* camel/camel-simple-data-wrapper-stream.h:  parent class is now
	CamelSeekableStream
	* camel/camel-stream-buffered-fs.h: idem
	* camel/camel-stream-buffered-fs.c: idem
	* camel/camel-stream-mem.h: idem
	* camel/camel-stream-mem.c: idem
	(_seek): change declaration
	* camel/camel-stream-fs.c: parent class is now
	CamelSeekableStream
	(_seek): change declaration

	* camel/camel-stream-fs.h: parent class is now
	CamelSeekableStream
	
	* camel/camel-stream-fs.[ch]: converted all 
	gint64 variables into guint32. 
	
	
	* camel/camel-stream-fs.c (_read): fix stupid bug.
	(_write): ditto. 

	* camel/camel-exception.c (camel_exception_new): don't
	forget to clean the exception when creating it. 

	* camel/camel-recipient.c (camel_recipient_table_add_list): 
	add recipient_list to the recipients, not recipients_list. 
	I don't know what that variable was doing here. 


2000-01-24  Matt Loper  <matt@helixcode.com>

	* camel/camel-formatter.c (write_header_info_to_stream): new
	function, broken out from 'camel_formatter_make_html'.
	(write_mimepart_to_stream): same.
	(find_text_body_part_in_multipart_related): new function.
	(camel_formatter_make_html): Now tries to deal with
	multipart/related, multipart/alternate, and text/(plain|html).


2000-01-23  bertrand  <bertrand@helixcode.com>

	* camel/camel-store.c (camel_store_get_session): 
	added a public get_session method.

	* camel/providers/mbox/camel-mbox-summary.c (camel_mbox_save_summary): 
	(camel_mbox_load_summary): load/save message sizes in the summary file

	* camel/providers/mbox/camel-mbox-summary.h: 
	added a size field to the message information 
	structure. 

	* camel/providers/mbox/camel-mbox-utils.c (parsed_information_to_mbox_summary): 
	copy message size to the mbox summary information too. 
	
	* camel/camel-stream-fs.c (_seek): updated to 
	work with bounded fs streams. 
	(_write): ditto.
	(_read): ditto.

	* camel/camel-stream-fs.h (struct ): 
	added the cur_pos, inf_bound and sup_bound
	members to allow for bounded fs stream. 

	* camel/camel-stream-fs.c (_set_bounds): new func.
	(_init_with_fd_and_bounds): idem.
	(_init_with_name_and_bounds): idem. 
	New functions to allow the usage of bounded fs streams.

	The bounded fs stream allow, for example, to make a stream
	from a message stored in an mbox file. 
	
	
2000-01-22  bertrand  <bertrand@helixcode.com>

	* camel/providers/mbox/camel-mbox-folder.c (_check_get_or_maybe_generate_summary_file): 
	use the real summary file path instead of a 
	stupid hardcoded one. Fixes yet another bug.

	* camel/providers/mbox/camel-mbox-utils.c (parsed_information_to_mbox_summary): 
	don't forget to copy the date too. Fix a very annoying bug.

	* camel/providers/mbox/camel-mbox-folder.c (_append_message): 
	implemented. A lot of fixes too. Works now. 
	(_get_uid_list): implemented.

2000-01-21  bertrand  <bertrand@helixcode.com>

	* tests/test10.c:
	test the mbox provider. 

	* camel/camel-folder.c (_set_name): 
	if camel_folder_get_mode returns an
	exception, return it instead of
	overriding it with a new one.
	(camel_folder_is_open): make the is_open
	method public.
	(_set_name): use the is_open instead of
	get_mode.
	(_set_name): set the fullname even in the case 
	where the folder has no parent.
	(_set_name): use %c, not %d to add the 
	separator char into the full path.

	* camel/camel-store.c: add exception handling everywhere in
	the store related functions arguments. 
	* camel/providers/mbox/camel-mbox-folder.c: idem
	* camel/providers/mbox/camel-mbox-folder.h: idem
	* camel/providers/mbox/camel-mbox-store.h: idem

	* camel/providers/mbox/Makefile.am (libcamelmbox_la_SOURCES): 
	added camel-mbox-provider.c to the mbox provider
	sources. 

	* camel/providers/mbox/camel-mbox-provider.c: 
	provider registration code.

	* camel/providers/mbox/camel-mbox-folder.c (_get_message_count): implemented
	(_append_message): implemented

	* camel/providers/mbox/camel-mbox-parser.c (initialize_buffer): 
	use \0 to mark the end of the buffer.
	(read_next_buffer_chunk): ditto.
	(read_header): test the presence of a \0 instead of
	reading the eof field
	(read_message_begining): idem.
	(camel_mbox_parse_file): idem.
	Remove the eof field from the parser
	structure. 
	(read_next_buffer_chunk): removed some nasty bugs
	again. 

	
2000-01-21  Federico Mena Quintero  <federico@helixcode.com>
	
	* libversit/vcc.y: Removed the VFS crap; my mistake, it should not
	go here.

	* configure.in: Added yacc requirements for libversit.

2000-01-21  Matt Loper  <matt@helixcode.com>

	* camel/camel-formatter.c (camel_formatter_make_html): added a
	CamelMimeMessage as a param to this function, and removed it as a
	member of the object.

2000-01-21  Federico Mena Quintero  <federico@helixcode.com>

	* configure.in (AC_OUTPUT): Added libversit/Makefile and
	calendar/Makefile.

	* Makefile.am (SUBDIRS): Added libversit and calendar.

2000-01-20  bertrand  <bertrand@helixcode.com>

	* camel/providers/mbox/camel-mbox-parser.c (camel_mbox_parse_file): 
	compute and return the file size. 


2000-01-20  Matt Loper  <matt@helixcode.com>

	* camel/camel-formatter.c, camel/camel-formatter.h: New
	files. You'll be able to use a CamelFormatter to get
	html-formatted versions of a CamelMimeMessage.
	
2000-01-20  Christopher James Lahey  <clahey@helixcode.com>

	* widgets/e-text-event-processor-types.h: Changed some line
	spacing.

	* widgets/test-reflow.c: Connected to the resize signal of the
	reflow.

	* widgets/e-minicard.c: Made width argument set function only
	update if width is different.

	* widgets/e-reflow.h, widgets/e-reflow.c: Added draggable column dividers.

	* addressbook/contact-editor/test-editor.c: Open two dialogs for
	more interesting testing.

	* addressbook/contact-editor/e-contact-editor.h,
	addressbook/contact-editor/e-contact-editor.c: Modified to use
	glade.  Added menus to change which phone/address/email entries to
	view.  Added images to the dialog.

	* addressbook/contact-editor/e-contact-editor-strings.h,
	addressbook/contact-editor/contact-editor.glade: Glade files for
	the contact editor dialog.

	* addressbook/contact-editor/Makefile.am: Added images and added
	glade stuff.

	* addressbook/contact-editor/arrow.png,
	addressbook/contact-editor/briefcase.png,
	addressbook/contact-editor/netfreebusy.png,
	addressbook/contact-editor/netmeeting.png: Image files for the
	contact editor dialog.

2000-01-19  bertrand  <bertrand@helixcode.com>

	* camel/providers/mbox/camel-mbox-folder.c (_get_message_count): 
	implemented.

	* camel/providers/mbox/camel-mbox-summary.c (camel_mbox_save_summary): 
	(camel_mbox_load_summary): save/load the next uid. 

	* camel/providers/mbox/camel-mbox-parser.c (camel_mbox_parse_file): 
	Compute the next available uid. 
	* camel/providers/mbox/camel-mbox-folder.c (_create): 
	(_check_get_or_maybe_generate_summary_file): 
	Set and use the next_uid field properly. 
	* camel/providers/mbox/camel-mbox-summary.h: added
	an extra field to store the next available uid. 

	* camel/providers/mbox/camel-mbox-folder.c 
	(_check_get_or_maybe_generate_summary_file): 
	routine called when the folder is opened. 
	Reads or creates the summary file. 
	(_create): initialize the internal summary 
	structure. 
	(_close): save the summary file on closing. 
	(_init_with_store): initialize mbox specific
	folder members. 

2000-01-18  bertrand  <bertrand@helixcode.com>

	* tests/test9.c:
	tests for summary and parsing process of mbox files. 

	* camel/providers/mbox/camel-mbox-parser.c (camel_mbox_parse_file): do
	not use case insensitive comp to detect message separators. Kill 
	some nasty bugs in netscape file parsing,

	* camel/providers/mbox/camel-mbox-utils.c (parsed_information_to_mbox_summary): 
	don't use g_array_append but write directly inside the
	array data instead. Better performance and bug fix. 

	* camel/providers/mbox/camel-mbox-summary.c (camel_mbox_load_summary): 
	fix the name and bugs. 

	* camel/camel-folder-summary.h: update the class
	method definition to match the public defs. 

	* camel/providers/mbox/camel-mbox-summary.c (camel_mbox_save_summary): 
	(mbox_load_summary): summary file read/write routines. 

	* camel/providers/mbox/camel-mbox-utils.c (parsed_information_to_mbox_summary): 
	routine to construct the summary after the mbox
	file has been parsed and the x-evolution fields
	inserted. 

2000-01-17  bertrand  <bertrand@helixcode.com>

	* camel/providers/mbox/camel-mbox-utils.c (camel_mbox_write_xev): 
	dont use the x_evolution field but rather the uid to 
	determine the presence of "X-Evolution" in the mail. 

	* camel/providers/mbox/camel-mbox-parser.c (camel_mbox_parse_file): 
	parse the status and uid values if the x-evolution
	has been found. 

	* camel/providers/mbox/camel-mbox-utils.c (camel_mbox_xev_parse_header_content): 
	return the parsed status field correctly. 

	* camel/providers/mbox/camel-mbox-utils.h: 
	fixed bad prototype.

	* camel/providers/mbox/camel-mbox-parser.c (camel_mbox_parse_file): 
	parse and store the "To:" header.

	* camel/providers/mbox/camel-mbox-parser.h: 
	added a "to" field 

	* camel/camel-folder-summary.c: 
	create the arrays here. 

	* camel/camel-folder-summary.h: the list of 
	summary information is no longer a GList but 
	rather a GArray.

2000-01-17  Chrsitopher James Lahey  <clahey@helixcode.com>

	* head.png, phone.png, email.png, web.png, snailmail.png: Images
	for e-contact-editor.c.

	* addressbook/contact-editor/text-editor.c: Test program
	for contact editor widget.

	* addressbook/contact-editor/e-contact-editor.c,
	addressbook/contact-editor/e-contact-editor.h: Contact editor
	widget files.

	* addressbook/contact-editor/.cvsignore,
	addressbook/contact-editor/Makefile.am: New directory for contact
	editor files.

	* addressbook/.cvsignore, addressbook/Makefile.am: New directory
	for addressbook files.

	* widgets/.cvsignore: Added reflow-test.

	* Makefile.am (SUBDIRS): Added addressbook subdirectory.

	* configure.in, widgets/Makefile.am: Removed widgets/toolbar from
	SUBDIRS since the lack of content was preventing it from
	compiling.

	* widgets/shortcut-bar/Makefile.am: Added gnomecanvaspixbuf to the
	list of libraries used.

	* widgets/e-text.c, widgets/e-text.h: Fixed a crashing bug.

2000-01-17  bertrand  <bertrand@helixcode.com>

	* tests/test9.c (main): test for the mbox utils.

2000-01-17  Federico Mena Quintero  <federico@helixcode.com>

	* configure.in: Add the gnomecanvaspixbuf argument to gnome-config
	invocations.

2000-01-17  bertrand  <bertrand@helixcode.com>

	* camel/providers/mbox/camel-mbox-utils.c (camel_mbox_write_xev): 
	(copy_file_chunk): 
	(camel_mbox_xev_write_header_content): 
	(string_to_flag): 
	(flag_to_string): 
	(string_to_uid): 
	(uid_to_string): 
	A bunch of new funcs to handle x-evolution 
	private header field. 
	(copy_file_chunk): fixed a nasty bug. 
	(camel_mbox_write_xev): create the copy file descriptor
	with the proper arguments. Exceptions implememnted.
	(camel_mbox_write_xev): changed the way bytes are counted. 
	No more uses the message size cause it did not take into
	account the message separators characters. 
	(camel_mbox_write_xev): hopefully fixed the last bugs. 
	works ok now. 
	

2000-01-15  bertrand  <bertrand@helixcode.com>

	* camel/providers/mbox/camel-mbox-parser.c 
	(camel_mbox_parse_file): 
	store the end of headers position. 
	
	* camel/providers/mbox/camel-mbox-parser.h: 
	added the end_of_header_position to locate the 
	begining of the mail body. 
	

	* camel/providers/mbox/camel-mbox-utils.c (uid_to_string): 
	(string_to_uid): 
	(flag_to_string): 
	(string_to_flag): 
	new functions to handle uids and
	flags in the X-Evolution header. 
	(camel_mbox_xev_parse_header_content): 
	new function to parse an X-Evolution 
	header. 
	(camel_mbox_xev_write_header_content): 
	new function to write the X-Evolution 
	header. 

2000-01-13  bertrand  <bertrand@helixcode.com>

	* camel/providers/mbox/camel-mbox-parser.c (read_next_buffer_chunk): 
	eof is true when no more chars are available, not 
	when we've read the entire file. 
	(initialize_buffer): ditto.
	(read_message_begining): documented.
	(read_header): ditto.
	(new_message_detected): ditto.
	(advance_n_chars): ditto.
	(goto_next_char): ditto.
	(read_next_buffer_chunk): ditto.
	(initialize_buffer): ditto.
	(parser_free): ditto.
	(new_parser): ditto.

2000-01-15  Miguel de Icaza  <miguel@gnu.org>

	* shell/e-shell.c: Construct the default folders 

	* shell/e-shell-view.c (e_shell_view_new): Setup the main GnomeApp
	application, load the shortcut, internal api. 

	* shell/e-folder.c (e_folder_get_type_name): Return description
	here;  Change of policy;  We now know about all of the possible
	types that can be displayed on Evolution. 

2000-01-15  Miguel de Icaza <miguel@gnu.org>

	* shell/e-folder.c: Renamed signal.

	* widgets/shortcut-bar/e-shortcut-bar.c (e_shortcut_bar_add_item):
	Use e_bar_set_item_data.

	Drop item_url;  Require image argument;  Require user data
	argument. 

2000-01-09  Miguel de Icaza  <miguel@gnu.org>

	* widgets/shortcut-bar/e-icon-bar.c (e_icon_bar_init): Turn on anti-aliasing.

2000-01-08  Miguel de Icaza  <miguel@gnu.org>

	* widgets/shortcut-bar/e-icon-bar.c (e_icon_bar_add_item): Use
	GdkPixbuf here. 
	(e_icon_bar_get_item_image): ditto and initialize image.

	* widgets/shortcut-bar/e-shortcut-bar.c (e_shortcut_bar_add_item):
	Use gdk-pixbuf.

2000-01-14  Christopher James Lahey  <clahey@helixcode.com>

	* widgets/shortcut-bar/e-shortcut-bar.c (e_shortcut_bar_add_item):
	Use e_bar_set_item_data.

	Drop item_url;  Require image argument;  Require user data
	argument. 

2000-01-09  Miguel de Icaza  <miguel@gnu.org>

	* widgets/shortcut-bar/e-icon-bar.c (e_icon_bar_init): Turn on anti-aliasing.

2000-01-08  Miguel de Icaza  <miguel@gnu.org>

	* widgets/shortcut-bar/e-icon-bar.c (e_icon_bar_add_item): Use
	GdkPixbuf here. 
	(e_icon_bar_get_item_image): ditto and initialize image.

	* widgets/shortcut-bar/e-shortcut-bar.c (e_shortcut_bar_add_item):
	Use gdk-pixbuf.

2000-01-12    <clahey@galapagos.helixcode.com>

	* widgets/e-text-event-processor-types.h,
	widgets/e-text-event-processor-emacs-like.c, widgets/e-text.c,
	widgets/e-text.h: Added selection and clipboard support.  Added up
	and down arrow keys.  Fixed choice of font colors for the
	selection to be based on the current style.

	* widgets/e-minicard.c: Caused a click to grab the focus.  Changed
	the fake information added.

	* widgets/e-minicard-label.c: Forward mouse events to the field
	EText item.

2000-01-13  Christopher James Lahey  <clahey@helixcode.com>

	* widgets/e-canvas-utils.c, widgets/e-canvas-utils.h:
	e_canvas_item_move_absolute is just a helper function not supplied
	by the gnome_canvas.[ch] I put it here so that multiple items can
	use it.

	* widgets/e-reflow.c, widgets/e-reflow.h: This item contains a
	number of other items and places them into multiple columns.  The
	items contained must support a number of arguments and signals to
	allow the reflow to interact with them.

	* widgets/test-reflow.c: This is a test program for e-reflow.

	* widgets/e-text.c, widgets/e-text.h: Added properly drawn
	selected text.  Added some preliminary code for X selection
	handling and cut & paste.

	* widgets/e-minicard.c, widgets/e-minicard.h: Added ARG_HAS_FOCUS
	handling.  Made label display random for more interesting tests of
	multiple cards.  Tweaked sizing information for better display.

	* widgets/e-minicard-label.c, widgets/e-minicard-label.h: Added
	ARG_HAS_FOCUS handling.

	* widgets/Makefile.am: Added the reflow test and reflow files.

2000-01-12  bertrand  <bertrand@helixcode.com>

	* camel/providers/mbox/camel-mbox-parser.h (camel_mbox_parse_file): 
	Added the prototype of camel_mbox_parse_file. 

	* camel/providers/mbox/camel-mbox-parser.c (camel_mbox_parse_file): 
	updated in-line documentation.

	* tests/Makefile.am (noinst_PROGRAMS): 
	remove non updated tests from the build 
	process. 

	* corrected a bunch of bugs 
	
	* camel/providers/mbox/camel-mbox-parser.c 
	(camel_mbox_parse_file): 
	parser the subject and date.
	

	* camel/providers/mbox/camel-mbox-parser.c 
	(camel_mbox_parse_file): added the ability to 
	follow the parsing progression. 
	
	* camel/providers/mbox/camel-mbox-parser.h: 
	parse the x-evolution field. 

	* camel/Makefile.am (libcamel_la_SOURCES): 
	disabled gmime-rfc2047 as it depends on libunicode
	and is not used for the moment. 

2000-01-12  Christopher James Lahey  <clahey@helixcode.com>

	* widgets/e-minicard.c, widgets/e-minicard.h: Added a resize
	signal for when the card changes height.  Made it so that when you
	press tab inside of a field, it goes to the next field.

	* widgets/e-minicard-label.c, widgets/e-minicard-label.h: Added a
	resize signal for when the label changes height.

	* widgets/e-text.c, widgets/e-text.h: Added a resize signal for
	multiple lines.  Added scrolling based on cursor position.

	* widgets/Makefile.am: Removed an extraneous build target.

2000-01-11  Christopher James Lahey  <clahey@helixcode.com>

	* widgets/e-text-event-processor-emacs-like.c: Blocked the tab key
	from getting inserted into the buffer since the renderer doesn't
	know what a tab is.

	* widgets/e-text.c, widgets/e-text.h: Fixed a memory leak.  Added
	a blinking cursor and scrolling for the text item.

2000-01-11  Christopher James Lahey  <clahey@helixcode.com>

	* widgets/test-minicard.c: Removed some code which got in the way
	of testing properly.

	* widgets/e-minicard-label.c (e_minicard_label_realize): Made the
	field text item editable.

	* widgets/Makefile.am: Added e-text-event-process*.[ch].

	* widgets/e-text.c, widgets/e-text.h: Changed these to support
	editing.

	* widgets/e-text-event-processor.c,
	widgets/e-text-event-processor.h,
	widgets/e-text-event-processor-types.h,
	widgets/e-text-event-processor-emacs-like.c,
	widgets/e-text-event-processor-emacs-like.h: These are a new pair
	of classes which handle all events from the text item and convert
	them into commands.


2000-01-10  Christopher James Lahey  <clahey@helixcode.com>

	* widgets/Makefile.am: Added minicard and text stuff.

	* widgets/e-minicard.c, widgets/e-minicard.h,
	widgets/e-minicard-label.c, widgets/e-minicard-label.h: Added
	canvas items for the minicard view in the contact manager.

	* widgets/test-minicard.c, widgets/test-minicard-label.c: Tests
	for the minicard items.

	* widgets/e-text.h, widgets/e-text.c: New canvas item.  Based on
	GnomeCanvasText.  Adds ellipsis capabilities.  Used in
	e-minicard*.[ch].

	* widgets/.cvsignore: Added minicard-test and minicard-label-test.

2000-01-06  Miguel de Icaza  <miguel@gnu.org>

	* configure.in: Add Bonobo detection, Bonobo flags for compilation
	for the components and the shell.

2000-01-06 Elliot Lee <sopwith@redhat.com>
	* composer/Makefile.am, widgets/e-table/Makefile.am: Work with
	builddir != srcdir

2000-01-05  Miguel de Icaza  <miguel@gnu.org>

	* shell/Makefile.am: New file.

	* configure.in (EXTRA_GNOME_CFLAGS_THREADS,
	EXTRA_GNOME_LIBS_THREADS): New variables that hold the thread
	version of the compile/link lines.

1999-11-20  Miguel de Icaza  <miguel@gnu.org>

	* configure.in (PACKAGE): Raise warning level.

2000-01-04  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/mbox/camel-mbox-folder.c (_list_subfolders): 
	in the io_error label does not return before the 
	list has been freed.

2000-01-03  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/mbox/camel-mbox-folder.c (_list_subfolders): 
	detects netscape ".sdb" folders as well as simple 
	non-suffixed folders (as the ones used in pine).
	

	* camel/string-utils.c (string_prefix): 
	finished implementation. 
	(string_prefix): added a boolean flag to indicate if the 
	suffix has been found. When the suffix does not match, 
	return NULL.

1999-12-26 bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-exception.c (camel_exception_setv): 
	new function. Allow printf-like description
	string constructions. 

	* camel/camel-exception.h: cosmetic changes.

        * camel/providers/mbox/camel-mbox-store.h:
        * camel/providers/mbox/camel-mbox-store.c:
        * camel/providers/mbox/camel-mbox-folder.h:
        * camel/providers/mbox/camel-mbox-folder.c:
        More work on the mbox provider.


1999-12-22  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/mbox/camel-mbox-store.h: 
	* camel/providers/mbox/camel-mbox-store.c: 
	* camel/providers/mbox/camel-mbox-folder.h: 
	* camel/providers/mbox/camel-mbox-folder.c: 
	part of the mbox provider.

1999-12-20  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (_set_name): 
	check that the folder is closed or raise an exception.
	(_set_name): unset the name fields as soon as possible, 
	even if an exception is raised.

	* configure.in:
	build mbox provider Makefile
	
	* camel/Makefile.am (SUBDIRS): 
	re-enable providers compilation

1999-12-19  Damon Chaplin  <damon@karuna.freeserve.co.uk>

	* configure.in (AC_OUTPUT): added widgets/meeting-time-sel/Makefile

1999-12-19  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder-utils.c: include camel-log.h
	to avoid unresolved symbols.

1999-12-18  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (camel_folder_get_summary): 
	documented.

	* camel/camel-folder-pt-proxy.c (_append_message): 
	updated to take the change on append into account.

	* camel/camel-folder.h: 
	updated class def concerning append.
	* camel/camel-folder.c 
	(camel_folder_append_message): documented. 
	(camel_folder_append_message): don't return the 
	message number. Use specific methods instead.
	(_append_message): idem.

	(_delete): use 	exception mechanism.
	(camel_folder_delete): idem.
	(_delete_messages): idem.
	(camel_folder_delete_messages): idem.
	(_get_parent_folder): idem.
	(camel_folder_get_parent_folder): idem.
	(_get_parent_store): idem.
	(_get_mode): idem.
	(camel_folder_get_parent_store): idem.
	(camel_folder_get_mode): idem.
	(_list_subfolders): idem.
	(camel_folder_list_subfolders): idem.
	(_expunge): idem.
	(camel_folder_expunge): idem.
	(_has_message_number_capability): idem.
	(camel_folder_has_message_number_capability): idem.
	(_get_message_by_number): idem.
	(camel_folder_get_message_by_number): idem.
	(camel_folder_get_message_count): idem.
	(_list_permanent_flags): idem.
	(camel_folder_list_permanent_flags): idem.
	(_copy_message_to): idem.
	(camel_folder_copy_message_to): idem.
	(camel_folder_has_summary_capability): idem.
	(camel_folder_get_summary): idem.
	(camel_folder_has_uid_capability): idem.
	(camel_folder_get_message_uid): idem.
	(_get_message_uid_by_number): idem.
	(camel_folder_get_message_uid_by_number): idem.
	(camel_folder_get_message_by_uid): idem.
	(camel_folder_get_uid_list): idem.

1999-12-17  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (_set_name): 
	use exception mechanism.
	(camel_folder_set_name): idem.
	(camel_folder_set_full_name): idem.
	(_get_name): idem.
	(camel_folder_get_name): idem.
	(_get_full_name): idem.
	(camel_folder_get_full_name): idem.
	(_can_hold_folders): idem.
	(_can_hold_messages): idem.
	(_exists): idem.
	(camel_folder_exists): idem.
	(_is_open): idem.
	(_get_subfolder): idem.
	(camel_folder_get_subfolder): idem.

	* camel/camel-exception.c (camel_exception_clear): 
	New function. Clear an exception.
	(camel_exception_get_id): 
	New function. 
	(camel_exception_get_description): 
	New function. 

	* camel/camel-folder.c (_set_name): 
	Use the exception system. When the folder
	has no parent, don't set its full name 
	field.

	
1999-12-16  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (camel_folder_expunge): 
	(_expunge): 
	* camel/camel-folder-pt-proxy.c (_expunge): 
	changed the return value. Now returns the list 
	of expunged messages

	* camel/camel-folder.c (_init_with_store): 
	cleaned up. Use the exception system now.
	(_open): ditto.
	(camel_folder_open): ditto.
	(camel_folder_open_async): ditto.
	(_close):  ditto.
	(camel_folder_close):  ditto.
	(camel_folder_close_async): ditto.

	* camel/camel-exception.c (camel_exception_set): 
	When no exception is given, do nothing, just
	return. 
	(camel_exception_set): documented.
	(camel_exception_new): idem.
	(camel_exception_free): idem.
	(camel_exception_xfer): idem.
	

	* camel/camel-folder.c:
	* camel/camel-folder.h: more clean-ups. 
	Removed message list related code. 
	This was braindead design. 
	

	* camel/camel-folder-utils.c (camel_aml_expunge_messages): 
	implemented. The routines in this file will be
	called by providers to handle the list of
	message already standing in memory. 

1999-12-15  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder-utils.c: 
	* camel/camel-folder-utils.h: 
	New files, misc utilities for the 
	folder providers. Includes active message
	list utilities. 

	
	* camel/camel-folder.c (_has_message_number_capability): 
	(camel_folder_has_message_number_capability): 
	Added this to know if a folder provides 
	number-based message access.

	* camel/camel-folder.c (_get_message_count): 
	added warning when called directly.
	(_append_message): ditto
	(_open_async):  ditto
	(_close_async):  ditto
	(_delete_messages): ditto 
	(_expunge):  ditto
	(_get_message_by_number):  ditto
	(_get_message_uid):  ditto
	(_get_message_uid_by_number):  ditto
	(_get_message_by_uid):  ditto
	(_get_uid_list):  ditto

	
	* camel/camel-folder-pt-proxy.c (_open_async): 
	(_open): 
	(_close_async): 
	(_close): 
	(camel_folder_pt_proxy_class_init): 
	update 
	(_get_message_by_number): 
	Update to reflect changes in CamelFolder

	* camel/camel-folder.h: 
	* camel/camel-folder.c (_get_subfolder): 
	(camel_folder_get_subfolder): 
	The CamelFolder::get_folder is renamed to 
	get_subfolder as it is more intuitive. 

	* camel/camel-folder.c (_get_message_by_number): 
	(camel_folder_get_message_by_number): 
	* camel/camel-folder.h 
	(camel_folder_get_message_by_number): 
	The get_message method is now named
	get_message_by_number for consistency
	with the _by_uid methods.

	* camel/camel-folder.[ch]: 
	 clean-ups. 

1999-12-13  Nat Friedman  <nat@helixcode.com>

	* ebook/e-book.h: New file.
	* ebook/e-book.c: New file.
	* ebook/e-card.h: New file.
	* ebook/e-card-fields.h: New file.
	* ebook/e-commerce.h: New file. :-)

1999-12-08  Ettore Perazzoli  <ettore@gnu.org>

	* tests/test1.c (main): Removed the strdup()s, which are not
	deeded anymore.

	* camel/camel-mime-message.c (_set_subject): `subject' made const.
	(camel_mime_message_set_subject): Likewise.
	(_set_from): `from' made const.
	(camel_mime_message_set_from): Likewise.
	(_set_reply_to): Made `reply_to' const.
	(camel_mime_message_set_reply_to): Likewise.
	(_set_set_received_date): Made `received_date' const.
	(camel_mime_message_set_reply_to): Likewise.
	(_set_field): `value' made const.  Also, strdup the string before
	assigning.

	* camel/camel-mime-message.h: Virtual methods changed to use const
	strings when setting header values.

1999-11-17  Ettore Perazzoli  <ettore@gnu.org>

	* composer/Makefile.am (EXTRA_DIST): Added `$(glade_DATA)'.

	* camel/Makefile.am (EXTRA_DIST): Added
	`$(libcamel_extra_sources)'.
	(libcamelinclude_HEADERS): Added `gmime-base64.h'.

1999-11-17  Ettore Perazzoli  <ettore@gnu.org>

	* camel/camel-mime-message.c (_write_to_stream): Removed extra ':'
	in the `Mime-Version' header.

	* tests/ui-tests/msg-composer-test.c: Removed.

	* Makefile.am (SUBDIRS): Added `composer'.

	* configure.in: Create `composer/Makefile'.

	* camel/camel-simple-data-wrapper-stream.c
	(camel_simple_data_wrapper_stream_construct): Updated accordingly.
	(camel_simple_data_wrapper_stream_new): Updated accordingly.
	* camel/camel-stream-data-wrapper.c
	(camel_stream_data_wrapper_construct): Updated accordingly.

	* camel/camel-data-wrapper.h: Replaced `IS_CAMEL...()' type check
	macro name with `CAMEL_IS...()'.
	* camel/camel-folder-pt-proxy.h: Likewise.
	* camel/camel-folder-summary.h: Likewise. 
	* camel/camel-folder.h: Likewise. 
	* camel/camel-medium.h: Likewise. 
	* camel/camel-mime-body-part.h: Likewise.
	* camel/camel-mime-message.h: Likewise. 
	* camel/camel-mime-part.h: Likewise. 
	* camel/camel-multipart.h: Likewise. 
	* camel/camel-service.h: Likewise. 
	* camel/camel-session.h: Likewise. 
	* camel/camel-simple-data-wrapper-stream.h: Likewise. 
	* camel/camel-simple-data-wrapper.h: Likewise.
	* camel/camel-store.h: Likewise.
	* camel/camel-stream-buffered-fs.h: Likewise.
	* camel/camel-stream-data-wrapper.h: Likewise. 
	* camel/camel-stream-fs.h: Likewise. 
	* camel/camel-stream-mem.h: Likewise. 
	* camel/camel-stream.h: Likewise. 

	* tests/test1.c (main): Updated to match the `RECIPIENT_TYPE'
	changes.

	* camel/camel-mime-message.h: Changed `RECIPIENT_TYPE_TO',
	`RECIPIENT_TYPE_CC' and `RECIPIENT_TYPE_BCC' into
	`CAMEL_RECIPIENT_TYPE_TO', `CAMEL_RECIPIENT_TYPE_CC' and
	`CAMEL_RECIPIENT_TYPE_BCC', respectively.

1999-11-17  Ettore Perazzoli  <ettore@gnu.org>

	* camel/camel-mime-message.c (_write_to_stream): Write
	"Mime-Version: 1.0" to the stream.

	* tests/test1.c: If executed with a file name parameter, attach a
	file with with that name to the email without loading it into
	core, thus demonstrating usage of my latest changes.

	* camel/camel-mime-part.c (_set_encoding): Updated to use
	`CamelMimePartEncodingType'.
	(camel_mime_part_set_encoding): Likewise.
	(_get_encoding): Likewise.
	(camel_mime_part_get_encoding): Likewise.
	(_write_content_to_stream): Honour the `encoding' member.
	(_construct_from_stream): Made static.
	(camel_mime_part_encoding_to_string): New function.
	(_write_to_stream): Write the encoding string using it.
	(camel_mime_part_init): Set encoding to
	`CAMEL_MIME_PART_ENCODING_DEFAULT'.
	(_finalize): Don't free `encoding' anymore.
	(camel_mime_part_encoding_from_string): New function.
	(_parse_header_pair): Use it.

	* camel/camel-mime-part.h: New enum `CamelMimePartEncodingType'.
	Member `encoding' of `struct _CamelMimePart' changed from `gchar
	*' to `CamelMimePartEncodingType'.  All the encoding-related
	methods changed to use this type instead of `gchar *'.

	* camel/gmime-base64.c (gmime_encode_base64): Got it to work.

	* camel/Makefile.am (libcamel_la_SOURCES): Compile
	`gmime-base64.c'.

	* camel/gmime-base64.h: New, previously missing, header.

	* camel/camel-stream-data-wrapper.c: New file implementing the
	`CamelStreamDataWrapper' class.
	* camel/camel-stream-data-wrapper.h: Corresponding header.

	* camel/camel-simple-data-wrapper.c: Implemented the `get_stream'
	virtual method.
	(_get_stream): New function implementing the method.
	(camel_simple_data_wrapper_class_init): Install it in the class
	struct.
	(camel_simple_data_wrapper_init): New function initializing the
	`stream' member to NULL,
	(camel_simple_data_wrapper_class_init): Set it as the
	GtkObjectInitFunc.

	* camel/camel-simple-data-wrapper.h: New member `stream' in
	`struct _CamelSimpleDataWrapper'.

	* camel/camel-simple-data-wrapper-stream.c: New file implementing
	the `CamelSimpleDataWrapperStream' class.
	* camel/camel-simple-data-wrapper-stream.h: Corresponding header.

	* camel/camel-data-wrapper.c (camel_data_wrapper_get_stream): New
	function.
	(_get_stream): New private function, just returning NULL.
	(camel_data_wrapper_class_init): Install it as the default
	`get_stream' virtual method.

	* camel/camel-data-wrapper.h: New virtual method `get_stream' in
	`CamelDataWrapperClass'.
	(camel_data_wrapper_get_stream): New function prototype.

1999-11-05  Ettore Perazzoli  <ettore@gnu.org>

	* tests/ui-tests/msg-composer-test.c: New file for testing the
	`EMsgComposer' widget.
	* tests/ui-tests/Makefile.am (noinst_PROGRAMS): Compile it.  Do
	not compile `store_listing' for now because it's currently broken.
	(INCLUDES): Added the `widgets' source directory to the include
	path list.
	(LDADD): Removed the MH dependency; link with
	`libevolutionwidgets.la' from the `widgets' directory.

	* configure.in: Create `widgets/Makefile'.

	* camel/gmime-rfc2047.c (rfc2047_clean): Removed C++-like comment.
	* camel/camel-folder.c (camel_folder_get_message_uid_by_number):
	Likewise.
	* camel/gmime-content-field.c (gmime_content_field_get_parameter):
	Likewise.
	* camel/camel.c (camel_init): Likewise.
	* camel/camel-provider.c (camel_provider_register): Likewise.
	* camel/camel-multipart.c (_construct_from_stream): Likewise.
	* camel/camel-mime-part.c (_write_content_to_stream): Likewise.
	* camel/camel-medium.c (camel_medium_class_init): Likewise.

	* camel/camel-data-wrapper.h (camel_data_wrapper_get_type): Make
	prototype non-static.

	* camel/Makefile.am (libcamelinclude_HEADERS): Move
	`camel-exception-list.def' from `EXTRA_DIST' to
	`libcamelinclude_HEADERS'.

	* camel/camel.h: Do not #include <config.h>.
	* camel/data-wrapper-repository.h: Likewise.

1999-11-05  Ettore Perazzoli  <ettore@gnu.org>

	* tests/Makefile.am (INCLUDES): Add `-I$(top_srcdir)'.

1999-10-13  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (camel_folder_close): the 
	folder->close method is now asynchronous.

	* camel/camel-folder-pt-proxy.c (_folder_open_cb): 
	(_open): 
	(_folder_open_cb): 
	(_open): 
	open/close method implemented in the thread proxy
	folder. More to come.

	* camel/camel-exception.c (camel_exception_xfer): 
	new utility func.

	* camel/camel-marshal-utils.c: some new marshallers

	* camel/camel-folder-pt-proxy.c: Some explanations
	on the thread proxy system.

1999-10-11  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-marshal-utils.c: 
	camel/camel-marshal-utils.h:
	Handles operation marshalling. 
	
	* camel/camel-thread-proxy.c: 
	camel/camel-thread-proxy.h: 
	new files. Generic proxy system.
	  
	* camel/camel-folder-pt-proxy.c 
	moved all proxy related code in dedicated files.
	
	(camel_folder_pt_proxy_init): 
	removed proxy initialisation code
	(_finalize): 
	removed proxy finalization code


	* camel/camel-exception.c 
	(camel_exception_new): 
	(camel_exception_set): 
	(camel_exception_free): 
	New funcs.

1999-09-21  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder-pt-proxy.c (_async_close): 
	implemented.

	* configure.in:
	Check pthreads.

	* camel/Makefile.am: 
	camel-folder-pt-proxy.c is only compiled
	when pthreads are available.
	
	* camel/camel-folder-pt-proxy.c:
	Signal proxying implemenatation. 
	(_signal_marshaller_server_side): 
	(_signal_marshaller_client_side): 
	(_init_signals_proxy): 
	Code not is tested and has to be best 
	explained as it uses threads conditions and
	gtk signal system.
	(_thread_notification_catch): notify pending signals
	as well as thread availability.

1999-09-20  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder-pt-proxy.c (_op_exec_or_plan_for_exec): 
	completed

	Binch of new funcs:
	(_maybe_run_next_op): 
	Called by the watch notification when 
	a threaded op is completed
	(_thread_notification_catch): 
	notification watch call back
	(_init_notify_system): 
	set up the notification channel
	(notify_availability): 
	called by threads before completion.

1999-09-18  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder-pt-proxy.c (_op_exec_or_plan_for_exec): 
	new func. Try to exec an operation in a thread
	or queue it if a thread is already busy.

	* camel/camel-op-queue.c (camel_op_queue_set_service_availability): 
	(camel_op_queue_get_service_availability): 
	new funcs. 

	* camel/camel-op-queue.c (camel_op_new): 
	(camel_op_free): 
	new funcs. Uses glib mem chunks.
	

1999-09-17  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder-pt-proxy.c (_init_with_store): 
	added notify io_channel.

	* camel/camel-op-queue.h: 
	* camel/camel-op-queue.c: 
	New object. Operation queue. Meant to be used in 
	non-blocking proxy objects.
	(camel_op_queue_run_next_op): new func. 
	run the next operation.

1999-09-14  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/Makefile.am (libcamel_la_SOURCES): 
	added camel-folder-pt-proxy.[ch] to the build
	process.

	* camel/camel-folder-pt-proxy.c (_init_with_store): 
	started implementation of the pthread-based 
	folder proxy.
	

1999-09-08  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/MH/mh-summary.c 
	(mh_load_summary): 
	(mh_save_summary): 
	(mh_create_summary): 
	implemented summary (files) for MH folders.
	
	* camel/providers/MH/camel-mh-folder.c 
	(_get_message_by_uid): implemented.
	(camel_mh_folder_class_init): 
	(_get_message_uid): implemented

	* camel/camel-folder.c (camel_folder_has_uid_capability): 
	(camel_folder_get_message_uid): 
	(camel_folder_get_message_uid_by_number): 
	(camel_folder_get_message_by_uid): 
	(camel_folder_get_uid_list): 
	Documented UID methods.
	(camel_folder_get_message_uid_by_number): 
	const'ified uid.
	(camel_folder_get_message_by_uid): idem
	removed stupid camel_folder_get_message_uid_by_number
	method.
	
	* tests/ui-tests/store_listing.c (close_all): 
	close all open folders and stores. (necessary
	for UID list saving ).

	* camel/providers/MH/mh-uid.c (mh_generate_uid_list): 
	fix: store UID list in CamelMHFolder object.

	* camel/providers/MH/camel-mh-folder.c (_open): 
	read or create UID list.
	(_close): save UID list.

1999-09-07  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/md5-utils.c (md5_get_digest_from_file): 
	correct parameter decl (const)

	* camel/md5-utils.h: typo.

	* camel/providers/MH/mh-uid.c 
	More work on UID stuff for MH.
	(mh_save_uid_list): 
	(mh_load_uid_list): 
	(mh_generate_uid_list): 
	new funcs. Manage on-disk uid list.
	
	* camel/providers/MH/mh-utils.c (mh_is_a_message_file): 
	Util routines live here now.

	* camel/md5-utils.c 
	Documented all funcs.
	
	(md5_get_digest_from_stream): 
	correct typo.
	(md5_get_digest_from_file): 
	same typo corrected.
	

	* camel/md5-utils.h : 
	raw routines are declared public now.
	Md5 use has to be versatile.

	* camel/providers/MH/mh-uid.c (mh_uid_get_for_file): 
	new func. Returns an UID for an MH message.
		
1999-09-06  bertrand  <Bertrand.Guiheneuf@aful.org>


	* camel/md5-utils.h:
	* camel/md5-utils.c:
	changed names to follow camel style.
	(md5_get_digest_from_stream): 
	new methods.
	(md5_get_digest_from_file): 
	new function : get file md5 signature. 
	To be used in providers code.

	* camel/md5-utils.c: imported md5 coding 
	routine from rpm. Compiles.
	

1999-09-05  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (camel_folder_has_uid_capability): 
	(camel_folder_get_message_uid): 
	(camel_folder_get_message_uid_by_number): 
	(camel_folder_get_message_by_uid): 
	(camel_folder_get_uid_list): 
	Basic UID framework.
	
	* devel-docs/misc/ref_and_id_proposition.txt:
	New revision. Some fixes.

	* camel/camel-folder.h (struct _CamelFolder): added 
	uid_capability field.
	

	* camel/camel-folder.c (camel_folder_close): publicized
	the close method.

	* tests/ui-tests/store_listing.c (show_folder_messages): 
	use folder summary instead of opening all messages.
	(show_folder_messages): re-enabled old CPU/Mem consumming
	method. Useful for pop3 for instance.

	* camel/providers/MH/camel-mh-folder.c (_create_summary): 
	basic and highly non-efficient summary implementation.
	Should be seen as a proof of concept only.
	subfolder summary still has to be implemented.
	
	* camel/providers/maildir/camel-maildir-folder.c (_init_with_store): 
	hasn't summary for the moment. 
	* camel/providers/maildir/camel-maildir-folder.c
	cosmetic changes.
	

1999-09-04  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/MH/camel-mh-folder.c (_create_summary):
	started summary implementation.
	(_open): correct use of open.

	* camel/camel-folder.c (camel_folder_get_summary): 
	get folder associated summary object.

	* camel/Makefile.am:
	added summary files build

	* camel/camel-folder-summary.[ch]: 
	basic summary framework

1999-09-03  bertrand  <Bertrand.Guiheneuf@aful.org>

	* devel-docs/camel/Makefile.am:
	sgml doc has camel-recipient now.

	* camel/camel-recipient.c (camel_recipient_foreach_recipient_type): 
	added in-line documentation.

1999-09-02  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/maildir: Added (experimental) maildir 
	provider written by Jukka Zitting <hukka@greywolves.org>
	
	* camel/providers/Makefile.am (SUBDIRS): build maildir
	provider.

	* camel/camel-provider.c (camel_provider_get_for_protocol):
	bug fix. patch from  Jukka Zitting <hukka@greywolves.org>

	* camel/camel-mime-message.c (_write_one_recipient_to_stream): 
	changed decl to fit CRLFunc. 
	(_write_recipients_to_stream): 
	calls camel_recipient_foreach_recipient_type now.

	* camel/camel-recipient.c (camel_recipient_foreach_recipient_type): 
	new convinience function. Iterate over all recipient types.

	* camel/gmime-utils.c (gmime_write_header_table_to_stream): 
	s/write_header_table_to_stream/gmime_write_header_table_to_stream/
	(gmime_write_header_with_glist_to_stream): 
	s/write_header_with_glist_to_stream/gmime_write_header_with_glist_to_stream/

1999-09-01  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-message.c (_finalize): 
	(_add_recipient): 
	(_remove_recipient): 
	(_get_recipients): now use CamelRecipientTable
	
	* camel/gmime-content-field.c: 
	(gmime_content_field_unref): test if object 
	to free is non void.

	* camel/camel-folder.c (_finalize): 
	(_set_name): 
	* camel/camel-mime-part.c (_finalize): 
	(_set_description): 
	(_set_disposition): 
	* camel/camel-service.c (_finalize): 
	* camel/camel-stream-fs.c (_finalize): 
	* camel/gmime-content-field.c: 
	(gmime_content_field_construct_from_string): 

	* camel/url-util.c (g_url_free): 

	When using g_free (obj) don't test if obj != NULL
	g_free () already do that. Thanks to elerium for
	the feedback.

1999-08-30  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-recipient.c (camel_recipient_get): 
	(camel_recipient_remove): 
	(camel_recipient_add): 
	new func. More work on new independant recipient code. 

1999-08-29  bertrand  <Bertrand.Guiheneuf@aful.org>

	* MAINTAINERS: updated my e-mail address. 

1999-08-28  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.c (camel_mime_part_set_text): 
	text parameter declared const

	* camel/camel-mime-part-utils.c (camel_mime_part_store_stream_in_buffer): 
	actually test correctly nb_bytes_read_chunk is >0

	* camel/gstring-util.c: 
	* camel/gmime-content-field.c: 
	* camel/providers/MH/camel-mh-folder.c:
	* camel/camel-stream-fs.c:
	include string.h

	* camel/camel-stream-mem.c (_write): return 
	the numver of written bytes.

	* camel/camel-stream-buffered-fs.c (_eos): 
	return sthg

	* camel/camel-stream.c (default_camel_seek): 
	return something.

1999-08-26  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.c (_get_content_object): 
	contruct the content from the buffer before calling
	CamelMedium implementation.
	(_construct_from_stream): Do not construct the content 
	by default, just store the content bytes in 
	a temporary buffer. Content will be constructed only
	at caller request (when calling CamelMedium::get_content_object)
	Providers with better access to the messages (mbox/MH ...)
	will have to provider lighter implementation, that is
	shall not read content at all unless the caller asks
	for it (again with get_content).

	* camel/camel-mime-part-utils.c: new file, groups
	mime-part related utils. Meant to be used by providers
	subclassing MimeMessage.
	(camel_mime_part_construct_headers_from_stream): 
	(camel_mime_part_construct_content_from_stream): 
	no more useless temporary hash table. 

	* camel/camel-mime-part.c (_construct_from_stream): calls
	mime-part-utils functions now.

	* camel/gmime-utils.c (_store_header_pair_from_string): 
	do not use hash table to store header, use an array instead.

1999-08-25  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.c: now descend from CamelMedium.

	* tests/test1.c (main): all headers must be strdup'ed
	(main): unref created objects

	* camel/camel-medium.c (_set_content_object): 
	(_get_content_object): these methods are 
	in CamelMedium now.

1999-08-24  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-medium.c (camel_medium_class_init): 
	new class. Will handle all sort of information media 
	(Mime mail messages, Lotus Notes  mail messages, 
	postit notes, faxes, who knows .... :)
	CamelMimePart will inherit from it.

	* camel/camel-mime-part.c (_set_disposition): 
	(_set_description):
	description and disposition parameters are now const.
	 

	* camel/gmime-content-field.c (gmime_content_field_free): added
	assertion code.

	* camel/providers/MH/camel-mh-folder.c (_get_message): 
	uses buffered stream.

	* camel/camel-stream-buffered-fs.c:
	new stream to accelerate file ops.

1999-08-20  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-stream-fs.c (camel_stream_fs_new_with_name): 
	name parameter is const. This fixes a bug in destroy ()

1999-08-18  Robert Brady  <rwb197@ecs.soton.ac.uk>

	* camel/gmime-rfc2047.c: more work on encoder.

1999-08-17  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-stream.c (camel_stream_read): 
	return the number of bytes read. 
	How can this have ever worked ?
	(camel_stream_flush): don't return anything.

	* camel/gmime-utils.c (get_header_table_from_stream): 
	mem leak fixed.

1999-08-16  bertrand  <Bertrand.Guiheneuf@aful.org>

	* tests/ui-tests/store_listing.c:
	Now has a popup menu on mailbox tree to allow
	easier tests. Implemented the copy stuff.
	Works well for the MH provider :)))

	* camel/providers/MH/camel-mh-folder.c (_copy_message_to): 
	Test MH provider fast copy implemented.
	
	
1999-08-15  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (camel_folder_expunge): 
	moved the active list readjustment code here.
	Much saner, providers won't have to worry about
	that.
	(_copy_message_to): new method.

	* camel/providers/MH/camel-mh-folder.c (_expunge): 
	no more active list readjustment stuff.

	* camel/camel-folder.h: the expunge virtual no more
	returns a list of expunged messages. Now providers
	only have to set the expunge flag on the expunged
	messages.

	* camel/camel-folder.c (camel_folder_get_message): 
	moved the caching code here. Finally, I don't want
	providers to crash the libs with a bad message cache
	implementation. 
	(_close): do not call the CamelFolder virtual expunge 
	method directly, use camel_folder_expunge() instead.
	(camel_folder_expunge): added the want_list param. 
	The client can decide if it wants the expunged message
	list or not. If yes, it'll have to unref the messages 
	itself.

1999-08-14  bertrand  <Bertrand.Guiheneuf@aful.org>

	* tests/ui-tests/store_listing.c (delete_selected_messages): 
	(expunge_selected_folders): 
	Implemented deletion/expunge mechanism. 

	* camel/camel-folder.c (_get_message): 
	Added some debug info.

	* camel/providers/MH/camel-mh-folder.c (_expunge): 
	implemented and tested.

	* camel/camel-mime-message.c (_set_flag): 
	changed the old braindead implementation.
	boolean are inserted in the flag hash 
	table casted as gpointers.
	

	* camel/camel-mime-message.c: indentation fix
	

1999-08-13  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (_get_message): default implementation
	to be called first by providers methods. It looks in the
	folder message list (in memory) to see if the message has
	not already been retrieved, and in this case, returns 
	the same CamelMimeMessage object

	* camel/providers/MH/camel-mh-folder.c (_get_message): set
	message->message_number correctly.

	* camel/camel-folder.h (struct _CamelFolder): 
	New field (message_list) which will hold a 
	reference on each message obtained by the folder,
	which is necessary in order for the caching procedure
	to work (Getting the same message from a folder twice
	will return the same CamelMimeMessage object).
	
	* camel/camel-folder.c (camel_folder_get_message): 
	When the store retreives a message put it in its
	message list.
	(_finalize): free message list.

	* ChangeLog: fix typo (parmanent)

	* camel/camel-folder.c (_get_permanent_flag_list): 
	(camel_folder_get_permanent_flag_list): 
	new method, returns the list of permanent
	flags supported by the folder.

	* camel/camel-mime-message.c (_get_flag_list): 
	(camel_mime_message_get_flag_list): new method,
	return the list of flag name used by this message.

	* camel/hash-table-utils.c (g_strcase_equal): 
	(g_strcase_hash): those two func go here now.

	* camel/hash_table_utils.c (hash_table_generic_free): 
	free a (gpointer, gpointer) hash table pair.

	* camel/camel-mime-message.c (camel_mime_message_init): use
	case insensitive hash table functions. 
	(_set_flag): 
	(camel_mime_message_set_flag): 
	(_get_flag): 
	(camel_mime_message_get_flag): 
	Use const for flag name, they are now
	duplicated.

1999-08-12  bertrand  <Bertrand.Guiheneuf@aful.org>

	* tests/ui-tests/store_listing.c (show_folder_messages): 
	remove stupid debug code.
	(add_mail_store): use camel_session_get_store instead
	of creating MH store directly.
	(main): load MH provider.

	* camel/camel-provider.c (camel_provider_register_as_module): 
	register new provider.
	(camel_provider_get_for_protocol): 
	Now, implementation is correct.

	* camel/camel-store.c (_finalize): 
	* camel/camel-store.h (struct _CamelStore): 
	further disabled url_name field use. 
	URL will be generated dynamically.

	* camel/camel-session.c (camel_session_get_store_for_protocol): 
	compilation and runtime fixes.

	* camel/providers/MH/camel-mh-store.c (_init): 
	synced with CamelStore.

	* camel/camel-store.c (_init): 
	in CamelStore::init, url_name is now const.
	disabled url_name copy.

	* camel/camel-session.c (camel_session_get_store): 
	new function: returns a store for an URL. 
	(camel_session_get_store_for_protocol): 
	new functionc: returns a store for a given 
	store protocol (as IMAP/POP/MH ...)
	* camel/string-utils.c (g_strcase_equal): 
	(g_strcase_hash): case insensitive hash table
	funcs.

	* camel/camel-session.c (camel_session_init): hash table
	keys are case insensitive.

	* camel/camel-provider.c (camel_provider_get_for_protocol): 
	new function, returns the last registered 
	provider for a protocol.

	* camel/providers/MH/camel-mh-provider.c: 
	new file. MH provider registration stuff.

	* camel/camel-provider.c (camel_provider_register_as_module): 
	load a provider from a shared object (plugin).
	(camel_provider_register): register a provider 
	"by hand". Used for statically defined providers.

	* tests/test7.c: new test.
	tests providers loading framework.

1999-08-11  

	* camel/camel-service.c (_finalize): 
	* camel/camel-stream-fs.c (_finalize): 
	(_destroy): close file descriptor.
	* camel/camel-stream-mem.c (_finalize): 
	* camel/camel-store.c (_finalize): 
	* camel/camel-folder.c (_finalize): 
	* camel/camel-multipart.c (_finalize): 
	* camel/camel-simple-data-wrapper.c (_finalize): 
	* camel/camel-mime-part.c (_finalize): 
	implemented destructors.
	

	* camel/gmime-content-field.c (gmime_content_field_ref): 
	(gmime_content_field_unref): 
	New reference mechanism for GMimeContentField objects.

	* camel/camel-data-wrapper.c (_finalize): 
	Started implementing destructors.

	* camel/camel-mime-part.c (_construct_from_stream): 
	* camel/gmime-content-field.c (gmime_content_field_write_to_stream): 
	* camel/camel-multipart.c (_construct_from_stream): 
	removed forgotten anarchic traces.

1999-08-10  bertrand  <Bertrand.Guiheneuf@aful.org>

	* tests/ui-tests/store_listing.c: 
	* tests/ui-tests/store_listing.glade:
	Quick and (very) dirty hack to test Camel more
	easily.

	* camel/camel-folder.c (camel_folder_append_message): 
	new method.

1999-08-09  bertrand  <Bertrand.Guiheneuf@aful.org>

	* devel-docs/misc/ref_and_id_proposition.txt:
	new file. Document message UID and vfolder
	implementation.

1999-08-08  Robert Brady  <rwb197@ecs.soton.ac.uk>

	* camel/gmime-rfc2047.c: more advanced RFC2047 encoder started.
	
1999-08-08  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/MH/camel-mh-folder.c (_get_message): 
	fix. In MH, message number is not related to 
	message position in folder.

	* camel/providers/MH/camel-mh-folder.c (_is_a_message_file): 
	util func.
	(_get_message_count): implemented.

1999-08-06  bertrand  <Bertrand.Guiheneuf@aful.org>

	* devel-docs/camel/:
	updated some autogen doc stuff.
	Still don't understand warnings :(

	* camel/camel-data-wrapper.c: 
	* camel/providers/MH/camel-mh-store.c: 
	* camel/url-util.c: 
	* camel/gmime-content-field.c: 
	* camel/camel-store.c: 
	various inline doc corrections.

	* camel/camel-folder.c (get_message_count): 
	new method. Returns the number of message 
	in the folder.



1999-08-06  Robert Brady  <rwb197@ecs.soton.ac.uk>

	* tests/test6.c: encoder test.

	* camel/gmime-rfc2047.c: Fixed decoder bug : sequence
	?= is not always the terminator for an encoded-string.


1999-08-06  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/MH/camel-mh-folder.c (_list_subfolders): 
	stat was not testing the good file. Fixed.
	
	* tests/test4.c (main): added real test for MH folder 
	provider. All tested things seem to work OK :)

1998-08-06  Robert Brady  <rwb197@ecs.soton.ac.uk>
	
	* tests/test5.c: test for RFC2047 decoder.

	* camel/gmime-rfc2047.c: Improved RFC2047 decoder.

1999-08-06  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/MH/camel-mh-folder.c (_exists): add debug information
	(_list_subfolders): test if first char in folder name is not '.'
	before adding it to the folder list.

	* camel/camel-store.c (_init): 
	disable session check temporarily
	(_get_separator): 
	(_get_folder): new static func. 
	Fixed several oddities in class definition. 

	* camel/providers/MH/camel-mh-store.c (camel_mh_store_get_type): 
	parent type is CAMEL_STORE_TYPE not CAMEL_FOLDER_TYPE

	* camel/camel-store.c: 
	prent class is CamelServiceClass not GtkObjectClass

	* camel/url-util.c : 
	cosmetic changes + use of const when possible.
	(find_host):
	fix a bug: when there is no host and no port don't skip the '/'
	all static find_* func are now named _func_*  
	(g_url_free): destructor func.
	cache field has been disabled. Constructing the url string
	won't be too slow and will occur rarely enough that we
	do not need to add complexity to this code. 

	* camel/providers/MH/camel-mh-store.c: 
	parent class is CamelStorClass not GtkObjectClass

1999-08-05  bertrand  <Bertrand.Guiheneuf@aful.org>

	* tests/test4.c: 
	test mh provider.
	
	* camel/providers/MH/camel-mh-folder.c (_get_message): 
	implemented
	
	* camel/camel-folder.c (_get_message): 
	new method. 
	(camel_folder_get_message): 
	corresponding public call
	
	* camel/README.HACKING: 
	Some notes.

	* camel/CODING.STYLE: 
	short note about coding style. 

	* camel/README.COPYRIGHT: 
	Note about copyright policy.

	* camel/providers/MH/camel-mh-folder.c (_list_subfolders): 
	minor typo fixes.


1999-08-04  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/gmime-rfc2047.c: 
	* camel/gmime-rfc2047.h:
	indentation and cosmetic changes.
	
	* camel/providers/MH/camel-mh-folder.c (_list_subfolders): 
	implemented.
	* camel/providers/MH/camel-mh-folder.c (_delete): 
	finshed implementation
	(_delete_messages): implemented.


1999-08-04  Robert Brady  <rwb197@ecs.soton.ac.uk>

	* camel/gmime-rfc2047.[ch]: added an implemention of RFC2047
	  (support for character sets other than US-ASCII in MIME
	  headers). Not actually called from anywhere yet.


1999-08-03  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/providers/MH/camel-mh-folder.c (_create): 
	implemented.
	(_delete): started implementation.

	* camel/camel-folder.c (_get_folder): default implementation 
	calls camel_store_get_folder ().

	* camel/providers/MH/camel-mh-folder.c (_init_with_store): 
	implemented.

	* camel/camel-folder.h (struct _CamelFolder): 
	remove useless exist_on_store field.

	* camel/camel-folder.c (_exists): 
	do not use exist_on_store field.

	* camel/camel-folder.c (camel_folder_set_name): 
	(camel_folder_get_name): 
	new public functions 
	(_set_name): set full_path.

	(_set_full_name): 
	(camel_folder_set_full_name): 
	commented out this functions def. 
	It would make things very difficult to handle, and would not 
	be very useful. 
	
	* camel/providers/MH/camel-mh-store.h: 
	* camel/providers/MH/camel-mh-store.c (camel_mh_store_set_toplevel_dir): 
	(camel_mh_store_get_toplevel_dir): 
	* camel/providers/MH/camel-mh-folder.c (_set_name): 
	* camel/providers/MH/camel-mh-folder.h: 
	use (gchar *) instead of (GString *) everywhere.
	use const when necessary.
	
	* camel/camel-folder.h (struct _CamelFolder): 
	removed unused message_list field.
	
	* camel/camel-mime-part.c (_set_content_object): 
	There is a probleme here. We can not allow mime part
	content-type field and content_object mime-type to be 
	different. I thus chosed to set mime part object 
	content field to be freed (if necessary) and set
	to be a pointer to content_object mime type
	field. 
	(_construct_from_stream): set content_object mime type
	to be the same as mime_part's one. This is necessary
	because we use _set_content_type. 
	
	This two things are a bit hackish ansd may need
	to be redesigned.
	
	* camel/gmime-utils.c (gmime_write_header_pair_to_stream): 
	use g_strdup_printf and remove a bug.

	* camel/camel-simple-data-wrapper.c (_construct_from_stream): 
	more debugging output +  nb_bytes_read is now a signed int 
	to avoid bug when eos is encountered.

	* camel/camel-mime-part.c (_construct_from_stream): 
	sync to data_wrapper_repository function name changes. 
	Use default "text/plain" type when conten-type field
	is not found. (following RFC 2046 spec).

	* camel/data-wrapper-repository.c (data_wrapper_repository_set_data_wrapper_type): 
	(data_wrapper_repository_get_data_wrapper_type): 
	change function name prefix (s/data_wrapper/data_wrapper_repository/)

	* camel/camel-multipart.c (_read_part): 
	add `\n` at eol but not before boundary.

	* camel/gmime-utils.c (get_header_table_from_stream): 
	correct implementation of end of stream detection.

1999-08-01  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-multipart.c (_read_part): 
	use a stream to store the part instead of GString. 
	
	* camel/camel-mime-part.c (camel_mime_part_set_text): 
	set data wrapper content type to "text/plain".

	* camel/camel-stream-mem.c:
	* camel/camel-stream-mem.h:
	new memory buffer based stream.

	* camel/camel-stream-fs.c (_seek): 
	implementation for file system based stream.

	* camel/camel-stream.c (camel_stream_seek): 
	new method.

	* camel/camel-stream-fs.c (camel_stream_fs_class_init): 
	pass CamelStreamFsClass instead of CamelStreamClass.

1999-08-01 bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/gmime-utils.c (gmime_write_header_pair_to_stream): 
	corrected a bug with memory not allocated for '\0' in strtmp

	* camel/gmime-utils.c (gmime_read_line_from_stream): 
	do not return NULL when line is empty. 

	* camel/camel-multipart.c (_read_part): return true when end
	of multipart is found, not the opposite

1999-07-31  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/gmime-utils.c (gmime_read_line_from_stream): 
	Don't return crlf at end of line.

1999-07-30  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/gmime-utils.c (gmime_read_line_from_stream): 
	new function: reads a line from a stream.
	should be in streams utils maybe. 

1999-07-29  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.c (_construct_from_stream): 
	Uses data wrapper repository to find what data wrapper
	to use to construct the content from a stream. When 
	no object is registered for the mime type found in
	content type field a CamelSimpleDataWrapper is 
	used. 
	
	* camel/camel-mime-part.c (_get_content_type): 
	(camel_mime_part_get_content_type): returns
	a pointer on the content_type field instead 
	of the gchar * mime "type/subtype".

1999-07-28  bertrand  <Bertrand.Guiheneuf@aful.org>


	* camel/data-wrapper-repository.c
	* camel/data-wrapper-repository.h
	New files. Handles mime type <-> camel object
	(for example "multipart" <-> CamelMultipart
	* tests/tesst3.c: test data repository thing.

1999-07-26  bertrand  <Bertrand.Guiheneuf@aful.org>
	
	* camel/camel-multipart.c (_write_to_stream): 
	implemented output of multipart.
	
	* tests/test1.c (main): testing content objects operations. 

1999-07-25  bertrand  <Bertrand.Guiheneuf@aful.org>
	
	* camel/camel-mime-part.c (camel_mime_part_set_text): 
	new util function to set a mime part content to be 
	a text string.

	* camel/camel-simple-data-wrapper.c (camel_simple_data_wrapper_set_buffer_from_text): 
	new util func. 
	(camel_simple_data_wrapper_new): new func.

	* camel/camel-multipart.c (_write_to_stream): 
	implemented output of multiparts.

1999-07-24  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/gmime-content-field.c (gmime_content_field_get_parameter): 
	New function. Returns the value associated to a 
	mime parameter. 


1999-07-22  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-multipart.h: 
	* camel/camel-multipart.c:
	New class. Models multipart mime objects.
	
	* camel/camel-mime-body-part.h: 
	* camel/camel-mime-body-part.c: 
	New class. Body part is a mime part contained in 
	a multipart object.
	

1999-07-21  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-log.h: 
	implemented hard log level stuff.
	* came/*.c use "CAMEL_LOG_*" instead of "CAMEL_LOG (*"
	in order to allow hard level switch.

	* tests/test1.c: 
	* tests/test2.c: 
	updated to use gchar instead of GString. Tests passed.


1999-07-19  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-stream.c: 
	* camel/camel-stream.h: 
	"const"-antified
	

	* camel/camel-simple-data-wrapper.c: (_construct_from_stream)
	do not use any limit when constructing the object from a stream
	
	* camel/camel-stream-fs.c: 
	* camel/camel-stream-fs.h: 
	* camel/camel-mime-message.c: 
	* camel/camel-mime-message.h: 
	* camel/camel-session.c: 
	* camel/camel-session.h: 
	* camel/camel-service.c: 
	* camel/camel-service.h:
	* camel/camel-store.c: 
	* camel/camel-store.h: 
	* camel/camel-folder.c: 
	* camel/camel-folder.h: 
	* camel/gmime-utils.c: 
	* camel/gmime-utils.h: 
	GString -> gchar
	constantified what had to be.
	
	* camel/string-utils.c: 
	* camel/string-utils.h: 
	New files. Meant to replace gstring-util for gchar *
	
1999-07-16  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/gmime-content-field.c (gmime_content_field_construct_from_string): 
	GString -> gchar
	use const to indicate copied parameter.

1999-07-15  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-simple-data-wrapper.c: 
	* camel/camel-simple-data-wrapper.h: 
	Gstring -> gchar
	
1999-07-15  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/url-util.c:  
	* camel/url-util.h: 
	Do not use GStrings any more. 
	Added assertion code. 
	Cosmetic reformating
	
	* AUTHORS:
	* ChangeLog:
	Changed my email address.

	
1999-07-13  Miguel de Icaza  <miguel@gnu.org>

	* camel/gmime-base64.c (gmime_encode_base64): Implemented base64
	encoder based on CamelStreams.  Should the encoder/decoder be a
	Stream itself?

	* camel/gmime-utils.c: include config.h here.
	* camel/url-util.c: ditto.
	* camel/gstring-util.c: ditto.
	* camel/gmime-content-field.c: ditto.
	* camel/camel-stream.c: ditto.
	* camel/camel-stream-fs.c: ditto.
	* camel/camel-store.c: ditto.
	* camel/camel-simple-data-wrapper.c: ditto.
	* camel/camel-session.c: ditto.
	* camel/camel-service.c: ditto.
	* camel/camel-mime-part.c: ditto.
	* camel/camel-mime-message.c: ditto.
	* camel/camel-log.c: ditto.
	* camel/camel-data-wrapper.c: ditto
	* camel/camel-folder.c: ditto.

	* camel/camel-stream.c (camel_stream_write): Moved api
	documentation to the places that they document.
	(camel_stream_class_init): Virtual classes do not need to have a
	default implementation.  So null them all.
	(camel_stream_write): Return value from write.
	(camel_stream_available): implement.
	(camel_stream_write_strings): documented.

	* devel-docs/query/virtual-folder-in-depth.sgml: Small
	reformatting

1999-06-28  bertrand  <Bertrand.Guiheneuf@aful.org>

	* tests/test2.c (main): now use 
	CamelDataWrapper::contruct_form_stream to test 
	message parsing

	* camel/camel-data-wrapper.c: 
	* camel/camel-data-wrapper.h: 
	construct_from_stream no longer has maximimum size arg.

	* camel/camel-mime-part.c (_construct_from_stream): new.
	Construct the mime_part from a stream.

	* camel/camel-mime-part.c:
	new field (content_type) and associated methods.
	(camel_mime_part_init): initialize content_type field.
	(_parse_header_pair): now set content_type MimePart field
	instead of using DataWrapper Mime typing facility.

1999-06-28  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-data-wrapper.h: 
	s/content_type/mime_type/

1999-06-24  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-simple-data-wrapper.[ch]:
	new class. Simple implementation of a data wrapper:
	simply keeps the stream result in a byte array.

	* camel/camel-mime-part.c (_parse_header_pair): added a warning. 
	Have to think about the correct way to store content type stuff.

1999-06-24  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-message.c (_write_one_recipient_to_stream): 
	includes gmime-utils header. 
	patch from Ulrich Drepper <drepper at cygnus.com>
	set separator string in write_header_with_glist_to_stream()
	
	* camel/camel-log.c (camel_log): 
	patch from Ulrich Drepper <drepper at cygnus.com>
	Do not use stderr in initialization of logfile descriptor.
	
	* camel/camel-stream-fs.c (camel_stream_fs_new_with_name): 
	patch from Ulrich Drepper <drepper at cygnus.com>
	initialize mode field in open(). 

1999-06-22  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-data-wrapper.c (_get_content_type): 
	moved all the content-type stuff here.
	(camel_data_wrapper_init): initialize the instance
	content-type field.

	* camel/camel-mime-part.c (_parse_header_pair): 
	parse Content-Type stuff in header. 
	(_write_to_stream): write the content type stuff to 
	the stream.

	* camel/gmime-content-field.c (gmime_content_field_get_mime_type): 
	new function, returns "type/subtype" mime type string.
	(gmime_content_field_construct_from_string): 
	new function, construbt a content_field object
	form a string. be used to set the mime_type from a
	string.

	* camel/camel-mime-part.c (_set_content_type): 
	(camel_mime_part_set_content_type): 
	(_get_content_type): 
	(_get_content_type): 
	new methods.

1999-06-21  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/gmime-utils.c (get_header_table_from_stream): 
	replace CR/LF+'\t' with ' ' 

	* camel/camel-mime-message.c (_set_recipient_list_from_string): 
	trim \t when splitting

	* camel/gmime-utils.c (get_header_table_from_file): 
	corrected bug in scanning tabulations ('t' -> '\t')

	* tests/test2.c (main): read mail.test instead
	of mail1.test

	* camel/camel-mime-part.c (_add_header): 
	added comments 

1999-06-03  bertrand  <Bertrand.Guiheneuf@aful.org>

	* devel-docs/query/virtual-folder-in-depth.sgml: 
	sgmlized Giao's doc about virtual folders.

1999-05-31  bertrand  <Bertrand.Guiheneuf@aful.org>

	* tests/test2.c (main): 
	use new stream code instead of raw file * stuff.

	* camel/gmime-utils.c (get_header_table_from_stream): 
	new func. Will replace get_header_table_from_file and will
	be used to parse headers from files as well as from 
	memory buffers.

	* camel/camel-stream-fs.c:
	CamelStream Subclass. File system based
	stream.
	

1999-05-30  bertrand  <Bertrand.Guiheneuf@aful.org>

 	* camel/camel-stream.h: new class. Represents an 
	abstract stream object.

       * camel/camel-mime-message.c (_set_recipient_list_from_string): 
	remove leading and trailing spaces in recipient addresses.

	* camel/gmime-utils.c (_store_header_pair_from_gstring): 
	remove leading and trailing spaces from header values.

	* camel/gstring-util.c (g_string_trim): new
	func: remove leading or trailng chars from 
	a specified char set.
	(g_string_split): allow trimming of substrings.

	* tests/test1.c (main): remove gtk_main call

1999-05-28  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.c 
	(_parse_header_pair): 
	(_init_header_name_table): 
	More header parsing code.

	
1999-05-27  bertrand  <Bertrand.Guiheneuf@aful.org>

	* tests/test2.c (main): rewrite message obtained via
	parsing into a file. Actually, it works pretty well :))

	* camel/camel-mime-message.c (_set_recipient_list_from_string): 
	create recipient list form a comma separated string.
	(_parse_header_pair): added recipient lists parsing.

	* camel/camel-mime-part.c (_parse_header_pair): 
	new (protected) method. Parse a head pair and
	decides what to do with it.
	
	(_add_header): Call in _parse_header_pair

	* camel/camel-mime-message.c (_parse_header_pair): 
	overload  header parsing MimePart mthod.

	* camel/gstring-util.c (g_string_split): 
	new func: split a gstring into a GList of
	substring.

1999-05-26  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/gmime-utils.c (get_header_lines_from_file): 
	new func. Parses message header zone and returns
	a Glist of all header lines.

	* tests/test2.c: tests message parsing

	* camel/gmime-utils.c (write_header_table_to_file): 
	new func to write a table of headers.

1999-05-20  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-message.c (_write_to_file): 
	recipient list printing
	
	* tests/test1.c (main): more tests.

1999-05-19  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.c (_write_to_file): test if content
	exists before calling its write_to method.

	* camel/camel-mime-message.c (_write_to_file): bugs fix.

	* camel/camel-mime-message.c (camel_mime_message_new_with_session): 
	new func. Creates a message with the session field set
	up correctly.

1999-05-18  bertrand  <Bertrand.Guiheneuf@aful.org>

	* tests/test1.c (main): tests

	* camel/camel-mime-message.c (_write_to_file): 
	started write_to framework for mime_messages

	* camel/camel-mime-message.c (*_message_number): 
	message number funcs.
	
1999-05-15  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-message.c (*_flag): 
	flags handling methods

1999-05-14  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-message.c (camel_mime_message_class_init): 
	added recipient handling class funcs.

1999-05-13  bertrand  <Bertrand.Guiheneuf@aful.org>
        
	* camel/camel-mime-message.c (camel_mime_message_init): 
	create recipients hash table
	(_remove_recipient): 
	(_add_recipient):
	(_get_recipients):  new funcs.
	Internal Recipients data structure is
	a bit complicated though.

	* camel/camel-mime-part.c (camel_mime_part_init): 
	create headers hash table

	* camel/camel-mime-message.h: 
	a bunch of get/set header field
	method done. Does nothing yet though.

	* camel/camel-mime-message.[ch] :
	new file. 

1999-05-12  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.h (struct ): 
	disposition is now a full GMimeContentField
	object.

	* camel/gmime-content-field.c: new file
	handle "type/subtype ;parameter=value ; parameter=value ..."
	BNF grammar elements
	(gmime_content_field_write_to_file): new func
	
	* camel/gmime-utils.c (gmime_write_header_pair_to_file): 
	namespace change

1999-05-11  bertrand  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.c (_write_to_file): 
	overload wrapper class method.
	(_write_to_file): start to write some text in 
	file.

	* camel/camel-store.c: typo fix.

	* camel/camel-store.c: 
	* camel/camel-service.c: 
	* camel/camel-folder.c: 
	* camel/camel-data-wrapper.c: 
	* camel/camel-mime-part.c: 
	static functions naming follows gnome 
	coding style guide.

	* camel/camel-mime-part.h: implemented public interfaces
	

1999-05-10  Bertrand Guiheneuf  <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.c (__camel_mime_part_get_header_lines): 
	(__camel_mime_part_set_header_lines): 
	(__camel_mime_part_get_content_languages): 
	(__camel_mime_part_set_content_languages): 
	(__camel_mime_part_get_encoding): 
	(__camel_mime_part_set_encoding): 
	(__camel_mime_part_get_content_MD5): 
	(__camel_mime_part_set_content_MD5): 
	(__camel_mime_part_get_content_id): 
	(__camel_mime_part_set_content_id): 
	A bunch of new set/get func.

	* camel/gstring-util.c (g_string_list_free): 
	convenience function for string list 
	complete deallocation.

1999-05-09  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.c (__camel_mime_part_add_header): 
	new method

	* camel/camel-mime-part.h (struct CamelMimePart):
	added core fields.

1999-05-08  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-mime-part.[ch]: 
	new class. models a mime mail part.

	* camel/camel-data-wrapper.c 
	(camel_data_wrapper_write_to_buffer): method to
	stream data content in a buffer.
	(camel_data_wrapper_write_to_file): 
	(camel_data_wrapper_construct_from_buffer): 
	(camel_data_wrapper_construct_from_file): 
	new methods.
	
1999-05-07  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-data-wrapper.[ch]:new class.
	This should not be a class but rather an 
	interface. The day Gtk support interfaces, 
	it dataWrapper should become an interface.

1999-05-04  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-service.c (camel_service_get_url): 
	new method.

	* devel-docs/camel/camel-sections.txt: added 
	function doc references

	* camel/camel-folder.c (__camel_folder_close): 
	fixed indentation.
	(camel_folder_expunge): new method.
	(__camel_folder_close): used expunge flag

1999-05-03  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (camel_folder_get_mode): 
	typo fix

	* camel/camel-folder.c (__camel_folder_list_subfolders): 
	new func.

	* some doc stuffs
	

1999-05-01  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c 
	(__camel_folder_get_mode): 
	(camel_folder_get_mode): 
	(camel_folder_get_parent_store): 
	(__camel_folder_get_parent_store): 
	(camel_folder_get_parent_folder): 
	(__camel_folder_get_parent_folder): 
	new methods

	* camel/camel-service.c: put __ prefix before
	private virtual funcs.

	* camel/camel-folder.c (camel_folder_delete): 
	(camel_folder_delete_messages): 
	new methods.

	* camel/url-util.c (g_url_new): some
	more comments 

1999-04-27  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c (camel_folder_create): 
	new public function.

1999-04-25  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-session.c (camel_session_get_store_from_provider): 
	initialize folder object.

	* camel/camel-store.c (init): new method.
	called by session object at instantiation time.

	* camel/camel-store.h (struct _CamelStore): 
	new fields : session and url_name

1999-04-25  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-session.c (camel_session_set_provider): 
	new method to set the default provider for a protocol.
	(camel_session_get_store_from_provider): 
	new method to instantiate a folder from a provider.

	* camel/camel-provider.h: s/GString/gchar/g
	+ typo fix.

	* camel/camel-provider.[ch]:
	basic provider structure. Have to write the
	code for dynamic loading.

1999-04-24  bertrand <Bertrand.Guiheneuf@aful.org>
	
	* camel/url-util.[ch]: s/new_g_url/g_url_new

	* camel/url-util.c (new_g_url): URL 
	rewritten completely. Error handling not
	implemented in public functions.
	But URL scan works pretty well :)))

1999-04-24 bertrand <Bertrand.Guiheneuf@aful.org>
	
	* camel/url-util.[ch]: I needed the url 
	functions to use GString, and I wanted a more
	general scheme so I finally started rewriting 
	the whole thing from scratch.
	No more code from gzilla :(
	
1999-04-23  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/url-util.[ch]:
	Utility functions to parse URLs.
	Stolen shamelessly from gzilla (www.gzilla.com)
	written by Raph Levien <raph@acm.org>
	
	* camel/Makefile.am: added url-util.[ch]
	compilation.

	* Makefile.am (SUBDIRS): removed devel-docs
	until I come up with a correct Makefile.am

	* camel/camel-store.h: 
	* camel/camel-folder.h:
	correct declarations of structs


1999-04-22  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/providers/MH/camel-mh-store.c:
	more test implementation.

	* camel/camel-store.c (camel_store_get_type): typo fix
	

1999-04-21  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/providers/MH/camel-mh-folder.c (camel_mh_folder_get_type): 
	start test provider.

1999-04-20  bertrand <Bertrand.Guiheneuf@aful.org>
	
	* camel/camel-store.h: now CamelStore inherits from
	CamelService.

	* camel/camel-service.c (camel_service_class_init): 
	basic abstract service class.

1999-04-19  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/README: added some (few) explanations.

1999-04-18  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-store.[ch]: started implementation
	* camel/camel-folder.c (camel_folder_get_type): typo
	uncommented the store related code.
	(camel_folder_create): enable som store relted code. 
	Not finished. Have to define public methods first.

	* camel/camel-log.h: some explanation about the 
	log system

1999-04-18   bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c: 
	(camel_folder_create): implemented (partially)
	have to write CamelStore before finishing it.

	* camel/camel-folder.h (CamelFolder): added full_name field
	(CamelFolderClass): added set/get_full_name methods

1999-04-18  bertrand <Bertrand.Guiheneuf@aful.org>

	* camel/camel-folder.c: some work
	* camel/camel-log.c: log system for camel
	* camel/gstring-util.c: some utilities for GString objects
	

1999-04-18  bertrand <Bertrand.Guiheneuf@aful.org>

	* autogen.sh (PKG_NAME): groomf -> gnome-mailer

