2003-05-15  JP Rosevear  <jpr@ximian.com>

	Fixes #43101
	
	* e-summary-mail.c (e_summary_folder_unregister_storage): unref
	the storage after use not before

2003-05-15  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary.c (do_summary_print): Remove preview arg.  Also, make
	it destroy the dialog after a button has been clicked.
	(e_summary_set_control): Add casts to avoid compiler warnings.

2003-05-14  JP Rosevear  <jpr@ximian.com>

	* e-summary.h: fix up protos

	* e-summary.c (e_summary_get_control): accessor
	(e_summary_set_control): ditto
	(retrieve_shell_view_interface): util to get the shell view
	(e_summary_change_current_view): use it
	(e_summary_set_message): ditto
	(e_summary_unset_message): ditto

	* e-summary-mail.h: add proto

	* e-summary-mail.c (e_summary_mail_get_info): use the objref of
	the listener
	(e_summary_folder_unregister_storage): clean up a registered
	storage
	(e_summary_folder_register_storages): store the listener directly
	(folder_info_pb_changed): unref the listener once we are notified
	(lazy_register_storages): release and unref the property bag,
	event and listener
	(e_summary_folder_init_folder_store): track the listener
	(e_summary_folder_clear_folder_store): cleanup the folder store

	* e-summary-factory.c (control_activate_cb): we don't get the
	shell view here any more
	(e_summary_factory_new_control): don't pass in the shell, set the
	control on the summary

	* component-factory.c (owner_unset_cb): clear the folder store on
	destruction

2003-05-02  Not Zed  <NotZed@Ximian.com>

	[#41849]

	* e-summary-rdf.c (tree_walk): check the in-memory charset, not
	the transport charset when creating output.

2003-04-18  Rodney Dawes  <dobey@ximian.com>

	[#21499]

	* Makefile.am:
	* e-summary-factory.c:
	Use PREFIX instead of EVOLUTION_DATADIR for bonobo_ui_util_set_ui ()
	
2003-04-16  Ettore Perazzoli  <ettore@ximian.com>

	[#39693]

	* e-summary-shown.c (SPEC): Sort by the first column.

2003-04-16  Ettore Perazzoli  <ettore@ximian.com>

	[#40902]

	* e-summary-preferences.c: Removed members new_url_entry,
	new_name_entry from struct PropertyData.
	(rdf_new_url_clicked_cb): Port to
	GtkDialog and fix button order.  Also, use gtk_dialog_run()
	instead of using callbacks.
	(add_dialog_clicked_cb): Removed.

2003-04-12  Rodney Dawes  <dobey@ximian.com>

	* e-summary-shown.c: Remove construct_pixmap_button (), use stock
	buttons.
	
2003-04-09  Larry Ewing  <lewing@ximian.com>

	* e-summary.c (e_summary_init): remove call to
	gtkhtml_set_default_background_color

2003-04-08  Not Zed  <NotZed@Ximian.com>

	* GNOME_Evolution_Summary.server.in.in: Properly terminate the
	"name" attribute tag added in the last change.

2003-04-07  Dan Winship  <danw@ximian.com>

	* Locations: Add Darwin, Australia [#12066]. Fix Vilnius
	and Riga [#15740]. Fix spelling of Gardermoen, Norway [#18015].
	Add Goetsenhoven and Spa, Belgium [#32027]

	* GNOME_Evolution_Summary.server.in.in: clean up server names

2003-03-31  Larry Ewing  <lewing@ximian.com>

	* e-summary-factory.c: make the verbs static so they don't enter
	the global namespace.

2003-03-27  Ettore Perazzoli  <ettore@ximian.com>

	[#40358]

	* e-summary.c (e_summary_init): Likewise.

	* e-summary-weather.c (e_summary_weather_get_html): Likewise.
	(weather_make_html): Likewise.

	* e-summary-mail.c (e_summary_mail_generate_html): Fix so it
	handles the fact that the translated strings are already in UTF8.
	* e-summary-rdf.c (tree_walk): Likewise.
	(display_doc): Likewise.

2003-03-27  Not Zed  <NotZed@Ximian.com>

	** see bug #40141
	
	* e-summary-preferences.c (config_control_destroy_cb): Dont save
	prefs here, but restore the last saved.
	(config_control_apply_cb): save preferences here.

2003-03-26  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-mail.c: New member physical_uri in struct
	ESummaryMailFolder.
	(new_folder_cb): Set it.
	(remove_folder_cb): Free it.
	(make_pretty_foldername): Rewritten to honour the display_name.
	[#7153]

	* e-summary.c (destroy): Only remove the source with ID
	tomorrow_timeout_id if the ID is nonzero.

2003-03-25  Dan Winship  <danw@ximian.com>

	* e-summary.c: Update for e_notice move
	(do_summary_print): Pass a parent_window to e_notice

2003-03-19  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-calendar.c (generate_html): Add a %P in the strftime
	string for the case when the user wants am/pm format.  [#19957]

2003-03-13  Mike Kestner  <mkestner@ximian.com>

	* e-summary-preferences.c (fill_rdf_etable): pass FALSE for 
	expand to e_summary_shown_add_node.
	* e-summary-shown.c (make_table): ditto, set_expanded_default to FALSE.
	(add_node): only call e_tree_node_set_expanded is expanded != default.
	* e-summary-weather.c (*_fill_etable): pass FALSE for expand to 
	e_summary_shown_add_node.

2003-03-13  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-calendar.c (generate_html): Changed so its printf()s
	are protected against default_uri being NULL.  Also, no need to do
	e_utf8_from_locale_string() anymore.

2003-03-12  Dan Winship  <danw@ximian.com>

	* e-summary-shown.c (e_summary_shown_freeze,
	e_summary_shown_thaw): New, to free/thaw the ETree models.
	(e_summary_shown_add_node): Don't freeze/thaw around the single
	add here. That doesn't really help much.

	* e-summary-preferences.c (fill_rdf_etable): Freeze/thaw the
	ESummaryShown while filling it in.

	* e-summary-weather.c (e_summary_weather_fill_etable): Likewise.

2003-03-07  Ettore Perazzoli  <ettore@ximian.com>

	* Locations (name): Add some escapes to the newly added locations
	so they get split properly.

	* e-summary-weather.c (e_summary_weather_init_locations): Fetch
	the Locations file from the right path.  If you find an invalid
	entry in the Locations file, complain with an informative
	g_warning() instead of just returning FALSE.
	(e_summary_weather_fill_etable): Do the same thing here.

2003-03-06  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-calendar.c (generate_html): Added the AM/PM part when
	not in "wants24hr" mode; moved the date before the time instead of
	vice versa.  Also, do not check the boolean value against TRUE!

2003-03-06  Ettore Perazzoli  <ettore@ximian.com>

	* Locations: Added more Swedish locations, submitted by Marten
	Woxberg.  [See #5344]

2003-03-06  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-calendar.c (e_summary_calendar_protocol): Use
	G_GNUC_FUNCTION instead of __FUNCTION__.
	* e-summary-rdf.c (e_summary_rdf_update): Likewise.
	* e-summary-tasks.c (e_summary_tasks_protocol): Likewise.
	(e_summary_tasks_protocol): Likewise.
	* e-summary-weather.c (e_summary_weather_update): Likewise.

>>>>>>> 1.264
2003-03-05  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-weather.c (e_summary_weather_set_online): Likewise,
	assume weather_refresh_time of zero means "never update the
	weather".
	(e_summary_weather_init): Likewise here.
	(e_summary_weather_reconfigure): And here.

	* e-summary-rdf.c (e_summary_rdf_init): Don't add the news feeds
	here -- it should be handled with a GConf schema.  Also, assume
	that prefs is always not NULL (as is the case with the current
	code), and interpret a timeout value of zero as "never update
	automatically".
	(e_summary_rdf_reconfigure): Likewise here.  If rdf->timeout is
	zero, assume there is no pending timeout.
	(e_summary_rdf_set_online): Likewise here.  Sigh, so much
	duplication in this code.

2003-03-05  Not Zed  <NotZed@Ximian.com>

	* component-factory.c (owner_unset_cb): dont call bonobo_main_quit
	anymore now we're shlib'ised.

2003-02-28  Dan Winship  <danw@ximian.com>

	* e-summary.c (e_summary_init): Don't need to use libalarm to set
	a timeout to change the date. We know how many seconds away it is,
	so we can just set a timeout for then.

	* Makefile.am (summary_libs): Remove libalarm.a

2003-02-21  Dan Winship  <danw@ximian.com>

	* Makefile.am (summary_libs): clean up

2003-02-20  Dan Winship  <danw@ximian.com>

	* Makefile.am (summary_libs):
	s/libemiscwidgets.a/libemiscwidgets.la/

2003-02-19  Dan Winship  <danw@ximian.com>

	* e-summary-rdf.c: Declare xmlSubstituteEntitiesDefaultValue
	extern.
	(message_finished): And set its value here. Fixes a duplicate
	symbol error on OS X.

2003-02-10  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am: Split the IDL generated rules so ${ORBIT_IDL}
	doesn't get invoked multiple times in parallel.
	(BUILT_SOURCES): Added this.
	(CLEANFILES): And this.

2003-02-06  Dan Winship  <danw@ximian.com>

	* Makefile.am (INCLUDES): Fix typo in previous commit

2003-02-06  Dan Winship  <danw@ximian.com>

	* Makefile.am: clean up, update, etc

	* component-factory.c: #include string.h

	* e-summary.c (e_pixmap_file): s/IMAGEDIR/IMAGESDIR/

	* e-summary-rdf.c: Fix some warnings

2003-02-05  Dan Winship  <danw@ximian.com>

	* e-summary-offline-handler.c: s/BonoboXObject/BonoboObject/

2003-01-23  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am (componentdir): Removed definition; this is now
	defined in configure.in.

2003-01-22  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-factory.c (control_activate): Get my-evolution.xml
	from EVOLUTION_UI_DIRECTORY.

	* e-summary.c (e_pixmap_file): Use EVOLUTION_IMAGEDIR.
	(e_pixmap_file): Use EVOLUTION_BUTTONSDIR.

	* e-summary-weather.c (e_summary_weather_init_locations): Use
	LOCATIONDIR.
	(e_summary_weather_fill_etable): Likewise.

	* Makefile.am (Locationdir): Version using $(BASE_VERSION).
	(gladedir): Likewise.
	(INCLUDES): Define EVOLUTION_IMAGEDIR.

2003-01-20  Ettore Perazzoli  <ettore@ximian.com>

	* Locations: Updated locations for EU_FI, contributed by Pekka
	Pietikainen <Pekka.Pietikainen@nixu.com>.

2003-01-14  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am (EXTRA_DIST): Add $(schema_DATA).

2003-01-13  Not Zed  <NotZed@Ximian.com>

	* e-summary-preferences.c (e_summary_preferences_save): fix a
	past-o with the physical_uri_list prepend.

2003-01-10  Not Zed  <NotZed@Ximian.com>

	* e-summary-mail.c (new_folder_cb): glist->gslist for
	display_folders list
	(mail_change_notify): "
	(e_summary_mail_reconfigure): ", and also traverse the list
	forwards, since we can't go backwards since its now an slist.

	* e-summary-preferences.c (e_summary_preferences_restore): append
	new folder entries to the folders list.
	(config_control_apply_cb): display_folders is a list of folders,
	not a list of strings, treat accordingly.

2003-01-09  Chris Toshok  <toshok@ximian.com>

	* e-summary-preferences.c (e_summary_preferences_create_control):
	change gtk_widget_show to gtk_widget_show_all so all the various
	custom widgets are displayed.

2003-01-08  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary.c (e_pixmap_file): Update to use
	$(datadir)/evolution/images/ instead of
	$(datadir)/images/evolution to fetch the icons.

2002-12-16  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-shown.c (make_table): Do not ref/sink the ETreeMemory
	object.

2002-12-11  Kevin Breit  <mrproper@ximian.com>

	* Locations: Removed Marquette from the listing, it is no longer
	listed by METAR.  This is per bug 29693.

	* Locations.h: Removed Marquette from the listing, it is no longer
	listed by METAR.

2002-12-06  Ettore Perazzoli  <ettore@ximian.com>

	* component-factory.c: Change description passed to
	BONOBO_ACTIVATION_SHLIB_FACTORY to correctly say we are a factroy.

2002-12-04  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am (componentdir): Install in $(COMPONENT_DIR), not in
	${prefix}/evolution/components.

2002-12-04  Ettore Perazzoli  <ettore@ximian.com>

	* GNOME_Evolution_Summary.server.in.in: Updated to be a shared
	library.

	* main.c: Removed.

	* Makefile.am: Update to compile as a shared library.

	* component-factory.c: Changed to be a shared library factory, for
	both the ShellComponent and the ConfigControl objects.

	* e-summary-preferences.c
	(e_summary_preferences_init_config_control): Renamed from
	e_summary_preferences_register_config_control_factory.
	(e_summary_preferences_create_control): Renamed from factory_fn
	and removed all args.

2002-11-27  Not Zed  <NotZed@Ximian.com>

	* e-summary-shown.c (e_summary_shown_init): GNOME_STOCK_*NEXT/PREV ->
	GTK_STOCK_*GO_BACK/FORWARD.

	* e-summary.[ch]: ran fix.sh over this.

2002-11-25  Ettore Perazzoli  <ettore@ximian.com>

	* component-factory.c (component_destroy): Removed.
	(create_component): Do not connect.

2002-11-20  Ettore Perazzoli  <ettore@ximian.com>

	* component-factory.c (owner_unset_cb): bonobo_main_quit() instead
	of gtk_main_quit().
	(component_destroy): Likewise.

2002-11-20  Ettore Perazzoli  <ettore@ximian.com>

	* component-factory.c: Removed unused #define
	COMPONENT_FACTORY_ID.
	(component_factory_init): Removed unused variable.

	* GNOME_Evolution_Summary.server.in.in: Updated to not use a
	factory, which is what the code actually expects.

2002-11-20  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary.c (e_summary_init): Use GConf.

	* e-summary-tasks.c: Replaced member config_listener in
	ESummaryTasks with a gconf_client.
	(setup_gconf_client): Renamed from setup_config_listener().  Set
	up the GConf client and invoke gconf_client_add_dir() on the
	interesting namespaces.
	(gconf_client_value_changed_cb): Renamed from
	config_listener_value_changed_cb and changed prototype to match
	that of the "value_changed" signal in GConfClient.
	(setup_task_folder): Updated to use GConf.

	* e-summary-calendar.c: Replaced member config_listener with a
	gconf_listener.
	(setup_calendar): Use GConf.
	(setup_gconf_client): Renamed from setup_config_listener.  Set up
	a GConf client and invoke gconf_client_add_dir() on the
	interesting namespaces.
	(gconf_client_value_changed_cb): Renamed from
	config_listener_key_changed_cb() and changed prototype to match
	that of the "value_changed" signal in GConfClient.
	(locale_uses_24h_time_format): Removed.
	(e_summary_calendar_free): g_object_unref() the gconf_client.

	* Makefile.am: Add rules to install the schemas.

	* apps_evolution_summary.schemas: New.

	* e-summary-preferences.c: Did a global GList -> GSList switch.
	(e_summary_preferences_restore): Use GConfClient instead of
	EConfigListener.
	(vector_from_folder_list): Removed since GConf makes this useless.
	(folder_list_from_vector): Likewise.
	(str_list_from_vector): Likewise.
	(vector_from_str_list): Likewise.
	(make_initial_weather_list): Likewise.
	(make_initial_rdf_list): Likewise.
	(make_initial_mail_list): Likewise.
	(e_summary_preferences_save): Use GConf.
	(e_summary_preferences_init): No need to set up defaults here.

	* e-summary.h: Changed members display_folders, rdf_urls, stations
	in ESummaryPrefs to be GSLists instead of GLists; updated all the
	functions that use them accordingly.

2002-11-14  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am: Added rule to generate
	GNOME_Evolution_Summary.server.in from
	GNOME_Evolution_Summary.server.in.in, substituting @LIBEXECDIR@.
	Also, install evolution-executive-summary in $libexecdir instead
	of $bindir.

	* GNOME_Evolution_Summary.server.in.in: Removed the @OAF_SHLIB_*@
	stuff and added @LIBEXECDIR@/ to the executable's name instead.

2002-11-14  Ettore Perazzoli  <ettore@ximian.com>

	* my-evolution.glade: Converted to Glade 2.

2002-11-14  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-calendar.c: Replaced all gtk_signal_connect() calls
	with g_signal_connect() ones.
	* e-summary-mail.c: Likewise.
	* e-summary-offline-handler.c: Likewise.
	* e-summary-preferences.c: Likewise.
	* e-summary-shown.c: Likewise.
	* e-summary-tasks.c: Likewise.
	* e-summary.c: Likewise.

2002-11-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-factory.c (control_destroy_cb): gtk_widget_destroy()
	instead of gtk_object_destroy().
	(e_summary_factory_new_control): Likewise.

	* e-summary-calendar.c: Use g_object_ref()/g_object_unref()
	instead of gtk_object_ref()/gtk_object_unref().
	* e-summary-preferences.c: Likewise.
	* e-summary-shown.c: Likewise.
	* e-summary-table.c: Likewise.
	* e-summary-tasks.c: Likewise.
	* e-summary.c: Likewise.

	* e-summary-preferences.c (e_summary_preferences_make_mail_table):
	g_object_set_data() instead of gtk_object_set_data().
	(make_property_dialog): g_object_get_data() instead of
	gtk_object_get_data().
	(get_folders_from_view): Likewise.

	* component-factory.c (create_view): Use
	evolution_shell_client_corba_objref() instead of
	bonobo_object_corba_objref() on the EvolutionShellClient object.
	Also, use g_object_get_data() instead of gtk_object_get_data().
	(owner_set_cb): Likewise.
	(create_component): Use g_object_set_data() instead of
	gtk_object_set_data().

2002-11-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-rdf.c: Convert to use libxml2.

2002-11-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-offline-handler.c: Convert from GtkObject to GObject.

2002-11-07  Ettore Perazzoli  <ettore@ximian.com>

	* GNOME_Evolution_Summary.server.in.in: Renamed from
	GNOME_Evolution_Summary.oaf.in.in.

	* Makefile.am: GNOME_Evolution_Summary.server instead of .oaf.

2002-11-05  Ettore Perazzoli  <ettore@ximian.com>

	* metar.c: #include <string.h>.

	* main.c (main): Use gnome_program_init().

	* e-summary-tasks.c (e_summary_tasks_protocol): Use
	bonobo-activation.

	* e-summary-table.c (set_value_at): Use g_signal_emit() instead of
	gtk_signal_emit().

	* e-summary-shown.c (e_summary_shown_class_init): GObjectified.
	(construct_pixmap_button): Use gtk_image_new_from_stock() instead
	of gnome_stock_pixmap_new().

	* e-summary-preferences.c (e_summary_preferences_restore): Use
	EConfigListener.
	(add_dialog_clicked_cb): Add some missing consts.
	(factory_fn): Pass NULL as the domain arg to glade_xml_new().
	(factory_fn): Add id arg.
	(e_summary_preferences_register_config_control_factory): 

	* e-summary-mail.c (e_summary_folder_init_folder_store): Use
	bonobo-activation.

	* e-summary-factory.c (control_activate): Pass NULL ev arg to
	bonobo functions that now need it.
	(control_deactivate): Likewise.
	(control_activate_cb): Likewise.
	(e_summary_factory_new_control): Use g_signal_connect() instead of
	gtk_signal_connect().

	* e-summary-calendar.c (e_summary_calendar_protocol): Use
	bonobo_activation.

	* e-summary.c: Update gnome-print #includes.  Added some missing
	#includes.
	(e_summary_url_clicked): Pass NULL as the error arg to
	gnome_url_show().
	(do_summary_print): Use GnomePrintConfig instead of GnomePrinter
	et al.

	* e-cell-tri.h: Removed BEGIN_GNOME_DECLS/END_GNOME_DECLS.

	* e-summary.c: Removed #include <libgnome/gnome-defs.h>.  Ported
	to e-config-listener.c.

	* e-cell-tri.h: Removed #include <libgnome/gnome-defs.h>.

	* component-factory.c: #include <gtk/gtkmain.h>.
	(create_component): Use g_signal_connect.  Match prototype with
	the one required by bonobo_generic_factory().

	* Makefile.am: Add @INTLTOOL_SERVER_RULE@.
	($(MAIL_GENERATED)): Update with new ORBit rules.

2002-10-25  Ettore Perazzoli  <ettore@ximian.com>

	* e-cell-tri.c (set_value): Removed debugging message.

	* e-summary-factory.c (control_activate): Removed the call to
	e_summary_thaw().
	(control_deactivate): Removed the call to e_summary_freeze().

	* e-summary-mail.c (folder_gen_html): Removed debugging message.
	(insert_path_recur): Likewise.
	(add_storage_to_table): Likewise.
	(folder_info_pb_changed): Likewise.
	(lazy_register_storages): Likewise.

	* e-summary-weather.c: #include "e-summary-preferences.h".
	(e_summary_weather_update): Removed debugging message.

	* e-summary-offline-handler.c: #include <gtk/gtksignal.h>.

	* main.c: #include <gconf/gconf.h> and <gal/widgets/e-cursors.h>.

	* e-summary-preferences.c (free_rdf_info): Removed unused
	function.
	(find_name_for_url): Likewise.
	(mail_etable_item_changed_cb): Likewise.
	(maybe_add_to_shown): Likewise.
	(get_folders_from_view): Removed debugging messages.

	* e-summary-rdf.c (tree_walk): Removed debugging message.
	(e_summary_rdf_update): Likewise.

	* e-summary-shown.c (find_entry_from_location): Removed unused
	function.
	(maybe_move_to_shown): Removed debugging message.

	* e-summary-tasks.c: New members cal_open_reload_timeout_id and
	reload_count in ESummaryTasks.
	(generate_html): Return if the load_state of the cal_client is not
	CAL_CLIENT_LOAD_LOADED.
	(cal_open_reload_timeout): New; timeout function for attempting to
	reload the calendar if the first attempt failed.
	(cal_opened_cb): If the load failed, register
	cal_open_reload_timeout to try again after one second.
	(setup_task_folder): If there is a pending timeout callback
	[cal_open_reload_timeout_id nonzero], remove it.
	(e_summary_tasks_init): Call setup_task_folder().
	(e_summary_tasks_free): If there is a pending timeout callback
	[cal_open_reload_timeout_id nonzero], remove it.

	* e-summary-calendar.c: New members cal_open_reload_timeout_id and
	reload_count in ESummaryCalendar.
	(e_cal_comp_util_compare_event_timezones): Renamed to
	compare_event_timezones() and made static.
	(generate_html): Return if the load_state of the cal_client is not
	CAL_CLIENT_LOAD_LOADED.  Call e_summary_draw() before returning.
	(cal_open_reload_timeout): New; timeout function for attempting to
	reload the calendar if the first attempt failed.
	(cal_opened_cb): Return if the load_state of the cal_client is not
	CAL_CLIENT_LOAD_LOADED.
	(e_summary_calendar_reconfigure): Call setup_calendar() so that,
	if the default folder has changed, it gets reloaded.
	(setup_calendar): If there is a pending timeout callback
	[cal_open_reload_timeout_id nonzero], remove it.
	(e_summary_calendar_free): Likewise.

	* e-summary.c: New member queue_draw_idle_id in ESummaryPrivate.
	Removed member redraw_pending.
	(destroy): If queue_draw_idle_id is nonzero, remove the
	corresponding glib mainloop source.
	(draw_idle_cb): New function to regenerate the HTML in the idle
	loop; moved all the code from e_summary_draw() in here.
	(e_summary_draw): Set up draw_idle_cb as an idle callback.
	(e_summary_init): Initialize queued_draw_idle_id.
	(e_summary_reload_timeout): Call e_summary_calendar_reconfigure()
	and e_summary_tasks_reconfigure().  Removed debugging message.
	(e_summary_set_online): Removed debugging message.
	(e_summary_freeze): Removed.
	(e_summary_thaw): Removed.

2002-10-23  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-preferences.c: Replace Gnotices with Footnotes.
	[#31581]

2002-10-23  Ettore Perazzoli  <ettore@ximian.com>

	[#31607 and #31616]

	* e-summary-tasks.c: New member config_listener in ESummaryTasks.
	(e_summary_tasks_free): Unref the config_listener.
	(config_listener_key_changed_cb): New, callback for the
	config_listener.
	(setup_task_folder): New helper function to set up access to the
	task folder.
	(setup_config_listener): New.
	(e_summary_tasks_init): Use setup_config_listener() and
	setup_task_folder().

	* e-summary-calendar: New member config_listener in
	ESummaryCalendar.
	(setup_config_listener): New.
	(config_listener_key_changed_cb): New callback for the
	config_listener.
	(setup_calendar): New.
	(e_summary_calendar_init): Use setup_config_listener() and
	setup_calendar().

2002-10-21  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-weather.c (e_summary_weather_reconfigure): NULL the
	->weathers member before freeing the list items.  Otherwise
	soup_message_cancel() might invoke the refresh function while we
	are freeing things on the list, and crash.  [#31639]

2002-09-26  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-mail.c (e_summary_mail_generate_html): Generate HTML
	for the folder even if the unread count is zero.

2002-09-26  Ettore Perazzoli  <ettore@ximian.com>

	[#28903]

	* e-summary-mail.c: Add member physical_uri to ESummaryMailFolder.
	Removed member name.  Renamed FolderStore.folders to
	FolderStore.path_to_folder and added
	FolderStore.physical_uri_to_folder.
	(new_folder_cb): Set physical_uri member.
	(update_folder_cb): Likewise.
	(new_folder_cb): Pass physical_uri to
	e_summary_mail_idle_get_info().  Also g_strdup() it since that's
	what it expects.
	(remove_folder_cb): Free physical_uri.
	(mail_change_notify): Compare against folder->physical_uri, not
	->path.
	(e_summary_mail_reconfigure): Pass folder->physical_uri to
	e_summary_mail_get_info, not ->path.
	(e_summary_mail_uri_to_name): Removed.
	(e_summary_folder_init_folder_store): Initialize path_to_folder
	and physical_uri_to_folder.
	(new_folder_cb): Add the folder to the physical_uri_to_folder hash
	too.
	(mail_change_notify): Use physical_uri_to_folder to figure out the
	folder from the uri.
	(e_summary_mail_reconfigure): Here as well.

2002-09-26  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-preferences.c (vector_from_folder_list): Remove
	debugging message.

2002-09-26  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-preferences.c (folder_list_from_vector): Do some
	sanity checking so we don't crash miserably as in #28481.

2002-09-26  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-preferences.c: Take out CNN and DebianPlanet, which do
	not seem to work for me.

2002-09-23  Dan Winship  <danw@ximian.com>

	* e-summary-offline-handler.c (impl_goOffline): Pass ev, not &ev
	to CORBA_Object_duplicate since ev is already a pointer.

2002-09-23  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-weather.c (e_summary_weather_get_html): Don't add any
	header if there are no weather stations.  [#15101]
	(make_anchor): Removed unused function.

2002-09-17  Ettore Perazzoli  <ettore@ximian.com>

	* Locations: Add Israel.  [Patch by Sam Popper
	<shmuelp@bigfoot.com>.]

2002-09-13  Dan Winship  <danw@ximian.com>

	* Makefile.am (IDLS, MAIL_GENERATED): Update for Mailer.idl rename

	* e-summary.c, e-summary-mail.c: Likewise

2002-09-05  Anna Dirks  <anna@ximian.com>

	* GNOME_Evolution_Summary.oaf.in.in : Changed the description of the 
	summary page of the settings dialog to be less wordy.

2002-09-04  Ettore Perazzoli  <ettore@ximian.com>

	* component-factory.c (create_component): Pass NULL as
	@unpopulate_folder_context_menu_fn to
	evolution_shell_component_new().

2002-08-29  Dan Winship  <danw@ximian.com>

	* GNOME_Evolution_Summary.oaf.in.in: Oops. Take two.

	* GNOME_Evolution_Summary.oaf.in: Remove this. It's autogenerated.

2002-08-28  Dan Winship  <danw@ximian.com>

	* GNOME_Evolution_Summary.oaf.in: Add an
	evolution:shell_component_launch_order and rename
	evolution:shell_component_icon.

2002-08-28  Jeffrey Stedfast  <fejj@ximian.com>

	* main.c (main): Use e-util/e-proxy.c's e_proxy_init().

2002-08-21  Iain <iain@ximian.com>

	* e-summary-tasks.c (get_todays_uids): Count overdue tasks as tasks
	due today.

2002-08-14  Iain <iain@ximian.com>

	* e-summary-calendar.c (generate_html): Use the default uris for the
	links.
	(e_summary_calendar_init): Get the default uri from bonobo config
	(e_summary_calendar_free): Free default uri.

	* e-summary-tasks.c (generate_html): Use the default uris for the
	links.
	(e_summary_tasks_init): Get the default uri.
	(e_summary_tasks_free): Free default uri.

2002-08-14  Iain <iain@ximian.com>

	* e-summary-tasks.c (sort_uids): Sort the tasks in the correct order.

2002-08-14  Iain <iain@ximian.com>

	* e-summary-tasks.c (get_task_colour): Return the stored task colour.
	(e_summary_tasks_init): Get the colour for overdue and todays tasks
	from the wombat.
	(e_summary_tasks_free): Free the stored colours.

2002-08-12  Iain <iain@ximian.com>

	* e-summary-preferences.c: Removed duff URIs
	(set_selected_folders): Comment out the set_release call, as it's 
	crashing, and I have no idea what it's supposed to do.
	
2002-08-07  Dan Winship  <danw@ximian.com>

	* e-summary-mail.c (update_folder_cb): Only get folder info if
	this is a folder we're displaying.

2002-08-07  Anna Marie Dirks  <anna@ximian.com>

	* e-summary-shown.c (e_summary_shown_init): Added an alignment to
	make button position be the same as the other buttons of this type
	in evo.
	(add_clicked): make this buttons sensitive when there is no proper
	selection
	(remove_clicked): same thing with the button

	* my-evolution.glade: Capitalized "Weather Settings" properly.


2002-07-26  Peter Williams  <peterw@ximian.com>

	* e-summary-mail.c (update_folder_cb): Don't use the folder's path
	as the physical URI; use CORBA Magic (TM) to figure it out.

2002-07-29  Iain Holmes <iain@ximian.com>

	* e-summary-tasks.c (get_task_colour): Get the colour for a task: Red
	if overdue, blue if todays task, black otherwise.
	(generate_html): Get the task colour, and shuffle the HTML around so
	the colour gets preference over the link.

2002-07-29  Iain Holmes <iain@ximian.com>

	* Locations: Fixed typo according to bug #18963

	* Locations.h: Updated.

	* e-summary-tasks.c (e_summary_tasks_get_html): Return on NULL.

2002-07-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-preferences.c (set_selected_folders): Actually pass
	the evolution URI, not the path, in Folder.evolutionUri (since now
	the shell StorageSetView implementation has been fixed to handle
	this field properly).

2002-07-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-preferences.c (set_selected_folders): Set the
	customIconName part to the empty string.  [#27616]
	Also, set_release on the sequence to TRUE.

2002-06-28  Dan Winship  <danw@ximian.com>

	* e-summary-mail.c (e_summary_mail_idle_get_info): Add this, to
	call e_summary_mail_get_info from an idle handler.
	(new_folder_cb, update_folder_cb): Use idle_get_info rather than
	making another corba call from inside the corba handler. (Fixes a
	three-way deadlock between mail, summary, and exchange.)

2002-06-26  Iain <iain@ximian.com>

	* e-summary-rdf.c (layer_find_url): If w == NULL return. Fixes crash
	if RDF has no link tags.

2002-06-26  Iain <iain@ximian.com>

	* Locations: Fix a typo and remove Latvia, cos I couldn't find the
	correct code for it.

	* Locations.h: Regenerated.

2002-06-26  Iain <iain@ximian.com>

	* e-summary-weather.c (e_summary_weather_fill_etable): Count the
	states from 0 up.

	* e-summary-shown.c (e_summary_shown_append): Use -1 instead of the
	children count.

2002-06-26  Iain <iain@ximian.com>

	* component-factory.c (owner_set_cb): Pass the shell.

	* e-summary-mail.c (new_folder_cb): Use the ESummaryPrefsFolder stuff.
	Remove some debugging spew.

	* e-summary-preferences.c (make_initial_mail_list): Make a mail list
	using the ESummaryPrefsFolder stuff.
	(folder_list_from_vector): Given a vector make ESummaryPrefsFolders.
	(vector_from_folder_list): Given ESummaryPrefsFolders, make a vector.
	(e_summary_preferences_restore): Use a new ident.
	(free_folder_list): Free a list of ESummaryPrefsFolders.
	(copy_folder_list): Copy a list of ESummaryPrefsFolders.
	(fill_rdf_etable): Store the RDFInfo struct in the model.
	(fill_mail_etable): Remove.
	(add_dialog_clicked_cb): Cast some stuff and add a new entry.
	(rdf_delete_url_cb): Delete the selected urls.
	(rdf_etable_selection_cb): Change the Delete button depending on what
	rdfs are selected.
	(storage_set_changed): Pass the changed signal to the control.
	(make_property_data): Use the StorageSetView and hook up the new
	button.
	(set_selected_folders): Set the checkboxes  inthe StorageSetView.
	(e_summary_preferences_make_mail_table): Get the StorageSetView
	widget and hook it up.
	(get_folders_from_view): Get the list of checked folders and make
	ESummaryPrefsFolders for them.

	* e-summary-shown.c: Add a selection_changed signal.
	(real_selected_count): Add the path to the selected list.
	(make_list): Make a list from the selection.
	(e_summary_shown_get_selection): Get the selection as a list.

	* my-evolution.glade: Add a Delete New Feed button.

2002-06-21  Iain Holmes <iain@ximian.com>

	* main.c (main): Init GConf, and set the proxy.
	(set_proxy): Get all the proxy stuff and set Soup to use it.
	(proxy_setting_changed): Listen to GConf stuff being changed.
	(init_soup_proxy): Set up GConf to listen to changes in gnome-vfs

2002-06-05  Christopher James Lahey  <clahey@ximian.com>

	* e-summary-shown.c (maybe_move_to_shown, add_clicked,
	remove_from_shown, remove_clicked): Avoid reentrancy during
	e_tree_selection_model_foreach.  Fixes Ximian bug #24987.

2002-05-23  JP Rosevear  <jpr@ximian.com>

	* GNOME_Evolution_Summary.oaf.in.in: correct typo

2002-05-20  Iain Holmes <iain@ximian.com>

	* e-summary-preferences.c (add_dialog_clicked_cb): Add a new summary
	to the All table.
	(make_property_dialog): Hook up the new button.

	* e-summary-shown.c (e_summary_shown_init): Add some spacing.

2002-05-20  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-table.c: Don't show the headers in the folder table.

	* e-summary-shown.c (e_summary_shown_init): Set the spacing to 3.

2002-05-15  Ettore Perazzoli  <ettore@ximian.com>

	* component-factory.c (create_component): Pass NULL as
	@request_quit_fn.

2002-05-14  Christopher James Lahey  <clahey@ximian.com>

	* e-summary-mail.c (folder_gen_html): Use the uri stored in the
	ESummaryMailFolder object here.
	(e_summary_mail_generate_html): Only show email folders if they
	have > 0 unread messages.
	(new_folder_cb): Save the evolutionUri here.

2002-04-08  Iain Holmes <iain@ximian.com>

	* e-summary-shown.c (construct_pixmap_butto): Create a button with a 
	label and a pixmap.
	(e_summary_shown_init): Use the pixmap buttons.

2002-04-08  Iain Holmes <iain@ximian.com>

	* e-summary-mail.c (mail_change_notify): Don't use an ESummary object,
	get the prefs from the global preferences.
	(e_summary_mail_init): Don't connect to the listener.
	(e_summary_mail_free): Don't disconnect the listener.
	(folder_info_pb_changed): Register the storages.
	(lazy_register_storages): Get the property bag, and check if the
	folder-info is ready. If so register the storages, otherwise get the
	propertybag listener and listen for changes.
	(e_summary_folder_inif_folder_store): Listen to changes in the stores
	and register the storages only when the folder info is ready for it.

2002-04-22  Iain Holmes <iain@ximian.com>

	* e-summary-mail.c: Remove the shown and mode bits from the 
	ESummaryMail structure.
	(e_summary_mail_generate_html): USe the folder_store list instead
	of the blank one in mail->
	(new_folder_cb): Allow all mail folders now.
	(update_folder_cb): Get the uri correctly.
	(mail_change_notify): Remove debugging spew.
	(e_summary_mail_reconfigure): Comment out the part that adds a 
	protocol to the front of a uri.
	(insert_path_recur): If there is no toplevel, guess if from the
	folder path. Not sure if it works for everything.
	(add_storage_to_table): Store the whole of the sorted list,
	and resort it every time.
	(make_toplevel): I18n the titles, and remove the debugging.
	(e_summary_mail_fill_list): Store the sortewd list.

	* e-summary_preferences.c (fill_rdf_etable): Create a new entry
	to add to the shown list.

	* e-summary-shown.c (make_table): take a title for the table. 
	Generate the spec from that table.
	(e_tree_model_node_append): Freeze the tree before adding the
	node.
	(e_summary_shown_add_node): Take an expanded boolean.
	
	* e-summary-table.c: Make the SPEC set the width correctly.
	(e_summary_table_add_node): Freeze the table.

	* e-summary-weather.c (is_weather_shown): Search the global_prefs
	to see if the node is shown.
	(e_summary_weather_fill_etable): Set the expanded state on all to
	FALSE except for leaf nodes.. 
	Create a new entry for shown rows.
	
2002-04-08  Dan Winship  <danw@ximian.com>

	* component-factory.c (create_view): Add view_info arg but don't
	do anything with it.

2002-04-06  JP Rosevear  <jpr@ximian.com>

	* GNOME_Evolution_Summary.oaf.in.in: add config_item:priority

2002-04-05  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: dist the relevant xpms

2002-04-04  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: fix substitution typo

2002-03-30  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am: Added support for the ENABLE_SHLIB_COMPONENTS
	conditional.

	* GNOME_Evolution_Summary.oaf.in.in: New.

	* e-summary-mail.c (update_folder_cb): Protect against
	summary->mail being NULL.

	* component-factory.c: Add a shlib factory.
	(create_component): Get a @factory and @data.
	(component_factory_init): Actually make it use a
	BonoboGenericFactory again.

2002-03-29  Ettore Perazzoli  <ettore@ximian.com>

	* GNOME_Evolution_Summary.oaf.in: Add priority.

2002-03-19  Dan Winship  <danw@ximian.com>

	* Makefile.am (evolution_executive_summary_LDADD):
	s/libversit.la/libversit.a/

2002-03-19  Iain Holmes  <iain@ximian.com>

	* component-factory.c: Create a global_preferences structure.
	(create_view): Pass in the global_preferences to the view.
	(create_component): Initialise the preferences.

	* e-summary-factory.[ch] (e_summary_factory_new_control): Take a prefs
	structure and pass it to the view creation.
	
	* e-summary-mail: Remove some debug spew.

	* e-summary-preferences.[ch]: Create a global_preferences structure.
	(e_summary_preferences_init): just return the prefs instead of adding
	a pointer to it.
	(config_control_destroy_cb): Remove the old_prefs stuff.
	(factory_fn): Ditto.

	* e-summary.[ch] (e_summary_init): Don't initialise the preferences
	here.
	(e_summary_new): Take a preferences structure and keep a pointer to
	it.

2002-03-15  Iain Holmes  <iain@ximian.com>

	* Makefile.am: Add the e-summary-shown.[ch] files.

	* e-summary-mail.c: Add entries for the Storages in the private
	 struct.
	 (new_folder_cb): Only allow mail folders that are local or vfolders.
	 Store the StorageInfo that the folder belongs to in the folder struct
	 Add the folder to the list of folders in the storage.
	 (update_folder_cb): Update the signature.
	 (mail_change_notify): Simplify the check to see if we are displaying
	 the folder.
	 (e_summary_mail_register_storage): Take a name argument.
	 Create a StorageInfo structure, connect the signals and add the
	 listener.
	 (e_summary_mail_register_local_storage): Get the local storage from
	 the shell and register it with e_summary_mail_register_storage.
	 (storage_notify): Receive notifications when a new storage is created
	 or destroyed or changed. Stuff only happens when a storage is
	 created, currently.
	 (e_summary_mail_register_storages): Don't register local storage
	 here. Get the StorageRegistry from the corba_shell, create a new
	 BonoboListener and add it to the registry.
	 (e_summary_mail_init): Free a CORBA_Environment.
	 (e_summary_mail_reconfigure): Add a check for the uri being a
	 vfolder.
	 (str_compare): Compare ESummaryMailFolders instead of MailRowDatas.
	 (sort_storages): Compare 2 storage names.
	 (get_parent_path): Special case for the vfolders.
	 (insert_path_recur): Remove the toplevel creation.
	 Create a toplevel node if the uri is a storage toplevel.
	 Special case the name finder for vfolders.
	 Get the number of children in the parent so that we can add the new
	 child after the rest.
	 (add_storage_to_table): For each folder in a storage, add it to the
	 table.
	 (make_toplevel): Generate the toplevel name for each storage.
	 (e_summary_mail_fill_list): For each storage, add the folders.

	 * e-summary-preferences.c (fill_rdf_etable): Put the entries into an
	 ESummaryShown instead of an ESummaryTable.
	 (make_property_dialog): Hook up to the Showns.
	 (add_shown_to_list): Add the locations to the list.
	 (property_box_clicked_cb): Create a new list for the RDFs and
	 weathers.
	 (e_summary_preferences_make_rdf_table): Make an ESummaryShown.
	 (e_summary_preferences_make_weather_table): Make an ESummaryShown.

	 * e-summary-table.c: Use ECellTri.
	 (value_at): Get the right value for the TriCell.
	 (set_value_at): Set the right value for the TriCell.
	 (e_summary_table_init): Use the ECellTri.
	 (e_summary_table_get_num_children): Get the number of children a
	 path has.

	 * e-summary-weather.c (e_summary_weather_fill_etable): Use an
	 ESummaryShown instead of ESummaryTable.

	 * e-summary.[ch]: Store the GNOME_Evolution_Shell in the nonprivate
	 structure.

	 * e-summary-shown.[ch]: Widget to do Add-> <-Remove with two tables.

2002-02-22  Iain Holmes  <iain@ximian.com>

	* e-summary-factory.c: Use the new configure icon.

2002-02-13  Iain Holmes  <iain@ximian.com>

	* Makefile.am: Add the e-cell-tri.[ch] files

	* e-summary-table.c

2002-03-14  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-factory.c (e_summary_factory_new_control): Call
	`e_summary_preferences_register_config_control_factory()'.

	* e-summary-preferences.c: Remove member `box' from struct
	PropertyData.  Added member `config_control'.
	(e_summary_configure): Removed.
	(property_box_destroy_cb): Removed.
	(property_box_clicked_cb): Removed.
	(property_box_apply_cb): New.
	(config_control_destroy_cb): New.
	(factory_fn): New, factory function for the
	EvolutionConfigControl.
	(e_summary_preferences_register_config_control_factory): New.
	(mail_show_full_path_toggled_cb): Invoke ::changed on
	pd->config_control.
	(add_dialog_clicked_cb): Likewise.
	(rdf_refresh_value_changed_cb): Likewise.
	(rdf_limit_value_changed_cb): Likewise.
	(mail_etable_item_changed_cb): Likewise.
	(rdf_etable_item_changed_cb): Likewise.
	(weather_etable_item_changed_cb): Likewise.
	(weather_refresh_value_changed_cb): Likewise.
	(weather_metric_toggled_cb): Likewise.
	(weather_imperial_toggled_cb): Likewise.
	(calendar_one_toggled_cb): Likewise.
	(calendar_five_toggled_cb): Likewise.
	(calendar_week_toggled_cb): Likewise.
	(calendar_month_toggled_cb): Likewise.
	(calendar_all_toggled_cb): Likewise.
	(calendar_today_toggled_cb): Likewise.
	(config_control_destroy_cb): Don't set ->prefs_window to NULL.

	* my-evolution.glade: Renamed "notebook2" to "notebook".  Also
	change its parent into a GtkWindow as libglade seems to have some
	kind of problem with the GnomePropertyBox [glade_xml_get_widget()
	for "notebook" always returned NULL].

	* e-summary.h: Remove member `prefs_window' from `ESummary'.

2002-02-14  Radek Doulik  <rodo@ximian.com>

	* e-summary-tasks.c (sort_uids): fix case when priority is
	undefined and pri_a or pri_b is returned as NULL, also fixes
	memory leak

2002-02-08  Damon Chaplin  <damon@ximian.com>

	* e-summary-calendar.c (e_cal_comp_util_compare_event_timezones): 
	updated to new version from calendar/gui/comp-util.c

2002-02-04  Iain Holmes  <iain@ximian.com>

	* Makefile.am: Add the e-summary-table.[ch] files.

	* e-summary-mail.c: Move the headers.
	(e_summary_mail_get_html): Regenerate the HTML.
	(update_folder_cb): Make the file:// part static as it's the same
	every time.
	(mail_change_notify): Don't recalculate the HTML here.
	(e_summary_mail_reconfigure): Don't add file:// if it's already there.
	(get_parent_path): Given a path, return it's parent.
	(is_folder_shown): Check all the shown folders to see if the given one
	is shown.
	(insert_path_recur): Recursively add a path to the tree.
	(free_path_hash): Free the key of the hash table.
	(e_summary_mail_fill_list): Add all the folders to the tree.

	* e-summary-preferences.c: Move the headers
	(rdf_is_shown): Check if an RDF is shown.
	(fill_rdf_etable): Fill the etable with all the RDFs
	(fill_weather_etable): Fill the weather etable.
	(fill_mail_etable): Ditto (with mail)
	(make_property_dialog): Use the etables.
	(free_property_dialog): Free the new lists.
	(maybe_add_to_shown): Check if the item is clicked and if so add it to
	the list.
	(property_box_clicked_cb): Set all the new properties
	(e_summary_preferences_make_*_table): Make the etables

	* e-summary-rdf.c (e_summary_rdf_update): Don't cancel the message,
	just keep using the previous one.
	
	* e-summary-weather.c (message_finished): Better error message.
	(e_summary_weather_update): Just continue if a message is already
	going.
	(is_weather_shown): Find out if a station is shown.
	(e_summary_weather_fill_etable): Fill the etable.

	* main.c (main): Init the cursors.

	* my-evolution.glade: Add the custom widgets.

2002-02-02  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-offline-handler.c (create_connection_list): Allocate
	the ConnectionList list with the right number of entries instead
	of zero.

2002-02-01  Ettore Perazzoli  <ettore@ximian.com>

	[Fix a crash that can happen if you have opened multiple views of
	the summary and try to go off-line.  This is not the correct fix,
	as the code should really be changed to only use one set of
	connections for all the views, instead of binding the connections
	to the view.]

	* e-summary-factory.c (e_summary_factory_new_control): Call
	`e_summary_offline_handler_add_summary()' instead of
	e_summary_offline_handler_set_summary()'.

	* e-summary-offline-handler.c: Replace member `summary' with
	`summaries' in the ESummaryOfflineHandlerPriv.  This way, instead
	of assuming that there is only one summary, we keep a list of the
	summaries.
	(impl_destroy): Free ->summaries.
	(e_summary_offline_handler_set_summary): Removed.
	(e_summary_offline_handler_add_summary): New.  Add the summary to
	->summaries.  Also, connect to the ::destroy handler so we can
	bookkeep them correctly.
	(create_connection_list): Made private from
	e_summary_offline_handler_create_connection_list().  Get a GSList
	instead of just one summary, and sum up all the connections from
	it.
	(impl_prepareForOffline): Use it.
	(impl__get_isOffline): Return %FALSE if any of the summaries are
	online, %TRUE otherwise.
	(impl_goOffline): Call ::set_online on all the summaries.  Pass
	CORBA_OBJECT_NIL for the progress_listener as it doesn't really
	get used anyways.
	(impl_goOnline): Likewise.  Pass CORBA_OBJECT_NIL, not NULL, for
	the progress CORBA_Object pointer.

2002-01-24  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am: Use EVOLUTION_EXECUTIVE_SUMMARY_CFLAGS and
	EVOLUTION_EXECUTIVE_SUMMARY_LIBS.

2002-01-24  Iain Holmes  <iain@ximian.com>

	* Locations: Applied the Ukraine patch from Leonid Kanter

	* Locations.h: Re-generated to get the UK stations added.

2002-01-22  Iain Holmes  <iain@ximian.com>

	* e-summary-mail (e_summary_mail_reconfigure): Do the list backwards.

	* e-summary-preferences.c (fill_mail_shown_clist): Prepend items.
	(mail_add_clicked_cb): Prepend items.

2002-01-04  Iain Holmes  <iain@ximian.com>

	* e-summary-weather.c (message_finished): Made the Weather message
	more verbose, and say which station data could not be retrieved for.

2002-01-03  Iain Holmes <iain@ximian.com>

	* Makefile.am: Use SOUP_CFLAGS and SOUP_LIBS

	* e-summary-rdf.c: Include soup.h
	(close_callback): Remove.
	(message_finished): Generate the cache and other stuff and redraw.
	(read_callback): Remove.
	(open_callback): Remove.
	(e_summary_rdf_update): Replace gnome-vfs with Soup stuff.
	(e_summary_rdf_count): Replace gnome-vfs with soup.
	(rdf_free): ditto
	(e_summary_rdf_set_online): Ditto

	* e-summary-weather.c: Include soup.h
	(close_callback): Remove.
	(message_finished): Parse all the downloaded html.
	(read_callback): Remove.
	(open_callback): Remove.
	(e_summary_weather_update): Use soup instead of gnome-vfs
	(weather_free): Ditto.
	(e_summary_weather_count): Ditto.
	(e_summary_weather_add): ditto;
	(e_summary_weather_set_online): Ditto.

	* e-summary.c (close_callback): Remove.
	(read_callback): Remove.
	(open_callback): Remove.
	(e_read_file_with_length): Read a file.
	(e_summary_url_requested): Create the images cache. Load the image
	with e_read_file_with_length instead of gnome-vfs.

	* main.c (main): Remove gnome_vfs_init.

	* weather.h: Replace gnome-vfs stuff.

2002-01-03  Iain Holmes <iain@ximian.com>

	* e-summary-offline-handler.c (impl_prepareForOffline): Create an
	empty list if the summary == NULL. Fixes bug 18025

2001-12-20  Ettore Perazzoli  <ettore@ximian.com>

	[Fixes #17377, Evolution doesn't work on multi-depth displays.]

	* main.c (main): Push GdkRGB visual and colormap.

2001-12-19  JP Rosevear  <jpr@ximian.com>

	* e-summary-tasks.c (e_summary_tasks_init): use
	cal_client_open_default_tasks

	* e-summary-calendar.c (e_summary_calendar_init): use
	cal_client_open_default_calendar

2001-12-14  Iain Holmes  <iain@ximian.com>

	* Location-translation-script: shell script to convert Locations to
	Locations.h

	* Locations.h: Translatable file for the weather stations.

	* Makefile.am: Add these files to the dist.

2001-12-14  Iain Holmes  <iain@ximian.com>

	* metar.c: Remove the degree symbol.

2001-12-14  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_init): Create a translatable string for the
	default HTML, that says "Please wait..."

2001-12-14  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_freeze): Check that priv != NULL
	(e_summary_thaw): Check that priv != NULL
	(e_summary_count_connections): Check that summary is a Summary.
	(e_summary_add_connections): Check that the summary is a Summary.
	(e_summary_set_online): Check that the summary is a Summary.

	* e-summary-offline-handler.c (impl__get_isOffline): Only check
	summary if it's not NULL.
	(impl_prepareForOffline): Ditto.
	(impl_goOnline): Only go online if summary isn't NULL.

2001-12-13  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (generate_html): Check that text.value isn't
	NULL.

2001-12-10  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c (e_summary_rdf_init): Set the initial sites to
	Linux Today and Salon.

	* e-summary-preferences.c (make_initial_rdf_list): Ditto

2001-12-10  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (generate_html): Apply damon's change.

2001-12-06  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (rdfs): Remove the perl.com one.

2001-11-14  Iain Holmes  <iain@ximian.com>

	* my-evolution.glade: Spell celsius right.

2001-11-13  Damon Chaplin  <damon@ximian.com>

	* e-summary.c (e_summary_init): make the timezone default to UTC.

2001-11-08  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-preferences.c: Removed `morons.org'.

2001-11-06  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (make_initial_weather_list): Don't free the
	vector. Doh!

2001-10-31  Iain Holmes  <iain@ximian.com>

	* Locations: Removed Frobisher.

2001-10-31  Iain Holmes  <iain@ximian.com>

	* Locations: Fixed a spelling mistake.

2001-10-31  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (make_initial_rdf_list): Put this back.
	(make_initial_weather_list): This too plus fixed a memory leak.
	(vector_from_str_list): Allow a NULL list. Return "" instead of NULL.
	(e_summary_preferences_restore): Allow the display_folders, rdf_urls, 
	and stations to be NULL.

	* e-summary-weather.c (e_summary_weather_init): Revert the last changes
	
	* e-summary-rdf.c (e_summary_rdf_init): Same.

2001-10-30  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (find_name_from_url): Check a for NULL values

2001-10-29  Damon Chaplin  <damon@ximian.com>

	* Makefile.am (evolution_executive_summary_LDADD): use
	libical-evolution.la

2001-10-29  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (make_initial_rdf_list): Set list to NULL.
	(make_initial_weather_list): Set list to NULL.

	* e-summary-weather.c (e_summary_weather_init): Check if the prefs are
	NULL or if the weather stations are NULL.

	* e-summary-rdf.c (e_summary_rdf_init): Check if the prefs or the list
	of news feeds is NULL.

2001-10-29  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (fill_rdf_all_clist): Open the new location.
	If it doesn't exist try the old location.
	(save_known_rdfs): Save to the new location.

2001-10-29  Rodrigo Moya <rodrigo@ximian.com>

	* e-summary-calendar.c (e_summary_calendar_init): retrieve the
	default URI for calendars from the configuration instead of
	hard-coding it

	* e-summary-tasks.c (e_summary_tasks_init): likewise for tasks

2001-10-29  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-preferences.c (make_initial_weather_list): We only
	want KBOS by default.

	* e-summary-weather.c (e_summary_weather_init): We only want KBOS
	by default.

2001-10-27  Jon Trowbridge  <trow@ximian.com>

	* e-summary.c (e_summary_reload): Slow down reload requests
	to work around a bug in gnome-vfs.  Ugly, but it works.
	(Bug #12956)

2001-10-26  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c (open_callback): NULL the handle after a failed 
	open so the offline handler won't think they're still open.
	(e_summary_rdf_set_online): Cancel all the open connections when the
	summary goes offline.
	
	* e-summary-weather.c (open_callback): NULL the handle after a failed
	open so the offline handler won't think they're still open.
	(e_summary_weather_set_online): Cancel all the open connections when the
	summary goes offline.

	* e-summary.c (e_summary_set_online): Call the callback if it's not
	NULL.

2001-10-25  Jon Trowbridge  <trow@ximian.com>

	* e-summary-tasks.c (sort_uids): It is possible for
	start_foo.value to be NULL after a call to
	cal_component_get_dtstart, so we need to check for this before
	dereferencing it. (Bug #13259)

2001-10-24  Iain Holmes  <iain@ximian.com>

	* e-summary-mail.c (e_summary_mail_init): Don't free the mail part.
	Allows the summary to still function without the mail part.

2001-10-22  Anna Marie Dirks  <anna@ximian.com>

	* my-evolution.glade: Changed "Add new feed" to "Add news feed".

2001-10-22  Damon Chaplin  <damon@ximian.com>

	* e-summary-tasks.c (generate_html): set the default timezone on the
	server.

	* e-summary-calendar.c (e_cal_comp_util_compare_event_timezones): 
	update to check for DATE values.
	(uids_to_array): pass the default timezone
	to cal_recur_generate_instances.
	(generate_html): set the default timezone on the server.

2001-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-preferences.c (e_summary_configure): Remove the
	help_button in the property box.

2001-10-19  Iain Holmes  <iain@ximian.com>

	* e-summary-mail.c (e_summary_mail_init): set the summary->mail to
	NULL after freeing it.
	(mail_change_notify): Return if mail == NULL.
	

2001-10-18  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_reload): Only reload the views, don't do an
	entire reconfigure.

	* e-summary-rdf.c (e_summary_rdf_update): Free stuff and update.

	* e-summary-weather.c (e_summary_weather_update): Ditto

2001-10-16  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_new): Don't call a draw.

	* e-summary-mail.c (e_summary_mail_init): Make sure html is NULL.

2001-10-14  Zbigniew Chyla  <cyba@gnome.pl>

	* e-summary-calendar.c (generate_html): Made temporary buffer for
	strftime much bigger (it was too small for Polish month names), added
	missing colon and conversion to UTF-8.

2001-10-12  Iain Holmes  <iain@ximian.com>

	* component-factory.c (component_factory_init): Fix message.

	* metar.c: Fix some names.
	Made the weather descriptions easier on the eyes.

2001-10-11  Dan Winship  <danw@ximian.com>

	* e-summary-mail.c (update_folder_cb): Update the signature to
	match the new signal.

2001-10-10  Iain Holmes  <iain@ximian.com>

	* e-summary-weather.c (e_summary_weather_update): Return a value.
	Only repoll if the summary is online.

	* e-summary-rdf.c (e_summary_rdf_update): Only poll if online

2001-10-10  Iain Holmes  <iain@ximian.com>

	* my-evolution.glade: Set the minimum length of time for updates to 
	5 minutes.

2001-10-06  Carlos Perell Marn <carlos@gnome-db.org>

	* e-summary-preferences.c: Added HispaLinux

2001-10-05  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c (e_summary_rdf_reconfigure): Set the RDF list to
	NULL before destroying it to fix a race condition.

2001-10-04  Iain Holmes  <iain@ximian.com>
	
	* my-evolution.glade: Capitalise stuff

2001-10-03  Iain Holmes  <iain@ximian.com>

	* e-summary-weather.c (e_summary_weather_init): Swap Xiamen for Tokyo

2001-10-01  Damon Chaplin  <damon@ximian.com>

	* e-summary-calendar.c (generate_html): used time_add_day/week/month
	_with_zone() functions rather than the old versions.

	* e-summary.c (alarm_fn): use time_day_end_with_zone ().

	* e-summary-tasks.c (generate_html): removed day_begin and day_end
	since they aren't used, and the calls to time_day_begin/end().

2001-10-02  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (uids_to_array): Handle recurrances correctly.
	(add_recurrances): Function to generate occurrances

2001-10-02  Rodrigo Moya <rodrigo@ximian.com>

	* Makefile.am: add $(BONOBO_GNOME_CFLAGS) to make it compile with
	latest Bonobo, which does not install headers in
	$(gnome_prefix)/include

2001-10-01  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c: Applied patch from Takuo Kitame for using charset
	from the rdf.

2001-09-27  Iain Holmes  <iain@ximian.com>

	* e-summary-tasks.c (generate_html): Pass the summary to
	get_todays_uids.
	(get_todays_uids): Use the timezone stuff and use the due date instead
	of the end time.

2001-09-27  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c: (rdfs[]): Removed the broken RDFs
	(mail_all_select_row_cb): Don't turn on the -> button if the folder is
	already added.
	(rdf_all_select_row_cb): Ditto
	(weather_all_select_row_cb): Ditto

2001-09-26  Iain Holmes  <iain@ximian.com>

	* *.[ch]: Add correct approved copyright notices.

2001-09-25  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_draw): Check if the summary is frozen, if so
	just set redraw_pending.
	(e_summary_freeze): Freeze the summary.
	(e_summary_thaw): Thaw the summary and redraw if needed.

	* e-summary-factory.c (control_activate): Thaw summary.
	(control_deactivate): Freeze summary.

2001-09-25  Iain Holmes  <iain@ximian.com>

	* Misc warnings cleanups.

	* e-summary.c (e_summary_url_requested): Check in the cache for the 
	image before spawning a new thread to download it.
	(close_callback): Create a cache first time, add images to it.

	* e-summary-tasks.c (generate_html): Use task.png

2001-09-21  Dan Winship  <danw@ximian.com>

	* e-summary-weather.c (weather_make_html): Add missing
	width/height tags to the sunny/cloudy/etc images to make the page
	render more smoothly.

2001-09-21  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (generate_html): If the appointment is in a
	different timezone set a timezone icon.

2001-09-20  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences: Add Red Carpet RDF

2001-09-19  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (generate_html): If the appointment has an alarm
	display a bell icon.

2001-09-19  Iain Holmes  <iain@ximian.com>

	* component-factory.c (create_view): Remove spew.
	
	* e-summary-mail.c (e_summary_mail_reconfigure): Get mail info if we
	don't already have it.
	(new_folder_cb): Only get mail info if the folder is being displayed.

2001-09-19  Larry Ewing  <lewing@ximian.com>

	* e-summary-tasks.c (generate_html): be sure to unref the
	component.

2001-09-19  Iain Holmes  <iain@ximian.com>

	* e-summary-tasks.c (e_summary_tasks_protocol): Open a task editor.
	(generate_html): Embed the uid of the task in the url.

	* e-summary-calendar.c (e_summary_calendar_protocol): Open a calendar
	editor.
	(generate_html): Embed the uid of the task in the url.
	
2001-09-19  Larry Ewing  <lewing@ximian.com>

	* e-summary-rdf.c (read_callback): remove redundant if.
	(open_callback): free the previous html even if we get an error.
	(rdf_free): remove redundant null checks.

2001-09-19  Dan Winship  <danw@ximian.com>

	* e-summary.c (read_callback, etc): Hack around gdkpixbuf lossage
	by not trying to display the images incrementall. Instead, just
	wait until we've read the whole file, then display it all at once.
	Prevents garbage when rendering the icons.

2001-09-18  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (weather_remove_clicked_cb): Select the next
	row.
	(rdf_remove_clicked_cb): Select the next row.

2001-09-18  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (mail_remove_clicked_cb): Select the next
	folder for removal.

	* e-summary-mail.c (e_summary_mail_reconfigure): Don't do the hashtable
	thing to get folders. Just iterate through the list lookuping the 
	folders instead. This keeps the required order.

2001-09-18  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (mail_add_clicked_cb): Don't add folders that
	are already in the list

2001-09-18  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c (display_doc): Verbose error reporting.
	(read_callback): Same.
	(open_callback): Same.

2001-09-18  Iain Holmes  <iain@ximian.com>

	* e-summary-weather.c (e_summary_weather_add_location): Append the
	weather locations so they are in the right order.

	* e-summary-tasks.c (generate_html): If the text is null, don't print
	(null). Print "No description" instead.

	* e-summary-rdf.c (e_summary_rdf_add_uri): Append here as well.

	* e-summary-mail.c (maybe_add_to_shown): Append ici.

2001-09-17  Iain Holmes  <iain@ximian.com>

	* e-summary-weather.c (weather_make_html): Don't make the confusing
	url for the city name.

2001-09-17  Iain Holmes  <iain@ximian.com>

	* e-summary-mail.c (mail_change_notify): Only redraw the display when
	we receive a notify about a folder we are displaying

2001-09-17  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (uids_to_array): Correctly use qsort.
	(e_summary_calendar_event_sort_func): Dereference the e1 and e2.

2001-09-17  Federico Mena Quintero  <federico@ximian.com>

	* e-summary.c (e_summary_init): There is no need to initialize the
	alarm system now.

2001-09-14  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (uids_to_array): Create ESummaryCalEvents and 
	put them in an array to get the timezone stuff right.
	(e_summary_calendar_event_sort_func): Sort the array.
	(generate_html): Use the timezone formats of things.

2001-09-13  Iain Holmes  <iain@ximian.com>

	* Locations: Removed duff Norway station

2001-09-13  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c: Fix slashdot problem.

2001-09-10  Dan Winship  <danw@ximian.com>

	Purification.
	
	* e-summary.c (destroy): free the protocol hash.

	* e-summary-rdf.c (tree_walk): plug a leak.

	* e-summary-weather.c (e_summary_weather_init_locations): Don't
	insert duplicates into the hash table.

	* e-summary-mail.c (e_summary_mail_generate_html): free old html
	before setting new

	* e-summary.c (e_summary_draw): free weather and rdf html strings.

	* e-summary-preferences.c (save_known_rdfs): free strings.

2001-09-10  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c: Add Memepool RDF.

2001-09-06  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (e_summary_configure): Don't allow dialogs to
	be opened more than once.
	(property_box_destory_cb): NULL the window var.

2001-09-05  Ettore Perazzoli  <ettore@ximian.com>

	[Fix #958, ShellComponents should not be created by factories, for
	the Summary.]

	* component-factory.c (COMPONENT_FACTORY_IID): Removed.
	(COMPONENT_ID): New.
	(create_component): Renamed from `factory_fn'.  No args.
	(component_factory_init): Create the BonoboObject with
	`create_component' and register it on OAF.

	* GNOME_Evolution_Summary.oaf.in: Remove the
	ShellComponentFactory.

2001-09-05  Iain Holmes  <iain@ximian.com>

	* Locations: Added some Caracas fixes from Mayly Sanchez.

2001-09-05  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_draw): Hack to stop the display jumping to the
	top when it is redrawn.

2001-09-05  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (generate_html): Check if we need to use 24hr
	format. Don't try to do fancy things with the date and time of an
	appointment.
	(locale_uses_24h_time_format): Cut and pasted from calendar.
	(e_summary_calendar_init): Get the 24hour preferences from the calendar.

2001-09-04  Iain Holmes  <iain@ximian.com>

	* Locations: Applied patch from Evert Verhellen to fix the Belgium 
	stations

2001-09-04  Iain Holmes  <iain@ximian.com>

	* my-evolution.glade: Fix some accelerator clashes

2001-09-04  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (add_dialog_clicked_cb): When the feed is 
	added make the Apply button activate.

2001-09-04  Iain Holmes  <iain@ximian.com>

	* metar.c (weather_conditions_string): Don't return '-' if there is no
	condition, as it makes the temperature look negative.

2001-08-27  Ettore Perazzoli  <ettore@ximian.com>

	* e-summary-weather.c (weather_make_html): Make local variable
	`icon_name' const.  Remove unused variable `uri'.

	* e-summary.h: Reformatted in GTK+ style.
	(e_summary_remove_online_connection): Added prototype.

	* e-summary-preferences.c (fill_mail_shown_clist): Constify local
	variable `name'.

	* e-summary-mail.c: #include "e-util/e-path.h".  Updated to match
	the new studlyCapsification in shell/Evolution*.idl.

2001-08-23  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (rdfs): Remove the 4 that don't work.

2001-08-22  Iain Holmes  <iain@ximian.com>

	* e-summary-tasks.c (generate_html): Skip the task if it's completed.

2001-08-22  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (mail_show_full_path_toggled): Set the 
	property box to changed.

2001-08-22  Iain Holmes  <iain@ximian.com>

	* e-summary-mail.c (make_pretty_foldername): If show_full_path is TRUE
	then return the full path. Take in the ESummary as well.
	(folder_gen_html): Pass ESummary to make_pretty_foldername.
	(e_summary_mail_generate_html): Pass the ESummary to folder_gen_html.

	* e-summary-rdf.c (e_summary_rdf_set_online): Take in a 
	GNOME_Evolution_OfflineProgressListener in case we want to do
	individual reporting of rdf's being destroyed.
	(make_connection): Call the RDF Feed a News Feed instead.

	* e-summary-weather.c (e_summary_weather_set_online): Same.

	* e-summary.c (e_summary_set_online): Pass in the 
	GNOME_Evolution_OfflineProgressListener to the set_online callback.

	* e-summary-offline-handler.c (impl_goOffline): Pass the listener to the
	callback.
	(impl_goOnline): Pass NULL for the listener.
	
2001-08-21  Iain Holmes  <iain@ximian.com>

	* my-evolution-html.h: Set the text colour to black.

2001-08-21  Damon Chaplin  <damon@ximian.com>

	* e-summary-calendar.c (generate_html): 
	* e-summary-tasks.c (generate_html): changed the icons. For calendar
	events we use the 'new appointment' icon from the menu. For tasks we
	use the task icon from the ETable - I wasn't sure about using the
	'New Task' icon as it has a tick in it which may make people think it
	is complete.

2001-08-19  Ettore Perazzoli  <ettore@ximian.com>

	* component-factory.c: Change the type from "Summary" to "summary"
	for consistency with the other folder types.

2001-08-17  Zbigniew Chyla  <cyba@gnome.pl>

	* my-evolution/e-summary-rdf.c (make_connection):
	Marked string for translation (connection type).

	* my-evolution/e-summary-weather.c
	(make_url): Split into two functions: make_url and make_anchor.
	(weather_make_html): s/make_url/make_anchor/
	(make_connection): Marked connection type string for franslation,
	assign the real URI to ->hostname (using make_url), not location code.

2001-08-12  Zbigniew Chyla  <cyba@gnome.pl>

	* e-summary-preferences.c (make_initial_weather_list),
	e-summary-weather.c (e_summary_weather_init):
	Don't hardcode the default list of stations, let translators define it
	per locale/country.

2001-08-17  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (weather_all_select_row_cb): Unselect the 
	row if it isn't a leaf node.
	(weather_add_clicked_cb): Return if location == NULL.

2001-08-15  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_draw): Use the US format for dates (Yeeech)

2001-08-15  Iain Holmes  <iain@ximian.com>

	* e-summary.c: s/My Evolution/Summary/

	* e-summary-preferences.c: s/My Evolution/Summary/

	* component-factory.c: s/My Evolution/Summary/

2001-08-13  Iain Holmes  <iain@ximian.com>

	* e-summary-weather.c: Set the default weather stations to Boston (boo)
	and Xiamen (Yey)

2001-08-13  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c: Set the default RDF to CNN

2001-08-13  Jason Leach  <jleach@ximian.com>

	* e-summary-mail.c (e_summary_mail_free): Disconnect our callbacks
	when we are freeing the ESummaryMail.  Fixes #6712.

2001-08-09  Anna Marie Dirks <anna@ximian.com> 
	
	* my-evolution-html.h : added more padding between the vertical
	spacer and the icons for the mail/appointments/tasks summaries.

2001-08-09  Anna Marie Dirks <anna@ximian.com>

        * my-evolution.glade : added accelerators to all useful widgets
	in this file such that this dialog can now be fully navigated from
	the keyboard. 

	* e-summary-preferences.c : changed the construct_pixmap_button
	function to take glade xml, an hbox and pixmap, making it possible
	to use glade to define and change the keyboard accelerators, instead
	of trying to do this in the c code. 

2001-08-06  Damon Chaplin  <damon@ximian.com>

	* e-summary-tasks.c (sort_uids): 
	(get_todays_uids): 
	(generate_html): 
	* e-summary-calendar.c (sort_uids): free the CalComponentDateTime
	and icaltimetype values after finishing with them.

2001-08-03  Jason Leach  <jleach@ximian.com>

	* e-summary-mail.c (update_folder_cb): Callback for the
	EvolutionStorageListener::update_folder signal, so we can update
	mail summaries when they change.  Bug #4686.

2001-08-02  Jason Leach  <jleach@ximian.com>

	* e-summary-calendar.c (generate_html): Use the new and beautiful
	icon from Jakub.

	* e-summary-mail.c (e_summary_mail_generate_html): Ditto.

	* e-summary-tasks.c (generate_html): Ditto.	

2001-07-23  Zbigniew Chyla  <cyba@gnome.pl>

       * e-summary-rdf.c (display_doc): Convert translated string to UTF8.

2001-07-30  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c: Remove the Wipe Trackers references.
	
	* e-summary-rdf.c: Remove the wip trackers as I'm not 100% sure what it
	does, and it didn't work.

	* e-summary.h: Remove the wipe_trackers boolean

	* my-evolution.glade: Remove the wipe trackers and shrink the New Feed
	button

2001-07-30  Iain Holmes  <iain@ximian.com>

	* e-sumary-calendar.c (generate_html): Correct the URL for the links.

2001-07-27  Iain Holmes  <iain@ximian.com>

	* Locations: Add some more German cities from s.kost@webmacher.de.

2001-07-23  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (add_dialog_clicked_cb): Add the new RDF to
	the shown clist as well.

2001-07-23  Iain Holmes  <iain@ximian.com>

	* e-summary-mail.c (e_summary_mail_init): Move the storage register out
	of here into a seperate function.
	(e_summary_mail_register_storages): Register the local storage.
	(e_summary_mail_register_storage): Register a single storage.

2001-07-23  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c: Fix the KDE and Newsforge things. Change the
	KDE rdf to the one that the KDE person told me :)

2001-07-23  Jason Leach  <jleach@ximian.com>

	* e-summary-preferences.c: Update the url (and site name) for the
	KDE rdf.  Bug #5145.

2001-07-21  Ettore Perazzoli  <ettore@ximian.com>

	* component-factory.c: Make the "My Evolution" folder
	non-creatable by setting the `user_creatable' member of
	`EvolutionShellComponentFolderType' to %FALSE.

2001-07-20  Jason Leach  <jleach@ximian.com>

	* e-summary-tasks.c: Revert last changes, URIs are now back to
	original in shell.

2001-07-19  Jason Leach  <jleach@ximian.com>

	* e-summary-tasks.c: Update the evolution:/local/ URI's to
	evolution:/Local Folders/ to go along with todays shell changes.

	* e-summary-mail.c: Ditto.	

	* e-summary-calendar.c: Ditto.
	
2001-07-19  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c (display_doc): Fix HTML

	* e-summary-mail.c (folder_gen_html): correct the folder name.

2001-07-19  Iain Holmes  <iain@ximian.com>

	* my-evolution-html.h: Set the text colour to black. Frank was claiming
	it picked the default colour from the GTK+ theme, and if it was white
	bad things happened.

2001-07-18  Iain Holmes  <iain@ximian.com>

	* e-summary-weather.c (weather_make_html): Remove the (more) link.

	* e-summary.c (e_summary_draw): Don't append NULL to the GString.

	* e-summary-tasks.c: Remove spewage.

2001-07-18  Iain Holmes  <iain@ximian.com>

	* e-summary-weather.c (weather_make_html): Remove spewage.

2001-07-18  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_reconfigure): Reconfigure the tasks.

	* e-summary-tasks.c (generate_html): Obtain todays tasks.
	(get_todays_uids): Make a list of todays uids.

2001-07-18  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (make_property_dialog): Create the image 
	buttons.
	(construct_pixmap_button): Create a box with an image and text.

2001-07-18  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (e_summary_configure): Set the title on the
	window. Just do a g_return_if_fail if the XML file couldn't be loaded.

2001-07-16  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c (display_doc): Nicer error reporting.

	* e-summary-weather.c: Nicer error reporting.

2001-07-13  Iain Holmes  <iain@ximian.com>

	* e-summary-tasks.c: Fix the name of the icon.

2001-07-13  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (mail_add_clicked_cb): Set the property box
	to changed.

2001-07-13  Zbigniew Chyla  <cyba@gnome.pl>

	* e-summary.c (e_summary_draw): Convert the date string to utf8 before
	appending it to HTML.

2001-07-12  Iain Holmes  <iain@ximian.com>

	* metar.c: #include <config.h>

2001-07-12  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_draw): put _() around the date string.

	* metar.c: Put some _() around things.

2001-07-12  Iain Holmes  <iain@ximian.com>

	* my-evolution.glade: Made the weather a single selection clist.

2001-07-11  Iain Holmes  <iain@ximian.com>

	* e-summary-mail.c (e_summary_mail_generate_html): Protect with
	g_return_if_fail

2001-07-11  Iain Holmes  <iain@ximian.com>

	* e-summary.c (destroy): Destroy the alarm.
	(e_summary_init): Init the alarm.
	
	* e-summary-mail.c (free_folder): Don't free the value.

2001-07-11  Iain Holmes  <iain@ximian.com>

	* e-summary.c (destroy): Destroy all the subcomponents.

	* e-summary-rdf.c (e_summary_rdf_free): Free and stop all tranfsers

	* e-summary-weather.c (e_summary_weather_free): Same.

	* e-summary-mail.c (e_summary_mail_free): Same.

	* e-summary-calendar.c (e_summary_calendar_free): Same.

	* e-summary-tasks.c (e_summary_tasks_free): Guess what.

2001-07-10  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c: Correct the Register RDF url.

2001-07-09  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_init): Connect a calendar alarm to be notified
	of when the day changes.

	* Makefile.am: Link with libalarm.a

2001-07-09  Iain Holmes  <iain@ximian.com>

	* e-summary-weather.c (weather_make_html): Get an icon for the weather.

	* metar.[ch] (icon_from_weather): Work out what icon for a specific
	weather type.

2001-07-09  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c (tree_walk): Fix HTML so it doesn't give the big black
	line

2001-07-09  Iain Holmes  <iain@ximian.com>

	* e-summary-tasks.c (generate_html): Fix same HTML bug as in calendar.

2001-07-09  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (generate_html): Show varying times depending
	on how soon the appointment is. 

2001-07-09  Iain Holmes  <iain@ximian.com>

	* e-summary-calendar.c (generate_html): Fix up the HTML so having 
	appointments doesn't mess up the display. Set the correct length of
	time to show appointments.

2001-07-09  Iain Holmes  <iain@ximian.com>

	* e-summary-tasks.c (generate_html): Make the tasks switch to the
	tasks folder when you click on them.

2001-07-09  Kjartan Maraas  <kmaraas@gnome.org>

	* e-summary-preferences.c: Added #include <config.h> to get
	translations working.
	
2001-07-06  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (str_list_from_vector): Change the delimiter
	(vector_from_str_list): Change the delimiter.
	(fill_mail_all_clist): Fill the mail folder clist.
	(fill_mail_shown_clist): Use nicer names.
	(mail_add_clicked_cb): Add folders to the shown list.
	
	* e-summary-mail.c (e_summary_mail_fill_list): Flatten the hashtable
	into the CList.
	(e_summary_mail_uri_to_name): Get the pretty name for a uri.

2001-07-06  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (fill_rdf_shown_list): Attach data
	(rdf_add_clicked_cb): Allow multiple rows to be removed.
	(rdf_remove_clicked_cb): Use the data.

	* my-evolution.glade: Allow multiple selection in the RDF all clist.
	Only allow single selection in the shown rdf list.

2001-07-05  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (rdf_new_url_clicked_cb): Change RDF to
	news feed.

2001-07-05  Iain Holmes  <iain@ximian.com>

	* my-evolution.glade: Replace a table with a vbox so that the text
	of the radio buttons can be clicked. Change RDF to News Feed

2001-07-05  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (add_dialog_clicked_cb): Fix warning
	(fill_rdf_shown_clist): Fix warning.
	(calendar_one_toggled_cb): Set preferences to the right toggle button.
	(calendar_five_toggled_cb): Ditto
	(calendar_week_toggled_cb): Ditto ditto
	(calendar_month_toggled_cb): Ditto dotto
	(calendar_all_toggled_cb): Set the amount of Tasks to be shown
	(calendar_today_toggled_cb): Ditto
	(make_property_dialog): Hook up the calendar radio buttons.
	(e_summary_preferences_restore): Pass NULL as opt_default, not &ev.

2001-07-05  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (e_summary_preferences_restore): Add
	My-Evolution to the namespace.
	(e_summary_preferences_save): Ditto.

2001-07-05  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (e_summary_preferences_restore): Re-enabled.
	Bonobo-conf doesn't seem to like NULL for opt_ev.

2001-07-03  Iain Holmes  <iain@ximian.com>

	* e-summary-prefences.c (e_summary_preferences_restore): Disabled until
	memory corruption thing is found.

	* my-evolution.glade: Fix the radio button problem.

2001-07-03  Iain Holmes  <iain@ximian.com>

	* e-summary-factory.c: Fixed the Bonobo warning.

2001-07-03  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (e_summary_preferences_restore): Ditch
	gnome-config and replace it with bonobo-conf.
	(e_summary_preferences_save): Ditto.

	* e-summary-factory.c: Use the new print.png icon.

	* Makefile.am: Add bonobo conf CFLAGS and LIBS

2001-07-03  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_set_online): Return if summary == NULL.
	(e_summary_add_connections): Return NULL if summary == NULL.
	(e_summary_count_connections): Return 0 if summary == NULL.

2001-07-02  Iain Holmes  <iain@ximian.com>

	* e-summary-tasks.[ch]: New files for tasks.

	* e-summary.c: USe the tasks.

2001-07-02  Iain Holmes  <iain@ximian.com>

	* Makefile.am: Add the glade files to the EXTRA_DIST

2001-07-02  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am (evolution_executive_summary_SOURCES): Add
	`e-summary-preferences.h'.

2001-06-30  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (fill_rdf_all_clist): Load the URLs from a
	file.
	(save_known_urls): Save the known URLs.
	(add_dialog_clicked_cb): Close the dialog on Cancel. Save the URLs on
	Ok.
	(rdf_new_url_clicked_cb): Add some labels and an entry for the name.

2001-06-30  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (fill_rdf_all_clist): Fill with names
	instead of URLs.
	(find_name_for_url): Given a URL find a name for it if we know it.
	(rdf_add_clicked_cb): Add the name to the clist and the url to the
	list.

2001-06-30  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (add_dialog_clicked_cb): Add the new url to
	the list.
	(rdf_new_url_clicked_cb): Create a dialog and allow the user to add
	new urls.

2001-06-30  Iain Holmes  <iain@ximian.com>

	* e-summary-rdf.c (tree_walk): Remove spewage.
	(e_summary_rdf_count):
	(e_summary_rdf_add):
	(make_connection):
	(e_summary_rdf_set_online): Callbacks for the online_handler stuff.
	(e_summary_rdf_init): Setup the offline handler stuff.
	(close_callback): Update the number of onlines there are.

	* e-summary-weather.c (close_callback): Update the number of onlines.
	(e_summary_weather_count): Count the number of active downloads.
	(e_summary_weather_add): Make a list of active downloads.
	(make_connection): Make connection data.
	(e_summary_weather_set_online): Set if the component is online or not.
	(e_summary_weather_init): Setup the offline handler stuff.

	* e-summary.c (e_summary_count_connections): Call all the callbacks
	in the various modules that have online data and count the number of
	connections.
	(e_summary_add_connections): Make a list of them all.
	(e_summary_set_online): Set the online status for each registered
	module.
	(e_summary_add_online_connection): Register a new module.

	* e-summary-offline-handler.[ch]: BonoboXObject implementing the
	GNOME::Evolution::Offline interface.

	* e-summary-factory.c (factory_fn): Create an offline handler.

	* Makefile.am: Compile e-summary-offline-handler.[ch]

2001-06-30  Zbigniew Chyla  <cyba@gnome.pl>

	* e-summary-calendar.c (generate_html):
	Marked strings for translation + conversion to utf8.

	* e-summary-mail.c
	Added missing #include <config.h>
	(e_summary_mail_generate_html):
	Marked strings for translation + conversion to utf8.

	* e-summary-weather.c
	(e_summary_weather_get_html, open_callback):
	Marked strings for translation + conversion to utf8.
	(weather_make_html): Fixed leaks.

	* e-summary-rdf.c
	(tree_walk): Fixed leaks.
	(read_callback): Marked strings for translation.

2001-06-29  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_draw): Resurrect the hack to stop GtkHTML from
	returning to the top when it's redrawn.

2001-06-29  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c (property_box_destroy_cb): Hook up the saving.
	(str_list_from_vector): Fix memory corruption.
	(e_summary_preferences_save): Write the preferences out to disk.
	I *always* forget that.

	* e-summary-mail.c (e_summary_mail_init): Init ->shown to NULL.
	
2001-06-29  Iain Holmes  <iain@ximian.com>

	* e-summary-preferences.c: Do everything preferences related.

	* my-evolution.glade: Glade file for the preferences box.

	* e-summary-calendar.c (e_summary_calendar_reconfigure): Stub for later

	* e-summary-calendar.h: Some enums for settings.
	
	* e-summary-mail.c (folder_gen_html): Change the prototype so it
	doesn't work as a hash table foreach function.
	(new_folder_cb): Fix typo in comment :)
	                 Create a list of folders we display.
	(remove_folder_cb): Remove the folder from the display folder list.
	(maybe_add_to_shown): Hash table foreach function to create a display
	                      folder list.
	(e_summary_mail_reconfigure): Recreate the mail HTML.

	* e-summary-rdf.c (tree_walk): Obey preferences.
	(e_summary_rdf_update): Separate the updating and downloading logic.
	(e_summary_rdf_init): Start an updating timeout.
	(e_summary_rdf_reconfigure): Recreate the RDF html.

	* e-summary-weather.c (e_summary_weather_update): Separate the updating
	and downloading logic.
	(e_summary_weather_init): Start timeout.
	(e_summary_weather_code_to_name): Convert code to location name.
	(e_summary_weather_ctree_fill): Fill a CTree with the location data.
	(e_summary_weather_reconfigure): Regenerate the HTML.

	* e-summary.c (e_summary_init): Create the preferences.
	(e_summary_reconfigure): Reconfigure the whole summary.
	
	* metar.c: Obey preferences.

2001-06-27  Iain Holmes  <iain@ximian.com>

	* e-summary-factory.c: Add the pixmaps to the menus.
	Add a new menu item for the configuration stuff.

2001-06-27  Ettore Perazzoli  <ettore@ximian.com>

	* component-factory.c (factory_fn): Pass NULL as the
	@external_uri_schemas argument to
	`evolution_shell_component_new()'.

2001-06-21  Rodrigo Moya <rodrigo@ximian.com>

	* Makefile.am: added libwombat to LDADD

2001-06-15  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: Get weather.h disted
	
2001-06-15  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: Fix includes so that libical need not be installed 

2001-06-14  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: add my-evolution-html.h to the sources

2001-06-13  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: Make e-summary-type.h a source so it gets disted

2001-06-08  Iain Holmes  <iain@ximian.com>

	* e-summary.c (e_summary_init): Allow horizontal scrollbars.
	
	* e-summary-weather.c (e_summary_weather_init): Change the name of the	
	protocol registered.
	(weather_make_html): Use the weather protocol instead of more.
