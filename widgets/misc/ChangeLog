2004-04-28  Not Zed  <NotZed@Ximian.com>

	* e-system-errors.xml.in: holder for system errors.

	* test-error.c: helper to show an error message/test it.

	* e-error.[ch]: Api for disk-based, hig-compliant error messages
	and query boxes.

2004-04-19  Jeffrey Stedfast  <fejj@ximian.com>

	* e-info-label.c (e_info_label_new): Updated to sue E_ICON_SIZE enums.

2004-04-19  Rodney Dawes  <dobey@ximian.com>

	* e-info-label.c (e_info_label_new): Update to use EIconFactory to
	get the filename for the component icons using the icon theme

2004-04-19  Michael Terry  <mike@mterry.name>

	* e-combo-buddon.c:
	* e-url-entry.c: Update these to use EIconFactory and GtkImages
	directly instead of GdkPixmaps

2004-04-09  Rodney Dawes  <dobey@ximian.com>

	* e-charset-picker.c: Include gtkhbox.h in here to avoid the warnings
	(activate_other):
	(e_charset_picker_dialog): Make these dialogs be more HIG-compliant
	* e-filter-bar.c (do_advanced):
	(menubar_activated): Make these dialogs be more HIG-compliant

2004-04-08  Not Zed  <NotZed@Ximian.com>

	* e-info-label.c (e_info_label_set_info): ugh, fix some last
	minute changes which broke shit.

	* e-info-label.[ch]: A widget to show component info for the
	current component/view.

2004-04-07  Jeffrey Stedfast  <fejj@ximian.com>

	* e-multi-config-dialog.c: Updated for changes to e-config-page.c
	(init): Removed the OK and Apply buttons.

	* e-config-page.c (e_config_page_apply): Removed.
	(e_config_page_is_applied): Removed.
	(e_config_page_changed): Removed.

2004-04-01  Dan Winship  <danw@ximian.com>

	* e-url-entry.c (init): Make the button initially insensitive.
	Connect to the entry's "changed" signal.
	(entry_changed_cb): sensitize the button iff the entry is
	non-empty
	(button_clicked_cb): simplify a bit by using gtk_entry_get_text
	rather than gtk_editable_get_chars.

2004-04-01  Jeffrey Stedfast  <fejj@ximian.com>

	* e-charset-picker.c (e_charset_picker_new): Create a new class
	for "Western European, New" to fix a translation issue.

2004-03-31  Not Zed  <NotZed@Ximian.com>

	* e-filter-bar.c (menubar_activated): start the rule editor with
	the right label.

2004-03-26  Rodney Dawes  <dobey@ximian.com>

	* e-multi-config-dialog.c (init): Remove the dialog separator
	Set the border widths of the dialog's vbox and action area to be more
	HIG-compliant
	Set the border width of the dialog's child to 12 for HIG-compliance

2004-03-15  JP Rosevear  <jpr@ximian.com>

	* e-calendar-item.c (e_calendar_item_class_init): change arg name
	(e_calendar_item_init): ditto
	(e_calendar_item_get_arg): ditto
	(e_calendar_item_set_arg): ditto
	(e_calendar_item_preserve_day_selection): set the selection day to
	the given selection
	(e_calendar_item_set_first_month): use above to preserve selected
	day of week

	* e-calendar-item.h: change field name

2004-03-13  Trent Lloyd  <lathiat@sixlabs.org>

	* e-search-bar.c (remove_bonobo_menus): move function above
	setup_bonobo_menus, fixes implicit declaration.

2004-03-12  Kidd Wang  <kidd.wang@sun.com>

	* e-dateedit.c (create_children): enlarge the text box to
	accomodate the time info in different locales.

2004-03-11  Jeffrey Stedfast  <fejj@ximian.com>

	Fix for bug #55267.

	* e-filter-bar.c (set_property): Use efb->setquery properly (set
	to TRUE before calling set_item_id and FLASE afterwards). Also
	setquery to TRUE before emitting the "search-activated" signal so
	that we don't run the callback for the signal we are emitting.

2004-03-02  Jeffrey Stedfast  <fejj@ximian.com>

	* e-filter-bar.c (set_property): Emit the "search-activated"
	signal. Fixes bug #55054.

2004-02-26  Rodney Dawes  <dobey@ximian.com>

	* e-cell-renderer-combo.c (ecrc_get_size):
	* e-dateedit.c (create_children):
	* e-dropdown-button.c (e_dropdown_button_construct): Create the
	arrows in these widgets as GTK_SHADOW_NONE, since the default arrow
	type in GTK+ 2.x is flat triangle arrows, and shadow types are
	generally ignored for arrows anyway, and so we don't look ugly with
	themes that handle shadow types on arrows correctly

2004-02-26  Bill Zhu <bill.zhu@sun.com>

	* e-search-bar.c (setup_bonobo_menus): Before Update the bonobo ui
	component, remove it first.

	Fixes #54788

2004-02-11  Rodney Dawes  <dobey@ximian.com>

	* e-multi-config-dialog.c (impl_response): Change the filename and
	section that we pass to gnome_help_display_desktop so that the help
	browser displays the documentation correctly

2004-02-10  Rodney Dawes  <dobey@ximian.com>

	* e-multi-config-dialog.c (init): Add a Help button
	(impl_response): Handle the Help button and open the documentation

	Fixes #30681

2004-02-05  Rodney Dawes  <dobey@ximian.com>

	* e-task-bar.c: Don't show the task label by default

2004-02-03  Dan Winship  <danw@ximian.com>

	* e-activity-handler.c: 
	* e-activity-handler.h: 
	* e-task-bar.c: 
	* e-task-bar.h: 
	* e-task-widget.c: 
	* e-task-widget.h: Moved here from shell/, since they are now used
	only by the components, not the shell itself.

	* Makefile.am (widgetsinclude_HEADERS,
	libemiscwidgets_la_SOURCES): add new files

2004-02-02  Chris Toshok  <toshok@ximian.com>

	* e-image-chooser.c (set_image_from_data): set
	image_buf/image_buf_size here instead of in all callers.  also
	emit the "changed" signal here.
	(image_drag_data_received_cb): remove the copying to image_buf and
	emitting of "changed" from here.
	(e_image_chooser_set_from_file): only g_free (data) here if
	set_image_from_data failed.
	(e_image_chooser_set_image_data): copy the image data we're passed
	before calling set_image_data.  free it if rv == FALSE.

2004-01-30  Chris Toshok  <toshok@ximian.com>

	* e-image-chooser.c (e_image_chooser_init): add an alignment
	around the image.  This might not be enough.  hrm.
	(set_image_from_data): handle the case where there's no image
	(image_height == image_width == 0).
	(e_image_chooser_get_image_data): new function.
	(e_image_chooser_set_image_data): new function.

	* e-image-chooser.h: add prototypes for set/get_image_data.

2004-01-30  Chris Toshok  <toshok@ximian.com>

	* e-image-chooser.[ch]: abstract out the drag and droppable image
	widget from the contact list editor and stick it here.  There's
	some code for a "Browse..." button here but it's not enabled.

	* Makefile.am (widgetsinclude_HEADERS): add e-image-chooser.h.
	(libemiscwidgets_la_SOURCES): add e-image-chooser.c
	
2004-01-30  Jeffrey Stedfast  <fejj@ximian.com>

	* e-filter-bar.c (get_property): Only save the search-bar state OR
	the filter-bar state - decided based on what the search is. If the
	search is an advanced search, then save the filter-bar state,
	otherwise save the search-bar state.
	(set_property): Only need to restore the first state we find
	(filter-bar vs search-bar). If we are restoring filter-bar state,
	set efb->setquery to TRUE and then set the item_id to
	E_FILTERBAR_ADVANCED_ID.

2004-01-29  Jeffrey Stedfast  <fejj@ximian.com>

	* e-filter-bar.c (option_changed): Don't call efb->config() if the
	current_query is NULL.

2004-01-28  Jeffrey Stedfast  <fejj@ximian.com>

	* e-search-bar.c (impl_get_property): Same.

	* e-filter-bar.c (get_property): Use
	g_value_set_string_take_ownership() instead of
	g_value_take_string() since we need snaps to work with glib-2.0
	earlier than 2.3.x.

2004-01-28  Jeffrey Stedfast  <fejj@ximian.com>

	* e-filter-bar.c: Added a new property "state" which is READ-WRITE
	so that we can save/restore state in the mailer code if we want
	to. Sort of a work-in-progress toward fixing bug #53195.
	(class_init): Ported to use the GObject property stuff instead of
	the deprecated GtkArg stuff.
	(get_property): Ported from impl_get_arg().
	(set_property): New object::set_property implementation to set the
	query state.

2004-01-24  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c (cell_toggled_callback): if the source is
	primary, don't allow it to be un-selected

2004-01-20  Rodney Dawes  <dobey@ximian.com>

	* e-combo-button.c (paint): Be even more exactly like the GtkButton
	painting stuff

	Fixes #52988

2004-01-20  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c (rebuild_model): set a primary selection if
	there is one before the rebuild
	(e_source_selector_set_primary_selection): block the signals when
	clearing the tree selection to make the op atomic; emit the
	selection_changed signal if a hidden selection is not currently
	selectecd

2004-01-20  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c (find_source_iter): provide parent iter
	in/out arg
	(test_collapse_row_callback): use priv shortcut
	(e_source_selector_select_source): pass parent iter
	(e_source_selector_unselect_source): ditto
	(e_source_selector_peek_primary_selection): return the right thing
	if the primary selection is currently hidden
	(e_source_selector_set_primary_selection): set the primary
	selection properly if the source node is currently hidden

2004-01-20  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c (clear_saved_primary_selection): util
	routine to clear the row reference to the saved primary selection
	(find_source_iter): unref the model data retrieved
	(rebuild_existing_cb): ditto
	(toggle_cell_data_func): ditto
	(text_cell_data_func): ditto
	(selection_func): ditto; clear the saved primary selection if
	something else is selected
	(cell_toggled_callback): ditto
	(test_collapse_row_callback): clear the toggled_last flag
	(row_expanded_callback): once we've restored the saved primary
	selection, clear it
	(selector_button_press_event): unref the model data
	(impl_dispose): use clear_saved_primary_selection
	(init): the store column holds object not pointer type
	(e_source_selector_peek_primary_selection): unref the model data

2004-01-20  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c (test_collapse_row_callback): check if the
	collapsing node has its child selected, if so take a row reference
	to remember the selection
	(row_expanded_callback): check if the expanding node has the saved
	primary selection under it and re-select if so
	(init): listen for signals
	(impl_dispose): free the primary selection

2004-01-19  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c (create_rebuild_data): create the data
	structure for rebuilding the model
	(free_rebuild_data): free it
	(rebuild_existing_cb): check for the sources that are still
	existing or deleted
	(rebuild_model): do incremental updates
	(selection_func): if the last thing we did was toggle, we don't
	actually want to highlight and if the source is not checked, check
	it
	(cell_toggled_callback): indicate that a toggle just occurred
	(init): initial toggled last to false	
	(e_source_selector_set_primary_selection): set some preconditions

	Fixes #51787
	
2004-01-19  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c 	(cell_toggled_callback): indicate that a toggle just occurred

2004-01-19  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c 

	(selector_button_press_event): when right clicking, make sure the
	calendar is highlighted and that groups can't be right clicked on

2004-01-14  Rodney Dawes  <dobey@ximian.com>

	* e-expander.[ch]: Fix remaining usages of GTK_*EXPANDER* defines

2003-12-22  Rodney Dawes  <dobey@ximian.com>

	Fix for bug #46349
	
	* e-combo-button.c: Use the appropriate style painting for a
	button widget, since we are a button

2003-12-18  Harry Lu  <harry.lu@sun.com>

	* e-cell-date-edit.c: (e_cell_date_edit_do_popup): call
	gdk_window_focus() so that keyboard works correctly.

2003-12-04  Harry Lu <harry.lu@sun.com> 

	Fix for bugzilla bug #51624 and #51627.

	* e-calendar-item.c: (e_calendar_item_selection_add_days):
	set the date to the first day of the month so that user can use
	keyboard's arrow key to select a date.
	(e_calendar_item_set_selection_if_emission): only set selection_changed
	if emission is TRUE.
	* e-calendar.c: (e_calendar_init): add back the "clicked" handler so
	that user can use keyboard to click the button.
	 (e_calendar_start_auto_move): no need to move since it is already 
	handled by the clicked handler
	(e_calendar_on_prev_clicked), (e_calendar_on_next_clicked): move the 
	month here.
	* e-dateedit.c: (e_date_edit_show_date_popup): use gdk_window_focus 
	instead of gdk_keyboard_grab so that the focus won't lost if user click
	the button with keyboard.
	(hide_date_popup): no need to call gdk_keyboard_ungrab.

2003-12-02  Ettore Perazzoli  <ettore@ximian.com>

	* e-source-selector.c (init): Set the mode on the text cell
	renderer to GTK_CELL_RENDERER_MODE_ACTIVATABLE so clicking on the
	text doesn't change the status of the checkbox.  [Many thanks to
	Jonathan Blandford for telling me how to do this!]

2003-12-01  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c (class_init): list the signal args properly

2003-11-30  ERDI Gergo  <cactus@cactus.rulez.org>

	* e-calendar.c: canned the _clicked handlers as those make it
	impossible to move just one month at a time

2003-11-30  Ettore Perazzoli  <ettore@ximian.com>

	* e-util-marshal.list: Add NONE:POINTER.

	* test-source-option-menu.c (source_selected_callback): New
	callback to test the "source_selected" signal.
	(on_idle_create_widget): Connect.

	* e-source-option-menu.c: Add "source_selected" signal.
	(select_source): Assume source != NULL and emit "source_selected".

2003-11-30  Ettore Perazzoli  <ettore@ximian.com>

	* test-source-option-menu.c: New test.

	* e-source-option-menu.h: New.
	* e-source-option-menu.c: New.

2003-11-23  ERDI Gergo  <cactus@cactus.rulez.org>

	* e-expander.c: Added the late eggexpander
	
	* e-expander.c (e_expander_button_release): Emit 'activate' signal when
	appropriate
	

2003-11-17  Charles Zhang  <charles.zhang@sun.com>

	* e-search-bar.c(add_button): allow new lable with mnemonic
	(e_search_bar_construct): alter lable name. [50810]

2003-11-16  JP Rosevear <jpr@ximian.com>

	* e-source-selector.c (e_source_selector_set_primary_selection):
	use find_source_iter and get the selection from the right spot
	(find_source_iter): util function to find the iter given the
	source
	(e_source_selector_select_source): signal that the model changed
	(e_source_selector_unselect_source): ditto

2003-11-14  JP Rosevear <jpr@ximian.com>

	* e-source-selector.h: include e-source stuff from e-d-s

	* Makefile.am: use new cflags/libs to build
	
2003-11-13  Bolian Yin <bolian.yin@sun.com>

	* e-calendar-item.c: remove a declaration of a deleted func.

2003-11-12  JP Rosevear <jpr@ximian.com>

	* e-calendar-item.c (e_calendar_item_class_init): a canvas item
	does not inherit from gtkwidget

2003-11-11  Bolian Yin <bolian.yin@sun.com>
                                                                                
        Fixes #50538
                                                                                
        * e-calendar-item: make e_calendar_item_normalize_date public func.
           add "selection_preview_changed" signal.
           move some definition of constants to .h
                                                                                
2003-11-10  Ettore Perazzoli  <ettore@ximian.com>

	* e-source-selector.c (e_source_selector_new): Expand all the
	nodes.

2003-11-07  JP Rosevear <jpr@ximian.com>

	* Makefile.am: make sure the marshal stuff is in the sources and
	remove the built files when disting

2003-10-28  Rodrigo Moya <rodrigo@ximian.com>

	* e-source-selector.c (class_init): fill_popup_menu signal has
	2 arguments.

2003-10-28  Rodrigo Moya <rodrigo@ximian.com>

	* e-source-selector.[ch]: added "fill_popup_menu" signal, to
	allow the addition of new items to the popup menu.
	(class_init): create new signal.
	(init): connect to "button_press_event" for the tree view.
	(selector_button_press_event): callback for "button_press_event".
	(e_source_selector_selection_shown): use g_return_val_if_fail.

2003-10-22  Dan Winship  <danw@ximian.com>

	* e-bonobo-widget.[ch]: Remove these (unused since 1.2)

2003-09-30  Mike Kestner  <mkestner@ximian.com>

	* e-cell-renderer-combo.* : new, treeview renderer for combo cells
	* e-combo-cell-editable.* : new, GtkCellEditable for combo cells
	* Makefile.am : build the new files

2003-08-18  Ettore Perazzoli  <ettore@ximian.com>

	* e-source-selector.c (e_source_selector_selection_shown)
	(e_source_selector_show_selection): Add precondition.

2003-08-18  Ettore Perazzoli  <ettore@ximian.com>

	* test-source-selector.c (on_idle_create_widget): Add a
	checkbutton to the test window for toggling the checkboxes on and
	off.  Also, put the list in a scrolled window and set a default
	size for the main window.
	(check_toggled_callback): Callback for the checkbutton.

	* e-source-selector.c: New member checkboxes_shown in struct
	ESourceSelectorPrivate.
	(init): Set to TRUE.
	(e_source_selector_show_selection): New.
	(e_source_selector_selection_shown): New.
	(toggle_cell_data_func): Don't show the toggle if checkboxes_shown
	is FALSE.

2003-08-17  Ettore Perazzoli  <ettore@ximian.com>

	* e-source-selector.c: New signal "primary_selection_changed",
	removed members list_changed_callback_id and
	selection_changed_callback_id in ESourceSelectorPrivate.
	(rebuild_model): If the new set of selected sources is smaller
	than the old one, emit "selection_changed".
	(e_source_selector_peek_primary_selection): New.
	(e_source_selector_set_primary_selection): New.
	(selection_changed_callback): New callback for the "changed"
	signal on our associated GtkTreeSelection.
	(init): Connect.
	(impl_dispose): Disconnect.
	(setup_model): Use signal_connect_object() instead of saving the
	ID.

2003-08-15  Ettore Perazzoli  <ettore@ximian.com>

	* e-source-selector.c (cell_toggled_callback): Call
	gtk_tree_model_row_changed() to let the model know that we changed
	the data.

2003-08-15  Ettore Perazzoli  <ettore@ximian.com>

	* test-source-selector.c: New test program.

	* e-source-selector.c: New file.
	* e-source-selector.h: New file.

2003-07-23  Dan Winship  <danw@ximian.com>

	* Makefile.am: use EVO_MARSHAL_RULE

	* e-combo-button.c (create_empty_pixmap_widget): Create the pixbuf
	from empty.xpm rather than just calling gdk_pixbuf_new(), which
	doesn't actually initialize the pixel data.

	* e-messagebox.c: Remove this, since it claims to be deprecated,
	and nothing is actually using it any more.
	
	* Makefile.am: Remove e-messagebox.[ch]

2003-07-11  Federico Mena Quintero  <federico@ximian.com>

	* e-dateedit.c (e_date_edit_mnemonic_activate): Added a handler
	for GtkWidget::mnemonic_activate().

	* e-url-entry.c (mnemonic_activate): Likewise.

2003-07-09  Federico Mena Quintero  <federico@ximian.com>

	* e-url-entry.c (destroy): Chain to the parent handler.  Fixes #45236.

2003-06-23  Ettore Perazzoli  <ettore@ximian.com>

	* e-search-bar.c (set_menu): Translate the text.  [#45112]

2003-06-18  Suresh Chandrasekharan  <suresh.chandrasekharan@sun.com>

	* e-charset-picker.c: Fix for #45082: GB18030 BIG5HKSCS and EUC-TW 
	charsets not supported in evolution mail

2003-06-17  Jeffrey Stedfast  <fejj@ximian.com>

	* e-charset-picker.c (e_charset_picker_bonobo_ui_populate): Don't
	use the charset class in the menu label if it is 'Unknown'.
	(e_charset_picker_bonobo_ui_populate): For user-defined charsets,
	just use the name of the charset rather than "Unknown".
	(add_charset): Don't escape _'s anymore, this seems to not be
	needed int gtk2.
	(add_other_charset): g_strdup() the charset name. Fixes bug
	#43917.

2003-06-11  Larry Ewing  <lewing@ximian.com>

	* e-search-bar.c (impl_get_property): take ownership of the duped
	string.

