2001-03-04  Damon Chaplin  <damon@ximian.com>

	* e-cell-date-edit.c: pretty much working now.

2001-03-01  Not Zed  <NotZed@Ximian.com>

	* e-filter-bar.c: New type of search bar that interacts with
	filter contexts to save filters etc.  Still probably needs a
	little cleanpu.

2001-02-28  Not Zed  <NotZed@Ximian.com>

	* e-search-bar.c (add_dropdown): Save the dropdown menu in the
	struct too.  Sigh, this is only so we can scan its content later,
	ick.
	(e_search_bar_set_menu_sensitive): New function to se tthe
	sentisitivty of menyu items based on id.
	(find_id): New function to find the row and widget for a specific
	id.
	(add_option): Renamed to set_option.
	(add_dropdown): Renamed to set_dropdown.
	(add_dropdown): ?New function to add a single item.
	(set_dropdown): Call add_dropdown to add each item.
	(e_search_bar_add_menu): New public function to add a single item.

2001-02-27  Not Zed  <NotZed@Ximian.com>

	* Makefile.am (libemiscwidgets_a_SOURCES): Added filter-bar.[ch].

	* e-search-bar.c (class_init): Init virtual functions.
	(e_search_bar_set_option):
	(e_search_bar_set_menu): virtualise calling.
	(e_search_bar_construct): Call virtual functions to setup menus.

	* e-search-bar.h (struct _ESearchBarClass): Virtualise
	add_dropdown/add_option, so certain base options can be created.

2001-02-25  Damon Chaplin  <damon@ximian.com>

	* e-cell-date-edit.[hc]: new files to implement an ECell for showing
	and editing dates & times. (Unfinished)

	* Makefile.am (libemiscwidgets_a_SOURCES): added e-cell-date-edit.[hc]

2001-02-24  Not Zed  <NotZed@Ximian.com>

	* e-search-bar.c (add_dropdown): Move the event box into the
	esb->dropdown_holder.  Changed so it can be called again on the
	same esb, to rebuild the menu.
	(e_search_bar_set_menu): New function to (re)set the menu.
	(add_option): Setup so it can be re-called to rebuild the option
	list.
	(e_search_bar_set_option): New function to build the menu's.

2001-02-05  Jeffrey Stedfast  <fejj@ximian.com>

	* .cvsignore: Ignore test-dropdown-button

2001-01-28  Ettore Perazzoli  <ettore@ximian.com>

	* e-search-bar.c (add_spacer): Make the spacer 4 pixels wider.
	(add_dropdown): Put the dropdown button into an event box with a
	1-pixel border, so that we match the [Hardcoded! Stupid GTK+!]
	border around the option menu.

2001-01-28  Ettore Perazzoli  <ettore@ximian.com>

	* e-dropdown-button.c (menu_deactivate_cb): New function to change
	the state of the toggle button when the pop-up menu disappears.
	(impl_clicked): Removed.
	(impl_button_press_event): New, implementation for
	`::button_press_event'.  Pop-up the menu, and toggle the button.
	(class_init): Override `::button_press_event' with
	`impl_button_press_event'; don't override `::clicked' anymore.

	* e-dropdown-button.h, e-dropdown-button.c: Derive from
	`GtkToggleButton', instead of plain `GtkButton'.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* e-search-bar.c (add_dropdown): Make the dropdown button
	non-focusable.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* e-search-bar.c (e_search_bar_init): Don't create the widgets
	here.
	(e_search_bar_construct): New.  Do it here instead.
	(e_search_bar_new): Call it.  Added preconditions.
	(esb_pack_menubar): Removed.
	(add_dropdown): New.
	(add_option): New.
	(add_entry): New.
	(e_search_bar_construct): Use `add_dropdown()', `add_option()',
	`add_entry()'.
	(class_init): Renamed from `e_seearch_bar_class_init'.
	(init): Renamed from `e_search_bar_init'.
	(impl_destroy): Renamed from `e_search_bar_destroy'.
	(emit_menu_activated): Renamed from `esb_menu_activated'.
	(emit_query_changed): Renamed from `esb_query_changed'.
	(menubar_activated_cb): Renamed from `esb_menubar_activated'.
	(option_activated_cb): Renamed from `esb_option_activated'.
	(esb_entry_activated): Renamed from `esb_entry_activated'.
	(impl_set_arg): Renamed from `e_search_bar_set_arg'.
	(impl_get_arg): Renamed from `e_search_bar_get_arg'.

	* e-search-bar.h (struct _ESearchBar): Removed member `menubar';
	replaced it with `dropdown'.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* e-dropdown-button.c (e_dropdown_button_construct): Removed
	@ui_info and @data args.  Obviously I am not very smart at this
	time of the night.
	(e_dropdown_button_new): Likewise.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* e-dropdown-button.c, e-dropdown-button.h: New.

2001-01-25  Damon Chaplin  <damon@ximian.com>

	* e-calendar-item.[hc]: e_calendar_item_get_date_range() now returns
	a boolean, which is FALSE if no dates are currently shown.
	Plus a couple of minor sanity checks.

2001-01-19  Federico Mena Quintero  <federico@ximian.com>

	* e-calendar.c (e_calendar_init): Unset the GTK_CAN_FOCUS flag on
	the ECalendar.
	(e_calendar_focus_in): Removed function since it did nothing.
	(e_calendar_focus_out): Likewise.
	(e_calendar_key_press): Likewise.
	(e_calendar_init): Turn off the GTK_CAN_FOCUS flag for both arrow
	buttons.

2001-01-17  Federico Mena Quintero  <federico@ximian.com>

	* e-calendar-item.c (e_calendar_item_set_max_days_sel): Make zero
	the minimum number of days that can be specified.
	(e_calendar_item_set_arg): We do need an update when the maximum
	number of selected days is changed.
	(e_calendar_item_set_max_days_sel): Request an update of the
	canvas item.
	(e_calendar_item_button_press): Do not start selecting days if the
	max_days_selected is less than 1.

2001-01-17  Jeffrey Stedfast  <fejj@ximian.com>

	* e-messagebox.c (e_message_box_get_id): Oops. Delete this. I
	never meant for this to get commit'd.

2001-01-17  JP Rosevear  <jpr@ximian.com>

	* e-messagebox.c (e_message_box_get_id): Dont remove the function, give
	it the proper name

2001-01-17  Ettore Perazzoli  <ettore@ximian.com>

	* e-messagebox.c (e_message_box_get_checkbox): Remove the version
	returning `const char *' as of course it doesn't compile.  Please
	compile before committing.

2001-01-17  Jeffrey Stedfast  <fejj@ximian.com>

	* Makefile.am: Added e-messagebox to the build.

	* e-messagebox.[c,h]: Added a new messagebox window that contains
	a checkbox for "Don't show me this again."

2001-01-16  Jason Leach  <jasonleach@usa.net>

	* e-search-bar.[ch]: Moved here from $(toplevel)/filter.

2000-12-22  JP Rosevear  <jpr@helixcode.com>

	* e-calendar-item.h: add prototypes

	* e-calendar-item.c (e_calendar_item_init): Set max_days_selected to
	1 and days_to_start_week_selection to -1 as documented in header
	(e_calendar_item_set_arg): use new accessor methods
	(e_calendar_item_get_arg): ditto
	(e_calendar_item_get_max_days_sel): accessor
	(e_calendar_item_set_max_days_sel): ditto
	(e_calendar_item_get_days_start_week_sel): ditto
	(e_calendar_item_set_days_start_week_sel): ditto
	(e_calendar_item_class_init): add display_popup argument
	(e_calendar_item_init): initialize display_popup member
	(e_calendar_item_get_arg): get display_popup member
	(e_calendar_item_set_arg): set display_popup member
	(e_calendar_item_button_press): only show the popup menu if the
	member is set
	(e_calendar_item_get_display_popup): acessor
	(e_calendar_item_set_display_popup): ditto

2000-12-14  Federico Mena Quintero  <federico@helixcode.com>

	* e-dateedit.h: #include <time.h>

2000-12-08  JP Rosevear  <jpr@helixcode.com>

	* e-calendar.c (e_calendar_destroy): Call the parent class destroyer
	as well

2000-10-26  Damon Chaplin  <damon@helixcode.com>

	* e-dateedit.[hc]: updated to emit "changed" when appropriate, which
	turned out to be amazingly difficult :(
	Also added e_date_edit_get/set_date() to get/set just the date.
	Added e_date_edit_date_is_valid() & e_date_edit_time_is_valid() so
	you can check if the user has tried to enter an invalid date.
	(All the get_date/time functions return the last valid date entered.)

	* test-dateedit.c: updated a bit.

2000-11-02  Federico Mena Quintero  <federico@helixcode.com>

	* e-dateedit.h (EDateEditClass): Removed the "time_changed"
	signal, since it was never being emitted in the first place.  Time
	values *are* both date and time together anyways, so whenever one
	changes we should notify about the whole date/time value being
	changed.
	Renamed the remaining "date_changed" signal to just "changed".

	* e-dateedit.c (e_date_edit_class_init): Do not create the
	"time_changed" signal; rename the other one to "changed".
	(set_time): Moved the core functionality from
	e_date_edit_set_time() to here.  This function just sets the
	widgets' values without emitting any signals.
	(e_date_edit_set_time): Emit the "changed" signal unconditionally.
	This is to be consistent with the rest of the GTK+ widgets, and it
	actually makes writing client code easier.
	(e_date_edit_new): Use set_time().
	(on_date_popup_now_button_clicked): Do not emit the signal here.
	(on_date_popup_none_button_clicked): Likewise.
	(e_date_edit_set_time_of_day): Emit the signal, since we do not
	call e_date_edit_set_time().

2000-10-30  Kjartan Maraas  <kmaraas@gnome.org>

	* e-calendar-item.c: #include <string.h> to get rid of warning.
	* e-clipped-label.c: Same here.
	
2000-10-27  Federico Mena Quintero  <federico@helixcode.com>

	* e-dateedit.c (e_date_edit_destroy): Do not unref the cal_popup
	since we already destroyed it.

2000-10-11  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.c (e_calendar_item_recalc_sizes): fixed to
	recalculate min_cell_width/height in case the show_week_numbers option
	is changed.

	* e-dateedit.c: added support for hiding the date field, and added
	get/set_time_of_day() functions to get/set just the time.

2000-09-30  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.c: 
	* e-dateedit.c: better i18n of strftime strings.

2000-09-29  Ettore Perazzoli  <ettore@helixcode.com>

	* e-title-bar.c: New member `pin_gtk_pixmap' in
	`ETitleBarPrivate'.  Signal "close_button_clicked" renamed to
	"button_clicked".  Signal "title_button_press_event" renamed to
	"label_button_press_event".
	(init): Init new members.
	(close_button_realize_cb): Create the pin pixmap.  Call
	`show_and_hide_pixmaps_according_to_mode()'.
	(e_title_bar_show_close_button): Renamed to
	`e_title_bar_show_button'.
	(e_title_bar_get_button_mode): New.
	(e_title_bar_set_button_mode): New.

2000-09-23  Damon Chaplin  <damon@helixcode.com>

	* e-calendar.c: use pixmaps instead of GtkArrows to look better.
	Also set the canvas window's background when realized so that we can
	set the button reliefs to none.

2000-09-22  Damon Chaplin  <damon@helixcode.com>

	* test-dateedit.c: updated a bit, adding a few EDateEdits with
	different options.

	* e-calendar-item.c (e_calendar_item_set_selection): aborted any
	current selection operation and initialize all of the selection fields.
	(e_calendar_item_unmap): new function to abort any current selection
	operation. Otherwise GnomeCanvas gets in a muddle about grabs.

	* e-dateedit.c: marked some strftime()/strptime() format strings for
	translation and used "%m/%d/%Y" instead of "%x" so we get the complete
	year number. Also changed e_date_edit_get_time() so it returns -2 if
	it can't parse the date or time, and -1 if it is explicitly set to
	None.
	(e_date_edit_parse_date): new function to parse the date string and
	add on the current century if a year of 0-99 is entered.

2000-09-21  Damon Chaplin  <damon@helixcode.com>

	* e-dateedit.c (on_date_button_clicked): only check return of strptime
	for NULL. It should now select the correct day set in the popup.

	* e-calendar.c: 
	* e-calendar-item.c: 
	* test-calendar.c: removed support for buttons within the ECalendar.
	It is cleaner to add them outside it, as EDateEdit does.

2000-09-18  Dan Winship  <danw@helixcode.com>

	* e-dateedit.c (_XOPEN_SOURCE): set this to 4 to specify how much
	X/Open we want with that.

2000-09-18  Christopher James Lahey  <clahey@helixcode.com>

	* Makefile.am: Added $(EXTRA_GNOME_CFLAGS) and
	$(EXTRA_GNOME_LIBS).  Removed unneeded libraries.

	* e-calendar-item.c, e-calendar.c, e-calendar.h, e-title-bar.c:
	Fixed the #include lines to deal properly with gal.

	* e-scroll-frame.c, e-scroll-frame.h: Moved to gal.

2000-09-11  Damon Chaplin  <damon@helixcode.com>

	* Makefile.am (libemiscwidgets_a_SOURCES): added e-dateedit.[hc]
	and the test-dateedit app.

	* e-dateedit.[hc]: new widget to use instead of GnomeDateEdit. It
	uses the new ECalendar widget for the calendar and also supports
	"None", "Today" and "Now" buttons, and goes away with a single click.

	* test-dateedit.c: app to test the EDateEdit widget.

	* e-calendar-item.c: updated to support the EDateEdit better,
	mainly by adding the "move_selection_when_moving" arg so we can turn
	it off to keep the same day selected when changing the months shown.

2000-09-05  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.c (e_calendar_item_draw_month): make sure we get
	the start_weekday since we need it for draw_days(). Fixes a drawing
	bug.

2000-08-31  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.c (e_calendar_item_button_press): 
	(e_calendar_item_button_release): grab/ungrab the pointer so we
	always get the button_release event.

2000-08-30  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.[hc]: 
	* e-calendar.[hc]: Updated.

2000-08-10  Christopher James Lahey  <clahey@helixcode.com>

	* e-calendar-item.c, e-calendar.c: Fixed some warnings.

2000-07-25  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.h: 
	* e-calendar.[hc]: new widget and canvas item to replace GtkCalendar.
	Not quite finished yet.

2000-07-21  Ettore Perazzoli  <ettore@helixcode.com>

	* e-title-bar.c (e_title_bar_set_title): We have a `EClippedLabel',
	not a `GtkLabel' here: use the right function to change the text.

2000-07-12  Christopher James Lahey  <clahey@helixcode.com>

	* e-scroll-frame.c: Tried rearranging the casts to try for a more
	correct computation.

2000-07-08  Dan Winship  <danw@helixcode.com>

	* e-scroll-frame.c (e_scroll_frame_add): comment out true but
	confused warning about non-scrollable widgets until Chris and/or
	Federico fix this correctly.
	(e_scroll_frame_size_allocate): If the available space for the
	child is less than the width/height of the frame, give the child
	an allocation of 0 rather than some small negative number cast to
	unsigned.

2000-07-05  Dan Winship  <danw@helixcode.com>

	* Makefile.am (INCLUDES): Set G_LOG_DOMAIN=__FILE__ rather than
	"e-title-bar" in all three widgets.

2000-06-13  Anders Carlsson  <andersca@gnu.org>

	* e-scroll-frame.c (e_scroll_frame_button_press): Control does 
	horizontal scrolling, a la gimp.

2000-06-11  Anders Carlsson  <andersca@gnu.org>

	* e-scroll-frame.c (e_scroll_frame_button_press): Add support
	for mouse wheel scrolling in EScrollFrame.

2000-06-10  Ettore Perazzoli  <ettore@helixcode.com>

	* e-title-bar.c (close_button_realize_cb): Unref the pixmap and
	the mask.

