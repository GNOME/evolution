2004-07-29  Carlos Garnacho Parro  <carlosg@gnome.org>

	* filter-file.c: added the "use_filechooser" property to the 
	GnomeFileEntry

2004-06-21  Jeffrey Stedfast  <fejj@novell.com>

	* filter-input.c (xml_encode): encode entities. fixes bug #46677.

2004-06-18  Jeffrey Stedfast  <fejj@ximian.com>

	* filter-errors.xml.h: Re-added - THIS IS NOT TO BE REMOVED!!!!

2004-06-17  Rodney Dawes  <dobey@novell.com>

	* filter-errors.xml.h: Remove this generated file from CVS

2004-06-17  Not Zed  <NotZed@Ximian.com>

	** See #59885.

	** Moved all of the mailer specific filter stuff into mail/*.

	* filter-element.c (copy_value): implement for base types.

	* filter-element.c (filter_element_copy_value): do this as a
	virtual method.

	* filter.glade: moved the vfolder stuff to mail/

	* libfilter-i18n.h: removed, moved to mailer.

	* filter-errors.xml: moved the vfolder/filtering errors to the
	mail error file.

	* Makefile.am (EXTRA_DIST): moved *types.xml to mail.
	(INCLUDES): removed a bunch of mail dependencies.

	* filter-*.[ch], vfolder-*.[ch]: Moved all mail related filter and
	vfolder stuff to mail directory.

	* score-*.[ch]: Removed all of it.

	* vfolder-context.c (vfolder_new_element): and for vfolders.

	* filter-context.c (filter_new_element): implement for filter
	element types.

	* rule-context.c (rc_new_element): replacement for old
	filter_element_new_type_name.  only has the basics.

	* filter-part.c (filter_part_xml_create): take a rule context
	as an argument & and look up the element name off the context.

	* rule-context.c (rule_context_new_element): new virtual method to
	get an element for a given name.

	* filter-element.c (filter_element_new_type_name): removed.

2004-06-08  Not Zed  <NotZed@Ximian.com>

	* filtertypes.xml: give the junk test a unique name. #59567.

2004-05-27  Rodney Dawes  <dobey@novell.com>

	* Makefile.am (EXTRA_DIST): Add $(error_i18n)

2004-05-26  Rodney Dawes  <dobey@novell.com>

	* libfilter-i18n.h: Removed from CVS
	Generated files don't belong in CVS

2004-05-19  JP Rosevear  <jpr@novell.com>

	* Makefile.am: don't dist the error .h file

2004-05-18  Not Zed  <NotZed@Ximian.com>

	* vfolder-rule.c (source_add): fix for folder selector api change,
	change the ok button to "Add".

2004-05-12  Jeffrey Stedfast  <fejj@novell.com>

	* vfolder-rule.c: Same.

	* filter-folder.c: Added a #include to fix some compile warnings.

2004-05-12  Not Zed  <NotZed@Ximian.com>

	* filter-rule.c (xml_decode): load threading option if threading
	enabled.
	(xml_encode): write out threading setting.
	(rule_copy): copy threading option.
	(rule_eq): compare threading.
	(build_code): build the match-threads stuff if set.
	(fr_grouping_changed): insead of the match_all match_any activate
	clalbacks.
	(fr_threading_changed): handle threading option menu

	* rule-context.c (rule_context_init): set capabilities flags.

	* vfolder-context.c (vfolder_context_init): set capabilities flags
	to include threading.

	* rule-context.h: added a capabilities flag, grouping and
	threading capabilities.  Sort of a hack to workaround not being
	able to put grouping or threading into rules.

	* filter-rule.h: added an option for threading as well as
	grouping.

2004-05-12  Not Zed  <NotZed@Ximian.com>

	* Makefile.am (%.xml.h): fix i18n file generation rules.

	* filter-errors.xml: rename from xml.in and fix tags.

	* filter-errors.xml.h: add for translators.

2004-05-03  Jeffrey Stedfast  <fejj@ximian.com>

	* vfoldertypes.xml: Added the Junk status flag to the xml
	definition so you can vfolder on that.

2004-04-28  Not Zed  <NotZed@Ximian.com>

	* filter-option.c (filter_option_add): fix a warning.

	** Changed error messages to use EError.

2004-03-31  Not Zed  <NotZed@Ximian.com>

	* filter.glade: renamed filter_label to rule_label, and removed
	the vfolder-editor and filter-editor windows.

	* rule-editor.c (rule_editor_new): hide the source widget.

	* vfolder-editor.c (vfolder_editor_new): hide the source widget.

	* rule-editor.c (rule_editor_new): add a label argument.

	* vfolder-editor.c (vfolder_editor_new): ditto below.

	* filter-editor.c (filter_editor_new): dont add any label here.

	* rule-editor.c (rule_editor_construct): Put the widget back in
	the dialogue box here.  Add an argument for the area label.

	** Revert Rodney's last patch.

2004-03-30  Rodney Dawes  <dobey@ximian.com>

	* filter-editor.c (filter_editor_new): Use the new "filter_editor"
	that has been added to the glade file
	* filter.glade: Remove an unused piece of UI definition and add a
	new "filter_editor" that is the same as rule_editor, only for the
	filter editor dialogs, and change "Filter Rules" to "Search Rules"
	in the rule_editor
	* rule-editor.c (rule_editor_new): Set the child widget of the editor
	dialog appropriately

2004-03-29  Rodney Dawes  <dobey@ximian.com>

	* filter-filter.c (get_widget):
	* filter-rule.c (get_widget): Fix packing of the hbox that contains
	the actual input widgets to expand and fill

2004-03-26  Not Zed  <NotZed@Ximian.com>

	* filter-option.c (filter_option_add): return the added option.
	(clone): make sure we set the current option properly on the new
	copy.  See #56028.

	* filtertypes.xml: s/pipe to shell command/pipe to program/
	s/shell command/run program/, cleans up the UI a lot.

2004-03-20  Danilo Å egan  <dsegan@gmx.net>

	* filter-datespec.c (set_button): Use ngettext for handling plurals.
	(timespans): Use C preprocessor hacks to make xgettext see real
	ngettext messages (fixes part of #53464).

2004-03-16  Jeffrey Stedfast  <fejj@ximian.com>

	* filter-rule.c (rule_copy): Don't ref the newly cloned rule (fix
	to previous patch).

2004-03-14  Bill Zhu  <bill.zhu@sun.com>

	* filter-rule.c (rule_copy): When copying a FilterPart of a rule, we
	need copy the data of parts together but not only copy the pointer.

2004-04-15  Rodney Dawes  <dobey@ximian.com>

	* filter-datespec.c (validate):
	(button_clicked): Hide the separators on these dialogs
	* filter-editor.c (filter_editor_new): Re-pack the rule_editor widget
	in here, and get rid of the GtkFrame-related code
	* filter-file.c (validate): Hide the separators on these dialogs
	* filter-filter.c (get_widget): Get rid of the GtkFrame, and relayout
	the widgets to be HIG-compliant
	* filter-folder.c (validate): Hide the separator on this dialog
	* filter-input.c (validate): Hide the separator on this dialog
	* filter-part.c (main): Hide the separator on this dialog
	* filter-rule.c (validate): Hide the separator on this dialog
	(get_widget): Get rid of the GtkFrame, and relayout the widgets to be
	HIG-compliant
	* filter.glade: Make the widget layouts here be HIG-compliant
	* rule-context.c (new_rule_response):
	(rule_context_add_rule_gui): Hide the separators on these dialogs
	* rule-editor.c (rule_editor_new): Get rid of the GtkFrame-related code
	(add_editor_response): Hide the dialog separator here
	(rule_add): Hide the dialog separator here
	(edit_editor_response): Hide the dialog separator here
	(rule_edit): Hide the dialog separator here
	(rule_editor_construct): Remove the rule_editor repacking code
	Set the dialog vbox's border width to 12
	Set the mnemonic for the filter label here
	Hide the dialog separator on the filter editor dialog
	* vfolder-editor.c (vfolder_editor_new): Re-pack the appropriate
	editor widget in here
	Get rid of the GtkFrame-related code
	* vfolder-rule.c (validate): Hide the dialog separators here

	Original patch from William Jon McCann

2004-02-20  Jeffrey Stedfast  <fejj@ximian.com>

	* rule-editor.c (rule_delete): After setting the new selected
	iter, call cursor_changed() so we can update state. Fixes bug
	#54205.

2004-02-20  Not Zed  <NotZed@Ximian.com>

	** See bug #54338.

	* vfolder-rule.c: instead of overriding the filter-rule's 'source'
	attribute for 'with sources', add a 'with' enum.
	(xml_decode): handle loading old-format files, as well as new
	ones, where the with is a prop on the sources xml.
	(xml_encode): set 'with' on save.
	(rule_copy): copy across with value.
	(get_widget): just hook onto option menu changed, dont bother
	setting up any per-item callbacks.
	(select_source_with_changed): callback to monitor source 'with'
	type.

2004-02-17  Not Zed  <NotZed@Ximian.com>

	* filter-int.c (int_clone): implement, since we dont store the
	min/max values in the xml output, we lose it otherwise.  Bug
	#54155.

2004-02-06  Hans Petter Jansson  <hpj@ximian.com>

	* filter-input.c (filter_input_init): Default to an empty string
	for the value.
	(xml_decode): Remove old values before decoding the new ones.

2004-02-03  Dan Winship  <danw@ximian.com>

	* Makefile.am (INCLUDES): add widgets/misc

2004-01-20  Not Zed  <NotZed@Ximian.com>

	* rule-context.c (revert): load from the just-loaded 'userdoc'
	rather than rc->user.
	(rule_context_finalise): remove user and system xmldoc files.
	(load): make rc->system and rc->user locals systemdoc userdoc, and
	free them immediately.

2004-01-16  Not Zed  <NotZed@Ximian.com>

	** See bug #52467.

	* vfolder-rule.c (vfr_folder_response): convert the uri to an
	evolution uri, rather than a camel one, for storage.  And remove
	double-calls to geT_selected_uri.
	(format_source): treat uri as an evolution uri and convert to a
	camel one to get something meaningful out of it.

2004-01-15  Radek Doulik  <rodo@ximian.com>

	* filtertypes.xml: s/spam/junk, added junk test rule, it must be
	lost while porting to 1.5

2003-08-20  Not Zed  <NotZed@Ximian.com>

	** See bug #47751.

	* rule-editor.c (add_editor_response, edit_editor_response) 
	(rule_edit, rule_add, rule_editor_construct, editor_response):
	* rule-context.c (new_rule_response, rule_context_add_rule_gui): 
	* filter-datespec.c (button_clicked): RESPONSE_REJECT/ACCEPT ->
	RESPONSE_CANCEL/OK

2003-12-23  JP Rosevear <jpr@ximian.com>

	* vfolder-rule.c (source_add): call peek instead of get as the
	function was renamed

2003-12-06  JP Rosevear <jpr@ximian.com>

	* */Makefile.am: Remove hard coded disable deprecated flags
	
2003-12-04  Radek Doulik  <rodo@ximian.com>

	* filter-rule.h: added FILTER_SOURCE_JUNKTEST - perform only
	junktest on incoming mail

2003-11-26  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: turn on deprecated gtk stuff

2003-11-17  Jeffrey Stedfast  <fejj@ximian.com>

	* vfolder-rule.c: #include "em-folder-tree.h"

2003-11-17  Not Zed  <NotZed@Ximian.com>

	* vfolder-rule.c (source_add): fix for folder selector api changes.
	(vfr_folder_response): handle the dialog response.

2003-10-22  Ettore Perazzoli  <ettore@ximian.com>

	* filter.glade: Remove Viewports around the treeviews, since they
	already have a scrolled window around them and the viewports cause
	a double bevel to appear.

	* rule-editor.c (rule_editor_treeview_new): Make the scrolled
	window have a GTK_SHADOW_IN shadow.
	* vfolder-rule.c (vfolder_editor_sourcelist_new): Likewise

2003-10-10  Not Zed  <NotZed@Ximian.com>

	* filter-folder.c (folder_selected): change for
	emfolderselectionbutton fixes.
	(get_widget): same.

2003-09-29  Ettore Perazzoli  <ettore@ximian.com>

	* filter-folder.c (get_widget): Use an EMFolderSelectionButton.

2003-09-22  Jeffrey Stedfast  <fejj@ximian.com>

	* filter-int.c (get_widget): Listen to the "value-changed" signal
	rather than the "changed" signal. Fixes bug #48166.

2003-09-16  Jeremy Katz  <katzj@redhat.com>

	* rule-context.c (rule_context_add_part_set): type should be a GType.
	(rule_context_add_rule_set): Likewise.
	* rule-context.h: Update prototypes.  Use GType instead of int for
	type in _part_set_map and _rule_set_map.
	
2003-09-15  Not Zed  <NotZed@Ximian.com>

	** See Natzilla task #47524

	* filter-rule.h (FilterRule): add a system bit, for rules that
	shouldn't be edited/saved.

	* rule-context.c (load): check for ruleset maps in the system
	file, and if they exist, load in as system rules.
	(save): ignore system rules if they exist.

	* searchtypes.xml: Added a search-specific types folder.  Also
	contains system searches that cannot be deleted.

2003-08-18  Ettore Perazzoli  <ettore@ximian.com>

	* vfolder-rule.c (source_add): As a temporary measure, don't call
	evolution_shell_client_user_select_folder() since this is not done
	by the shell anymore.

	* filter-folder.c (get_widget): Return NULL for now, since we
	can't get the folder selector button from the shell anymore.

2003-08-05  Not Zed  <NotZed@Ximian.com>

	** See bug #42636.
	
	* vfoldertypes.xml: Fix some of the subject rules, they were
	missing matching ')'s.

2003-08-01  Not Zed  <NotZed@Ximian.com>

	** See bug #47208.

	* filter-code.c (build_code): wrap the expression in a match-all
	so boolean expressions work properly for folder searches.

2003-07-23  Dan Winship  <danw@ximian.com>

	* Makefile.am: Use EVO_MARSHAL_RULE

2003-06-13  Larry Ewing  <lewing@ximian.com>

	* filter-source.c (filter_source_finalize): free current_url.

2003-06-11  Mike Kestner  <mkestner@ximian.com>

	* rule-context.c (load): stat the user file before parsing.

2003-06-06  Jeffrey Stedfast  <fejj@ximian.com>

	Fixes some leaks from bug #43883.

	* filter-file.c (xml_decode): Free file->path and set it to
	NULL before entering the loop to decode it. This way if the value
	is already set we don't leak it. Set file->path = g_strdup (str ?
	str : ""); and then xmlFree the str.

2003-05-21  Jeffrey Stedfast  <fejj@ximian.com>

	* filter-source.c (filter_source_get_sources): Same as below.

	* filter-label.c (xml_create): Unref the gconf client when we're
	finished with it.
